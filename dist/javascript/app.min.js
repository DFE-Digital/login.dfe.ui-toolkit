var COOKIE_NAMES={PREFERENCES_SET:"cookies_preferences_set",POLICY:"cookies_policy",GA:"_ga",GA_GID:"_gid",GA_GAT:"_gat",USER_BANNER_LAST_SEEN:"user_banner_last_seen"},GOVUK_COOKIE_OPTIONS={expires:365,secure:!0,domain:".education.gov.uk"},GovUKCookie={getRaw:function(e){if(window.Cookies)return window.Cookies.get(e)},get:function(e){if(window.Cookies){var t=window.Cookies.get(e);return t?JSON.parse(t):t}},set:function(e,t){if(window.Cookies)return window.Cookies.set(e,t,GOVUK_COOKIE_OPTIONS)},remove:function(e){if(window.Cookies)return window.Cookies.remove(e,GOVUK_COOKIE_OPTIONS)}};function checkConditionForUsersBanner(){var e=GovUKCookie.getRaw(COOKIE_NAMES.USER_BANNER_LAST_SEEN);return!e||((new Date).getTime()-e)/864e5>90}function showReviewUsersBanner(){$("#review-users-banner").show()}function setReviewUsersBannerLastSeen(){GovUKCookie.set(COOKIE_NAMES.USER_BANNER_LAST_SEEN,(new Date).getTime())}function loadReviewUsersBanner(){checkConditionForUsersBanner()&&showReviewUsersBanner()}function updateCookieReviewUsersBanner(){checkConditionForUsersBanner()&&setReviewUsersBannerLastSeen()}GovUKCookie.remove(COOKIE_NAMES.POLICY),GovUKCookie.remove(COOKIE_NAMES.PREFERENCES_SET),GovUKCookie.remove(COOKIE_NAMES.GA),GovUKCookie.remove(COOKIE_NAMES.GA_GAT),GovUKCookie.remove(COOKIE_NAMES.GA_GID),function(e){var t=e.GOVUK||{};t.details={NATIVE_DETAILS:"boolean"==typeof document.createElement("details").open,KEY_ENTER:13,KEY_SPACE:32,started:!1,addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,(function(e){n(e,e.target)}),!1):e.attachEvent&&e.attachEvent("on"+t,(function(e){n(e,e.srcElement)}))},removeEvent:function(e,t){e.removeEventListener?e.removeEventListener(t,(function(e){}),!1):e.detachEvent&&e.detachEvent("on"+t,(function(e){}))},charCode:function(e){return"number"==typeof e.which?e.which:e.keyCode},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},addClickEvent:function(e,n){t.details.addEvent(e,"keypress",(function(e,a){t.details.charCode(e)!==t.details.KEY_ENTER&&t.details.charCode(e)!==t.details.KEY_SPACE||"summary"===a.nodeName.toLowerCase()&&(t.details.preventDefault(e),a.click?a.click():n(e,a))})),t.details.addEvent(e,"keyup",(function(e,n){t.details.charCode(e)===t.details.KEY_SPACE&&"SUMMARY"===n.nodeName&&t.details.preventDefault(e)})),t.details.addEvent(e,"click",(function(e,t){n(e,t)}))},getAncestor:function(e,t){do{if(!e||e.nodeName.toLowerCase()===t)break;e=e.parentNode}while(e);return e},addDetailsPolyfill:function(e,n){if(n=n||document.body,!t.details.started&&(t.details.started=!0,0!==(e=n.getElementsByTagName("details")).length)){for(var a=e.length,o=0;o<a;o++){var i=e[o];if(i.__summary=i.getElementsByTagName("summary").item(0),i.__content=i.getElementsByTagName("div").item(0),!i.__summary||!i.__content)return;i.__content.id||(i.__content.id="details-content-"+o),i.setAttribute("role","group"),i.__summary.setAttribute("role","button"),i.__summary.setAttribute("aria-controls",i.__content.id),t.details.NATIVE_DETAILS||(i.__summary.tabIndex=0);var r=null!==i.getAttribute("open");if(!0===r?(i.__summary.setAttribute("aria-expanded","true"),i.__content.setAttribute("aria-hidden","false")):(i.__summary.setAttribute("aria-expanded","false"),i.__content.setAttribute("aria-hidden","true"),t.details.NATIVE_DETAILS||(i.__content.style.display="none")),i.__summary.__details=i,!t.details.NATIVE_DETAILS){var s=document.createElement("i");!0===r?(s.className="arrow arrow-open",s.appendChild(document.createTextNode("▼"))):(s.className="arrow arrow-closed",s.appendChild(document.createTextNode("►"))),i.__summary.__twisty=i.__summary.insertBefore(s,i.__summary.firstChild),i.__summary.__twisty.setAttribute("aria-hidden","true")}}t.details.addClickEvent(n,(function(e,n){return!(n=t.details.getAncestor(n,"summary"))||t.details.statechange(n)}))}},statechange:function(e){var n="true"===e.__details.__summary.getAttribute("aria-expanded"),a="true"===e.__details.__content.getAttribute("aria-hidden");(e.__details.__summary.setAttribute("aria-expanded",n?"false":"true"),e.__details.__content.setAttribute("aria-hidden",a?"false":"true"),t.details.NATIVE_DETAILS)||(e.__details.__content.style.display=n?"none":"",null!==e.__details.getAttribute("open")?e.__details.removeAttribute("open"):e.__details.setAttribute("open","open"));return e.__twisty&&(e.__twisty.firstChild.nodeValue=n?"►":"▼",e.__twisty.setAttribute("class",n?"arrow arrow-closed":"arrow arrow-open")),!0},destroy:function(e){t.details.removeEvent(e,"click")},init:function(){t.details.addEvent(document,"DOMContentLoaded",t.details.addDetailsPolyfill),t.details.addEvent(window,"load",t.details.addDetailsPolyfill)}},e.GOVUK=t}(window);var NSA=NSA||{};const filterBoxes=$(".filter-box");function sortTable(e){var t,n,a,o,i,r,s,d,l=0;for(t=$("table.sortable"),a=!0,d="a";a;){for(a=!1,n=t.find("tr"),o=1;o<n.length-1;o++)if(s=!1,i=n[o].getElementsByTagName("TD")[e],r=n[o+1].getElementsByTagName("TD")[e],"a"===d){if(i.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){s=!0;break}}else if("d"===d&&i.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){s=!0;break}s?(n[o].parentNode.insertBefore(n[o+1],n[o]),a=!0,l++):0===l&&"a"===d&&(d="d",a=!0)}return d}NSA.filters={init(){function e(e){return e.filter(":checked").length>0?`${e.filter(":checked").length} selected`:""}filterBoxes.each(((t,n)=>{const a=$(n),o=a.find(".container-head"),i=o.find(".option-select-label"),r=a.find("input:checkbox"),s=$("<button />").addClass("js-container-head"),d=$("<div />").addClass("js-selected-counter").text((()=>e(r)));s.on("click",(e=>{const t=$(e.currentTarget),n=t.next();t.hasClass("closed")?(n.show(),t.removeClass("closed").attr("aria-expanded",!0)):(n.hide(),t.addClass("closed").attr("aria-expanded",!1)),e.preventDefault()})).append(i,d),o.replaceWith(s),r.on("change",(()=>{d.text((()=>e(r)))}))}))}},filterBoxes.length>0&&NSA.filters.init(),(NSA=NSA||{}).modal={elems:{links:$(".modal-link"),modals:$(".modal")},init:function(){this.modalBg(),this.setUpEvents()},modalBg:function(){var e=this,t=$("<div>").addClass("modal-bg").hide().on("click",(function(){e.hideModals()}));$("body").append(t)},setUpEvents:function(){var e=this;this.elems.links.on("click",(function(t){var n=$(this).attr("href");e.showModal($(n)),t.preventDefault()})),e.elems.modals.find(".close").on("click",(function(t){e.hideModals(),t.preventDefault()})),$("body").on("keydown",(function(t){27===(t.keyCode||t.which)&&e.hideModals()}))},showModal:function(e){$("html").addClass("modal-open"),$(".modal-bg").show(),e.show()},hideModals:function(){$("html").removeClass("modal-open"),$(".modal-bg").hide(),this.elems.modals.hide()}},NSA.modal.init(),function(e){var t=e.jQuery,n=e.GOVUK||{};function a(){var e=this,n="ShowHideContent",a='[data-target] > input[type="radio"]',o='[data-target] > input[type="checkbox"]',i="a.js-toggle-content";function r(){var e=t(this),n=s(e);n.length&&(e.attr("aria-controls",n.attr("id")),e.attr("aria-expanded","false"),n.attr("aria-hidden","true"))}function s(e){var n=e.attr("aria-controls");return n||(n=e.closest("[data-target]").data("target")),t("#"+n)}function d(e,t){t.hasClass("js-hidden")&&(t.removeClass("js-hidden"),t.attr("aria-hidden","false"),e.attr("aria-controls")&&e.attr("aria-expanded","true"))}function l(e,t){(t=t||s(e)).hasClass("js-hidden")||(t.addClass("js-hidden"),t.attr("aria-hidden","true"),e.attr("aria-controls")&&e.attr("aria-expanded","false"))}function c(e,n){var o=a+"[name="+(e.attr("name").replace("[","\\[").replace("]","\\]")+"][aria-controls]"),i=e.closest("form");(i.length?i.find(o):t(o)).each((function(){l(t(this))})),e.is("[aria-controls]")&&d(e,n)}function u(e,t){e.is(":checked")?d(e,t):l(e,t)}function h(e,t,n){t.hasClass("js-hidden")?d(e,t):l(e,t),n.preventDefault()}function f(e,a,o,i){function d(e){var n=t(this);i(n,s(n),e)}e=e||t(document.body);var l=t(a);l.each(r),t.each(o,(function(t,a){e.on("click."+n,a,d)})),l.is(":checked")&&l.filter(":checked").each(d)}e.showHideRadioToggledContent=function(e){var n;f(e,a,(n=[],t(a).map((function(){var e=t(this).attr("name");return-1===t.inArray(e,n)?(n.push(e),'input[type="radio"][name="'+t(this).attr("name")+'"]'):null}))),c)},e.showHideCheckboxToggledContent=function(e){f(e,o,[o],u)},e.showHideLinkToggledContent=function(e){f(e,i,[i],h)},e.destroy=function(e){(e=e||t(document.body)).off("."+n)}}a.prototype.init=function(e){this.showHideRadioToggledContent(e),this.showHideCheckboxToggledContent(e),this.showHideLinkToggledContent(e)},n.ShowHideContent=a,e.GOVUK=n}(window),$((function(){$("table.sortable thead th").on("click",(function(){var e=$("table.sortable thead tr th");e.removeClass("sorted").removeClass("dir-a").removeClass("dir-d");var t=sortTable(e.index($(this)));$(this).addClass("sorted dir-"+t)}))}));var toggleTips=$(".toggle-help");toggleTips.each((function(){var e,t,n,a;e=$(this),n=$("<span />").attr("class","toggletip"),a=$("<button />").attr("type","button").attr("aria-label","Help").attr("data-toggletip-content",e.html()).text("?").on("click",(function(){var t=$(this).data("toggletip-content"),n=$(this).next();window.setTimeout((function(){n.html((function(){return $("<span />").attr("class",(function(){return e.html().length>50?"bubble long":"bubble"})).text(t)}))}),100)})).on("keydown",(function(e){27===(e.keyCode||e.which)&&t.html("")})),t=$("<span />").attr("role","status"),n.append(a,t),e.before(n).remove(),$(document).on("click",(function(n){e[0]!==$(n.target)&&t.html("")}))}));var forms=$("#content form");forms.attr("novalidate","novalidate");NSA=NSA||{};function select2ModelMatcher(e,t){if(t.parentText=t.parentText||"",void 0===e.term||!e.term||""===e.term.trim())return t;if(t.children&&t.children.length>0){for(var n=$.extend(!0,{},t),a=t.children.length-1;a>=0;a--){var o=t.children[a];o.parentText+=t.parentText+" "+t.text,null==select2ModelMatcher(e,o)&&n.children.splice(a,1)}return n.children.length>0?n:select2ModelMatcher(e,n)}var i=(t.parentText+" "+t.text).toUpperCase(),r=e.term.toUpperCase();return i.indexOf(r)>-1?t:null}NSA={showPassword:function(){$(".show-password").each((function(e){var t=$(this).find("input:password"),n=$("<label />").prop({for:"show-password-"+e}).html("Show"),a=$("<input />").prop({type:"checkbox",id:"show-password-"+e}).on("change",(function(){var e=$(this);t.prop("type",(function(){return e.prop("checked")?"text":"password"})),n.html((function(){return e.prop("checked")?"Hide":"Show"})),e.parent().removeClass("type-password"),e.prop("checked")&&e.parent().addClass("type-password")})),o=$("<div />").prop("class","show-password-control").append(a,n);t.after(o)}))},backLink:function(){var e=$("<a>").attr({href:"#",class:"link-back"}).text("Back").on("click",(function(e){window.history.back(),e.preventDefault()}));$(".js-back-link").html(e)}},$("select.select2").length>0&&$("select.select2").select2({matcher:select2ModelMatcher}),$(".show-password").length>0&&NSA.showPassword(),$(".js-back-link")&&NSA.backLink(),$(".under-construction").on("click",(function(e){window.alert("This functionality is not available yet"),e.preventDefault()})),$(".notification span.icon").length>0&&$(".notification span.icon").on("click",(function(){$(this).parent().hide()})),$("article.organisation-services").length>0&&($(".information").on("click",(function(e){var t=$(this).parent().parent().find(".service-description");e.preventDefault(),t.toggle()})),$(".info-link").on("click",(function(e){var t=$(this).parent().next();e.preventDefault(),t.toggle()})));var searchFields=$("form .search-field");if(searchFields.length>0){var loader=$("<span />").addClass("loader spinner-inline"),b1=$("<span />").addClass("ball b-1"),b2=$("<span />").addClass("ball b-2");loader.append(b1).append(b2),searchFields.each((function(){var e=$(this).parent(),t=e.find("button");e.on("submit",(function(){t.after(loader).hide()}))}))}var redirect=$("#redirect-url");$("#add-redirect").on("click",(function(){return $('<p><label for="redirect-url"><input class="form-control inputConfig" name="redirect_uris"></label></p>').appendTo(redirect),!1}));var logout=$("#logout-url");$("#add-logout").on("click",(function(){return $('<p><label for="logout-url"><input class="form-control inputConfig" name="post_logout_redirect_uris"></label></p>').appendTo(logout),!1})),$("#generate-client-secret").on("click",(function(){var e=window.niceware.generatePassphrase(8).join("-");return window.confirm("Are you sure you want to regenerate the client secret?")&&$("input#clientSecret").attr("value",e),!1})),$("#generate-api-secret").on("click",(function(){var e=window.niceware.generatePassphrase(8).join("-");return window.confirm("Are you sure you want to regenerate the api secret?")&&$("input#apiSecret").attr("value",e),!1}));var formRegister=$(".prevent-form-double-submission");formRegister.length>0&&formRegister.each((function(){var e=$(formRegister).find("button:submit"),t=e.eq(0);formRegister.on("submit",(function(){e.attr("disabled","disabled"),t.css("min-width",t.outerWidth()+"px"),t.append("<span class='loader spinner-inline'> <span class='ball b-1'></span> <span class='ball b-2'></span> <span class='ball b-3'></span> </span>")}))}));var showHideContent=new GOVUK.ShowHideContent;showHideContent.init(),GOVUK.details.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb29raWVzLmpzIiwiX2RldGFpbHMucG9seWZpbGwuanMiLCJfZmlsdGVyLWJveGVzLmpzIiwiX3RhYmxlc29ydC5qcyIsIl9tb2RhbC5qcyIsIl9zaG93LWhpZGUtY29udGVudC5qcyIsIl90b29sdGlwLmpzIiwiX3ZhbGlkYXRpb24uanMiLCJhcHAuanMiXSwibmFtZXMiOlsiQ09PS0lFX05BTUVTIiwiUFJFRkVSRU5DRVNfU0VUIiwiUE9MSUNZIiwiR0EiLCJHQV9HSUQiLCJHQV9HQVQiLCJVU0VSX0JBTk5FUl9MQVNUX1NFRU4iLCJHT1ZVS19DT09LSUVfT1BUSU9OUyIsImV4cGlyZXMiLCJzZWN1cmUiLCJkb21haW4iLCJHb3ZVS0Nvb2tpZSIsImdldFJhdyIsIm5hbWUiLCJ3aW5kb3ciLCJDb29raWVzIiwiZ2V0IiwidmFsdWUiLCJKU09OIiwicGFyc2UiLCJzZXQiLCJyZW1vdmUiLCJjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyIiwibGFzdFNlZW4iLCJEYXRlIiwiZ2V0VGltZSIsInNob3dSZXZpZXdVc2Vyc0Jhbm5lciIsIiQiLCJzaG93Iiwic2V0UmV2aWV3VXNlcnNCYW5uZXJMYXN0U2VlbiIsImxvYWRSZXZpZXdVc2Vyc0Jhbm5lciIsInVwZGF0ZUNvb2tpZVJldmlld1VzZXJzQmFubmVyIiwiZ2xvYmFsIiwiR09WVUsiLCJkZXRhaWxzIiwiTkFUSVZFX0RFVEFJTFMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuIiwiS0VZX0VOVEVSIiwiS0VZX1NQQUNFIiwic3RhcnRlZCIsImFkZEV2ZW50Iiwibm9kZSIsInR5cGUiLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiYXR0YWNoRXZlbnQiLCJzcmNFbGVtZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJjaGFyQ29kZSIsIndoaWNoIiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJhZGRDbGlja0V2ZW50Iiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImNsaWNrIiwiZ2V0QW5jZXN0b3IiLCJtYXRjaCIsInBhcmVudE5vZGUiLCJhZGREZXRhaWxzUG9seWZpbGwiLCJsaXN0IiwiY29udGFpbmVyIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwibiIsImkiLCJfX3N1bW1hcnkiLCJpdGVtIiwiX19jb250ZW50IiwiaWQiLCJzZXRBdHRyaWJ1dGUiLCJ0YWJJbmRleCIsIm9wZW5BdHRyIiwiZ2V0QXR0cmlidXRlIiwic3R5bGUiLCJkaXNwbGF5IiwiX19kZXRhaWxzIiwidHdpc3R5IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsIl9fdHdpc3R5IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInN1bW1hcnkiLCJzdGF0ZWNoYW5nZSIsImV4cGFuZGVkIiwiaGlkZGVuIiwicmVtb3ZlQXR0cmlidXRlIiwibm9kZVZhbHVlIiwiZGVzdHJveSIsImluaXQiLCJOU0EiLCJmaWx0ZXJCb3hlcyIsInNvcnRUYWJsZSIsInRhYmxlIiwicm93cyIsInN3aXRjaGluZyIsIngiLCJ5Iiwic2hvdWxkU3dpdGNoIiwiZGlyZWN0aW9uIiwic3dpdGNoY291bnQiLCJmaW5kIiwiaW5uZXJIVE1MIiwiZmlsdGVycyIsImNoZWNrQ291bnRUZXh0IiwiY2hlY2tib3hlcyIsImZpbHRlciIsImVhY2giLCJfIiwiZWxlbWVudCIsImZpbHRlckJveCIsImhlYWRlciIsInRpdGxlIiwiYnV0dG9uIiwiYWRkQ2xhc3MiLCJjaGVja0NvdW50IiwidGV4dCIsIm9uIiwiY3VycmVudFRhcmdldCIsIm9wdGlvbnMiLCJuZXh0IiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImF0dHIiLCJoaWRlIiwiYXBwZW5kIiwicmVwbGFjZVdpdGgiLCJtb2RhbCIsImVsZW1zIiwibGlua3MiLCJtb2RhbHMiLCJ0aGlzIiwibW9kYWxCZyIsInNldFVwRXZlbnRzIiwidGhhdCIsImJnIiwiaGlkZU1vZGFscyIsInNob3dNb2RhbCIsImpRdWVyeSIsIlNob3dIaWRlQ29udGVudCIsInNlbGYiLCJzZWxlY3RvcnMiLCJpbml0VG9nZ2xlZENvbnRlbnQiLCIkY29udHJvbCIsIiRjb250ZW50IiwiZ2V0VG9nZ2xlZENvbnRlbnQiLCJjbG9zZXN0IiwiZGF0YSIsInNob3dUb2dnbGVkQ29udGVudCIsImhpZGVUb2dnbGVkQ29udGVudCIsImhhbmRsZVJhZGlvQ29udGVudCIsInNlbGVjdG9yIiwicmVwbGFjZSIsIiRmb3JtIiwiaXMiLCJoYW5kbGVDaGVja2JveENvbnRlbnQiLCJoYW5kbGVMaW5rQ29udGVudCIsIiRldmVudCIsIiRjb250YWluZXIiLCJlbGVtZW50U2VsZWN0b3IiLCJldmVudFNlbGVjdG9ycyIsImhhbmRsZXIiLCJkZWZlcnJlZCIsImV2ZW50IiwiJGNvbnRyb2xzIiwiaWR4IiwiZXZlbnRTZWxlY3RvciIsInNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCIsInJhZGlvR3JvdXBzIiwibWFwIiwiZ3JvdXBOYW1lIiwiaW5BcnJheSIsInB1c2giLCJzaG93SGlkZUNoZWNrYm94VG9nZ2xlZENvbnRlbnQiLCJzaG93SGlkZUxpbmtUb2dnbGVkQ29udGVudCIsIm9mZiIsInByb3RvdHlwZSIsImhlYWRpbmdDZWxscyIsImluZGV4IiwidG9nZ2xlVGlwcyIsIiR0aGF0IiwibGl2ZVJlZ2lvbiIsInRvZ2dsZVRpcCIsImh0bWwiLCJtZXNzYWdlIiwic2V0VGltZW91dCIsImJlZm9yZSIsImZvcm1zIiwic2VsZWN0Mk1vZGVsTWF0Y2hlciIsInBhcmFtcyIsInBhcmVudFRleHQiLCJ0ZXJtIiwidHJpbSIsImNoaWxkcmVuIiwiZXh0ZW5kIiwiYyIsImNoaWxkIiwic3BsaWNlIiwib3JpZ2luYWwiLCJ0b1VwcGVyQ2FzZSIsImluZGV4T2YiLCJzaG93UGFzc3dvcmQiLCIkcHdkRmxkIiwiJGNoZWNrTGJsIiwicHJvcCIsImZvciIsIiRjaGVja0JveCIsInBhcmVudCIsIiRjYldyYXAiLCJhZnRlciIsImJhY2tMaW5rIiwiaHJlZiIsImNsYXNzIiwiaGlzdG9yeSIsImJhY2siLCJzZWxlY3QyIiwibWF0Y2hlciIsImFsZXJ0IiwiaW5mbyIsInRvZ2dsZSIsIm1ldGEiLCJzZWFyY2hGaWVsZHMiLCJsb2FkZXIiLCJiMSIsImIyIiwiZm9ybSIsInJlZGlyZWN0IiwiYXBwZW5kVG8iLCJsb2dvdXQiLCJzZWNyZXQiLCJuaWNld2FyZSIsImdlbmVyYXRlUGFzc3BocmFzZSIsImpvaW4iLCJjb25maXJtIiwiZm9ybVJlZ2lzdGVyIiwiJHN1Ym1pdEJ1dHRvbnMiLCIkc3VibWl0QnV0dG9uIiwiZXEiLCJjc3MiLCJvdXRlcldpZHRoIiwic2hvd0hpZGVDb250ZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxhQUFBLENBQ0FDLGdCQUFBLDBCQUNBQyxPQUFBLGlCQUNBQyxHQUFBLE1BQ0FDLE9BQUEsT0FDQUMsT0FBQSxPQUNBQyxzQkFBQSx5QkFHQUMscUJBQUEsQ0FDQUMsUUFBQSxJQUNBQyxRQUFBLEVBQ0FDLE9BQUEscUJBR0FDLFlBQUEsQ0FDQUMsT0FBQSxTQUFBQyxHQUNBLEdBQUFDLE9BQUFDLFFBSUEsT0FBQUQsT0FBQUMsUUFBQUMsSUFBQUgsRUFDQSxFQUNBRyxJQUFBLFNBQUFILEdBQ0EsR0FBQUMsT0FBQUMsUUFBQSxDQUlBLElBQUFFLEVBQUFILE9BQUFDLFFBQUFDLElBQUFILEdBQ0EsT0FBQUksRUFDQUMsS0FBQUMsTUFBQUYsR0FFQUEsQ0FOQSxDQU9BLEVBQ0FHLElBQUEsU0FBQVAsRUFBQUksR0FDQSxHQUFBSCxPQUFBQyxRQUlBLE9BQUFELE9BQUFDLFFBQUFLLElBQUFQLEVBQUFJLEVBQUFWLHFCQUNBLEVBQ0FjLE9BQUEsU0FBQVIsR0FDQSxHQUFBQyxPQUFBQyxRQUlBLE9BQUFELE9BQUFDLFFBQUFNLE9BQUFSLEVBQUFOLHFCQUNBLEdBaUJBLFNBQUFlLCtCQUNBLElBQUFDLEVBQUFaLFlBQUFDLE9BQUFaLGFB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QyxLQUFBLEtBT0EsT0FOQXBPLE9BQUFxTyxRQUNBLHdEQUdBeE4sRUFBQSxtQkFBQTBHLEtBQUEsUUFBQTBHLElBRUEsQ0FDQSxJQUVBLElBQUFLLGFBQUF6TixFQUFBLG1DQUVBeU4sYUFBQTdLLE9BQUEsR0FDQTZLLGFBQUEvSCxNQUFBLFdBQ0EsSUFBQWdJLEVBQUExTixFQUFBeU4sY0FBQXJJLEtBQUEsaUJBQ0F1SSxFQUFBRCxFQUFBRSxHQUFBLEdBQ0FILGFBQUFySCxHQUFBLHFCQUNBc0gsRUFBQWhILEtBQUEsdUJBRUFpSCxFQUFBRSxJQUFBLFlBQUFGLEVBQUFHLGFBQUEsTUFFQUgsRUFBQS9HLE9BQ0EsNElBRUEsR0FDQSxJQUdBLElBQUFtSCxnQkFBQSxJQUFBek4sTUFBQW9ILGdCQUNBcUcsZ0JBQUF2SixPQUVBbEUsTUFBQUMsUUFBQWlFIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ09PS0lFX05BTUVTID0ge1xuICBQUkVGRVJFTkNFU19TRVQ6IFwiY29va2llc19wcmVmZXJlbmNlc19zZXRcIixcbiAgUE9MSUNZOiBcImNvb2tpZXNfcG9saWN5XCIsXG4gIEdBOiBcIl9nYVwiLFxuICBHQV9HSUQ6IFwiX2dpZFwiLFxuICBHQV9HQVQ6IFwiX2dhdFwiLFxuICBVU0VSX0JBTk5FUl9MQVNUX1NFRU46IFwidXNlcl9iYW5uZXJfbGFzdF9zZWVuXCIsXG59O1xuXG52YXIgR09WVUtfQ09PS0lFX09QVElPTlMgPSB7XG4gIGV4cGlyZXM6IDM2NSwgLy8gZGF5c1xuICBzZWN1cmU6IHRydWUsXG4gIGRvbWFpbjogXCIuZWR1Y2F0aW9uLmdvdi51a1wiLFxufTtcblxudmFyIEdvdlVLQ29va2llID0ge1xuICBnZXRSYXc6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5kb3cuQ29va2llcy5nZXQobmFtZSk7XG4gIH0sXG4gIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAoIXdpbmRvdy5Db29raWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gd2luZG93LkNvb2tpZXMuZ2V0KG5hbWUpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5kb3cuQ29va2llcy5zZXQobmFtZSwgdmFsdWUsIEdPVlVLX0NPT0tJRV9PUFRJT05TKTtcbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMucmVtb3ZlKG5hbWUsIEdPVlVLX0NPT0tJRV9PUFRJT05TKTtcbiAgfSxcbn07XG5cbi8vIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgYW55IGV4aXN0aW5nIHRyYWNraW5nIGNvb2tpZXMgb24gcGFnZSBsb2FkXG4oZnVuY3Rpb24gKCkge1xuICBHb3ZVS0Nvb2tpZS5yZW1vdmUoQ09PS0lFX05BTUVTLlBPTElDWSk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuUFJFRkVSRU5DRVNfU0VUKTtcbiAgR292VUtDb29raWUucmVtb3ZlKENPT0tJRV9OQU1FUy5HQSk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuR0FfR0FUKTtcbiAgR292VUtDb29raWUucmVtb3ZlKENPT0tJRV9OQU1FUy5HQV9HSUQpO1xufSkoKTtcblxuLyoqXG4gKiBTZWN0aW9uIHRvIGhhbmRsZSByZXZpZXcgdXNlcnMgYmFubmVyXG4gKiBJdCB1c2VzIGEgZGVkaWNhdGVkIGNvb2tpZSAndXNlcl9iYW5uZXJfbGFzdF9zZWVuJ1xuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29uZGl0aW9uRm9yVXNlcnNCYW5uZXIoKSB7XG4gIHZhciBsYXN0U2VlbiA9IEdvdlVLQ29va2llLmdldFJhdyhDT09LSUVfTkFNRVMuVVNFUl9CQU5ORVJfTEFTVF9TRUVOKTtcbiAgaWYgKGxhc3RTZWVuKSB7XG4gICAgdmFyIG51bWJlck9mRGF5cyA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RTZWVuKSAvICgxMDAwICogMzYwMCAqIDI0KTtcbiAgICBpZiAobnVtYmVyT2ZEYXlzID4gOTApIHtcbiAgICAgIC8vIGlmIHRoZSBwZXJpb2QgaXMgbG9uZ2VyIHRoYW4gOTAgZGF5cyBzaG93L3VwZGF0ZSB0aGUgYmFubmVyXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gaWYgdGhlcmUgaXMgbm8gdmFsdWUgdGhlbiBzaG93L3VwZGF0ZSB0aGUgYmFubmVyXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzaG93UmV2aWV3VXNlcnNCYW5uZXIoKSB7XG4gICQoXCIjcmV2aWV3LXVzZXJzLWJhbm5lclwiKS5zaG93KCk7XG59XG5cbmZ1bmN0aW9uIHNldFJldmlld1VzZXJzQmFubmVyTGFzdFNlZW4oKSB7XG4gIEdvdlVLQ29va2llLnNldChDT09LSUVfTkFNRVMuVVNFUl9CQU5ORVJfTEFTVF9TRUVOLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG59XG5cbi8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAqL1xuZnVuY3Rpb24gbG9hZFJldmlld1VzZXJzQmFubmVyKCkge1xuICBpZiAoY2hlY2tDb25kaXRpb25Gb3JVc2Vyc0Jhbm5lcigpKSB7XG4gICAgc2hvd1Jldmlld1VzZXJzQmFubmVyKCk7XG4gIH1cbn1cblxuLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzICovXG5mdW5jdGlvbiB1cGRhdGVDb29raWVSZXZpZXdVc2Vyc0Jhbm5lcigpIHtcbiAgaWYgKGNoZWNrQ29uZGl0aW9uRm9yVXNlcnNCYW5uZXIoKSkge1xuICAgIHNldFJldmlld1VzZXJzQmFubmVyTGFzdFNlZW4oKTtcbiAgfVxufVxuIiwiLy8gPGRldGFpbHM+IHBvbHlmaWxsXG4vLyBodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9ZGV0YWlsc1xuXG4vLyBGRiBTdXBwb3J0IGZvciBIVE1MNSdzIDxkZXRhaWxzPiBhbmQgPHN1bW1hcnk+XG4vLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01OTE3MzdcblxuLy8gaHR0cDovL3d3dy5zaXRlcG9pbnQuY29tL2ZpeGluZy10aGUtZGV0YWlscy1lbGVtZW50L1xuXG4oZnVuY3Rpb24gKGdsb2JhbCkge1xuICB2YXIgR09WVUsgPSBnbG9iYWwuR09WVUsgfHwge307XG5cbiAgR09WVUsuZGV0YWlscyA9IHtcbiAgICBOQVRJVkVfREVUQUlMUzogdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkZXRhaWxzXCIpLm9wZW4gPT09IFwiYm9vbGVhblwiLFxuICAgIEtFWV9FTlRFUjogMTMsXG4gICAgS0VZX1NQQUNFOiAzMixcblxuICAgIC8vIENyZWF0ZSBhIHN0YXJ0ZWQgZmxhZyBzbyB3ZSBjYW4gcHJldmVudCB0aGUgaW5pdGlhbGlzYXRpb25cbiAgICAvLyBmdW5jdGlvbiBmaXJpbmcgZnJvbSBib3RoIERPTUNvbnRlbnRMb2FkZWQgYW5kIHdpbmRvdy5vbmxvYWRcbiAgICBzdGFydGVkOiBmYWxzZSxcblxuICAgIC8vIEFkZCBldmVudCBjb25zdHJ1Y3QgZm9yIG1vZGVybiBicm93c2VycyBvciBJRVxuICAgIC8vIHdoaWNoIGZpcmVzIHRoZSBjYWxsYmFjayB3aXRoIGEgcHJlLWNvbnZlcnRlZCB0YXJnZXQgcmVmZXJlbmNlXG4gICAgYWRkRXZlbnQ6IGZ1bmN0aW9uIChub2RlLCB0eXBlLCBjYWxsYmFjaykge1xuICAgICAgaWYgKG5vZGUuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY2FsbGJhY2soZSwgZS50YXJnZXQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgbm9kZS5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGNhbGxiYWNrKGUsIGUuc3JjRWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmVFdmVudDogZnVuY3Rpb24gKG5vZGUsIHR5cGUpIHtcbiAgICAgIGlmIChub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzICovXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHt9LFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChub2RlLmRldGFjaEV2ZW50KSB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAqL1xuICAgICAgICBub2RlLmRldGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGZ1bmN0aW9uIChlKSB7fSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgY2hhcmFjdGVyIGNvZGUgLyBrZXkgcHJlc3NlZFxuICAgIGNoYXJDb2RlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBlLndoaWNoID09PSBcIm51bWJlclwiID8gZS53aGljaCA6IGUua2V5Q29kZTtcbiAgICB9LFxuXG4gICAgLy8gQ3Jvc3MtYnJvd3NlciBwcmV2ZW50aW5nIGRlZmF1bHQgYWN0aW9uXG4gICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIEhhbmRsZSBjcm9zcy1tb2RhbCBjbGljayBldmVudHNcbiAgICBhZGRDbGlja0V2ZW50OiBmdW5jdGlvbiAobm9kZSwgY2FsbGJhY2spIHtcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkRXZlbnQobm9kZSwgXCJrZXlwcmVzc1wiLCBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIC8vIFdoZW4gdGhlIGtleSBnZXRzIHByZXNzZWQgLSBjaGVjayBpZiBpdCBpcyBlbnRlciBvciBzcGFjZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgR09WVUsuZGV0YWlscy5jaGFyQ29kZShlKSA9PT0gR09WVUsuZGV0YWlscy5LRVlfRU5URVIgfHxcbiAgICAgICAgICBHT1ZVSy5kZXRhaWxzLmNoYXJDb2RlKGUpID09PSBHT1ZVSy5kZXRhaWxzLktFWV9TUEFDRVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic3VtbWFyeVwiKSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IHNwYWNlIGZyb20gc2Nyb2xsaW5nIHRoZSBwYWdlXG4gICAgICAgICAgICAvLyBhbmQgZW50ZXIgZnJvbSBzdWJtaXR0aW5nIGEgZm9ybVxuICAgICAgICAgICAgR09WVUsuZGV0YWlscy5wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgICAgIC8vIENsaWNrIHRvIGxldCB0aGUgY2xpY2sgZXZlbnQgZG8gYWxsIHRoZSBuZWNlc3NhcnkgYWN0aW9uXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsaWNrKSB7XG4gICAgICAgICAgICAgIHRhcmdldC5jbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gZXhjZXB0IFNhZmFyaSA1LjEgYW5kIHVuZGVyIGRvbid0IHN1cHBvcnQgLmNsaWNrKCkgaGVyZVxuICAgICAgICAgICAgICBjYWxsYmFjayhlLCB0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFByZXZlbnQga2V5dXAgdG8gcHJldmVudCBjbGlja2luZyB0d2ljZSBpbiBGaXJlZm94IHdoZW4gdXNpbmcgc3BhY2Uga2V5XG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KG5vZGUsIFwia2V5dXBcIiwgZnVuY3Rpb24gKGUsIHRhcmdldCkge1xuICAgICAgICBpZiAoR09WVUsuZGV0YWlscy5jaGFyQ29kZShlKSA9PT0gR09WVUsuZGV0YWlscy5LRVlfU1BBQ0UpIHtcbiAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSBcIlNVTU1BUllcIikge1xuICAgICAgICAgICAgR09WVUsuZGV0YWlscy5wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KG5vZGUsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUsIHRhcmdldCkge1xuICAgICAgICBjYWxsYmFjayhlLCB0YXJnZXQpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbmVhcmVzdCBhbmNlc3RvciBlbGVtZW50IG9mIGEgbm9kZSB0aGF0IG1hdGNoZXMgYSBnaXZlbiB0YWcgbmFtZVxuICAgIGdldEFuY2VzdG9yOiBmdW5jdGlvbiAobm9kZSwgbWF0Y2gpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbWF0Y2gpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgfSB3aGlsZSAobm9kZSk7XG5cbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0sXG5cbiAgICAvLyBJbml0aWFsaXNhdGlvbiBmdW5jdGlvblxuICAgIGFkZERldGFpbHNQb2x5ZmlsbDogZnVuY3Rpb24gKGxpc3QsIGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyID0gY29udGFpbmVyIHx8IGRvY3VtZW50LmJvZHk7XG4gICAgICAvLyBJZiB0aGlzIGhhcyBhbHJlYWR5IGhhcHBlbmVkLCBqdXN0IHJldHVyblxuICAgICAgLy8gZWxzZSBzZXQgdGhlIGZsYWcgc28gaXQgZG9lc24ndCBoYXBwZW4gYWdhaW5cbiAgICAgIGlmIChHT1ZVSy5kZXRhaWxzLnN0YXJ0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgR09WVUsuZGV0YWlscy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgIC8vIEdldCB0aGUgY29sbGVjdGlvbiBvZiBkZXRhaWxzIGVsZW1lbnRzLCBidXQgaWYgdGhhdCdzIGVtcHR5XG4gICAgICAvLyB0aGVuIHdlIGRvbid0IG5lZWQgdG8gYm90aGVyIHdpdGggdGhlIHJlc3Qgb2YgdGhlIHNjcmlwdGluZ1xuICAgICAgaWYgKChsaXN0ID0gY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGV0YWlsc1wiKSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGVsc2UgaXRlcmF0ZSB0aHJvdWdoIHRoZW0gdG8gYXBwbHkgdGhlaXIgaW5pdGlhbCBzdGF0ZVxuICAgICAgdmFyIG4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIGZvciAoaTsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgZGV0YWlscyA9IGxpc3RbaV07XG5cbiAgICAgICAgLy8gU2F2ZSBzaG9ydGN1dHMgdG8gdGhlIGlubmVyIHN1bW1hcnkgYW5kIGNvbnRlbnQgZWxlbWVudHNcbiAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkgPSBkZXRhaWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3VtbWFyeVwiKS5pdGVtKDApO1xuICAgICAgICBkZXRhaWxzLl9fY29udGVudCA9IGRldGFpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIikuaXRlbSgwKTtcblxuICAgICAgICBpZiAoIWRldGFpbHMuX19zdW1tYXJ5IHx8ICFkZXRhaWxzLl9fY29udGVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgY29udGVudCBkb2Vzbid0IGhhdmUgYW4gSUQsIGFzc2lnbiBpdCBvbmUgbm93XG4gICAgICAgIC8vIHdoaWNoIHdlJ2xsIG5lZWQgZm9yIHRoZSBzdW1tYXJ5J3MgYXJpYS1jb250cm9scyBhc3NpZ25tZW50XG4gICAgICAgIGlmICghZGV0YWlscy5fX2NvbnRlbnQuaWQpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5pZCA9IFwiZGV0YWlscy1jb250ZW50LVwiICsgaTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBBUklBIHJvbGU9XCJncm91cFwiIHRvIGRldGFpbHNcbiAgICAgICAgZGV0YWlscy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiZ3JvdXBcIik7XG5cbiAgICAgICAgLy8gQWRkIHJvbGU9YnV0dG9uIHRvIHN1bW1hcnlcbiAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImJ1dHRvblwiKTtcblxuICAgICAgICAvLyBBZGQgYXJpYS1jb250cm9sc1xuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbnRyb2xzXCIsIGRldGFpbHMuX19jb250ZW50LmlkKTtcblxuICAgICAgICAvLyBTZXQgdGFiSW5kZXggc28gdGhlIHN1bW1hcnkgaXMga2V5Ym9hcmQgYWNjZXNzaWJsZSBmb3Igbm9uLW5hdGl2ZSBlbGVtZW50c1xuICAgICAgICAvLyBodHRwOi8vd3d3LnNhbGllbmNlcy5jb20vYnJvd3NlckJ1Z3MvdGFiSW5kZXguaHRtbFxuICAgICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS50YWJJbmRleCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXRlY3QgaW5pdGlhbCBvcGVuIHN0YXRlXG4gICAgICAgIHZhciBvcGVuQXR0ciA9IGRldGFpbHMuZ2V0QXR0cmlidXRlKFwib3BlblwiKSAhPT0gbnVsbDtcbiAgICAgICAgaWYgKG9wZW5BdHRyID09PSB0cnVlKSB7XG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcInRydWVcIik7XG4gICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhIGNpcmN1bGFyIHJlZmVyZW5jZSBmcm9tIHRoZSBzdW1tYXJ5IGJhY2sgdG8gaXRzXG4gICAgICAgIC8vIHBhcmVudCBkZXRhaWxzIGVsZW1lbnQsIGZvciBjb252ZW5pZW5jZSBpbiB0aGUgY2xpY2sgaGFuZGxlclxuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5fX2RldGFpbHMgPSBkZXRhaWxzO1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgbm90IGEgbmF0aXZlIGltcGxlbWVudGF0aW9uLCBjcmVhdGUgYW4gYXJyb3dcbiAgICAgICAgLy8gaW5zaWRlIHRoZSBzdW1tYXJ5XG4gICAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICAgIHZhciB0d2lzdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcblxuICAgICAgICAgIGlmIChvcGVuQXR0ciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdHdpc3R5LmNsYXNzTmFtZSA9IFwiYXJyb3cgYXJyb3ctb3BlblwiO1xuICAgICAgICAgICAgdHdpc3R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXFx1MjViY1wiKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR3aXN0eS5jbGFzc05hbWUgPSBcImFycm93IGFycm93LWNsb3NlZFwiO1xuICAgICAgICAgICAgdHdpc3R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXFx1MjViYVwiKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuX190d2lzdHkgPSBkZXRhaWxzLl9fc3VtbWFyeS5pbnNlcnRCZWZvcmUoXG4gICAgICAgICAgICB0d2lzdHksXG4gICAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5maXJzdENoaWxkLFxuICAgICAgICAgICk7XG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuX190d2lzdHkuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEJpbmQgYSBjbGljayBldmVudCB0byBoYW5kbGUgc3VtbWFyeSBlbGVtZW50c1xuICAgICAgR09WVUsuZGV0YWlscy5hZGRDbGlja0V2ZW50KGNvbnRhaW5lciwgZnVuY3Rpb24gKGUsIHN1bW1hcnkpIHtcbiAgICAgICAgaWYgKCEoc3VtbWFyeSA9IEdPVlVLLmRldGFpbHMuZ2V0QW5jZXN0b3Ioc3VtbWFyeSwgXCJzdW1tYXJ5XCIpKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHT1ZVSy5kZXRhaWxzLnN0YXRlY2hhbmdlKHN1bW1hcnkpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIERlZmluZSBhIHN0YXRlY2hhbmdlIGZ1bmN0aW9uIHRoYXQgdXBkYXRlcyBhcmlhLWV4cGFuZGVkIGFuZCBzdHlsZS5kaXNwbGF5XG4gICAgLy8gQWxzbyB1cGRhdGUgdGhlIGFycm93IHBvc2l0aW9uXG4gICAgc3RhdGVjaGFuZ2U6IGZ1bmN0aW9uIChzdW1tYXJ5KSB7XG4gICAgICB2YXIgZXhwYW5kZWQgPVxuICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5fX3N1bW1hcnkuZ2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiKSA9PT0gXCJ0cnVlXCI7XG4gICAgICB2YXIgaGlkZGVuID1cbiAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LmdldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpID09PSBcInRydWVcIjtcblxuICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZShcbiAgICAgICAgXCJhcmlhLWV4cGFuZGVkXCIsXG4gICAgICAgIGV4cGFuZGVkID8gXCJmYWxzZVwiIDogXCJ0cnVlXCIsXG4gICAgICApO1xuICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LnNldEF0dHJpYnV0ZShcbiAgICAgICAgXCJhcmlhLWhpZGRlblwiLFxuICAgICAgICBoaWRkZW4gPyBcImZhbHNlXCIgOiBcInRydWVcIixcbiAgICAgICk7XG5cbiAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5fX2NvbnRlbnQuc3R5bGUuZGlzcGxheSA9IGV4cGFuZGVkID8gXCJub25lXCIgOiBcIlwiO1xuXG4gICAgICAgIHZhciBoYXNPcGVuQXR0ciA9IHN1bW1hcnkuX19kZXRhaWxzLmdldEF0dHJpYnV0ZShcIm9wZW5cIikgIT09IG51bGw7XG4gICAgICAgIGlmICghaGFzT3BlbkF0dHIpIHtcbiAgICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5zZXRBdHRyaWJ1dGUoXCJvcGVuXCIsIFwib3BlblwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5yZW1vdmVBdHRyaWJ1dGUoXCJvcGVuXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzdW1tYXJ5Ll9fdHdpc3R5KSB7XG4gICAgICAgIHN1bW1hcnkuX190d2lzdHkuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBleHBhbmRlZCA/IFwiXFx1MjViYVwiIDogXCJcXHUyNWJjXCI7XG4gICAgICAgIHN1bW1hcnkuX190d2lzdHkuc2V0QXR0cmlidXRlKFxuICAgICAgICAgIFwiY2xhc3NcIixcbiAgICAgICAgICBleHBhbmRlZCA/IFwiYXJyb3cgYXJyb3ctY2xvc2VkXCIgOiBcImFycm93IGFycm93LW9wZW5cIixcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBHT1ZVSy5kZXRhaWxzLnJlbW92ZUV2ZW50KG5vZGUsIFwiY2xpY2tcIik7XG4gICAgfSxcblxuICAgIC8vIEJpbmQgdHdvIGxvYWQgZXZlbnRzIGZvciBtb2Rlcm4gYW5kIG9sZGVyIGJyb3dzZXJzXG4gICAgLy8gSWYgdGhlIGZpcnN0IG9uZSBmaXJlcyBpdCB3aWxsIHNldCBhIGZsYWcgdG8gYmxvY2sgdGhlIHNlY29uZCBvbmVcbiAgICAvLyBidXQgaWYgaXQncyBub3Qgc3VwcG9ydGVkIHRoZW4gdGhlIHNlY29uZCBvbmUgd2lsbCBmaXJlXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChcbiAgICAgICAgZG9jdW1lbnQsXG4gICAgICAgIFwiRE9NQ29udGVudExvYWRlZFwiLFxuICAgICAgICBHT1ZVSy5kZXRhaWxzLmFkZERldGFpbHNQb2x5ZmlsbCxcbiAgICAgICk7XG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KHdpbmRvdywgXCJsb2FkXCIsIEdPVlVLLmRldGFpbHMuYWRkRGV0YWlsc1BvbHlmaWxsKTtcbiAgICB9LFxuICB9O1xuICBnbG9iYWwuR09WVUsgPSBHT1ZVSztcbn0pKHdpbmRvdyk7XG4iLCJ2YXIgTlNBID0gTlNBIHx8IHt9O1xuY29uc3QgZmlsdGVyQm94ZXMgPSAkKFwiLmZpbHRlci1ib3hcIik7XG5cbk5TQS5maWx0ZXJzID0ge1xuICBpbml0KCkge1xuICAgIGZ1bmN0aW9uIGNoZWNrQ291bnRUZXh0KGNoZWNrYm94ZXMpIHtcbiAgICAgIHJldHVybiBjaGVja2JveGVzLmZpbHRlcihcIjpjaGVja2VkXCIpLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgJHtjaGVja2JveGVzLmZpbHRlcihcIjpjaGVja2VkXCIpLmxlbmd0aH0gc2VsZWN0ZWRgXG4gICAgICAgIDogXCJcIjtcbiAgICB9XG5cbiAgICBmaWx0ZXJCb3hlcy5lYWNoKChfLCBlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJCb3ggPSAkKGVsZW1lbnQpO1xuICAgICAgY29uc3QgaGVhZGVyID0gZmlsdGVyQm94LmZpbmQoXCIuY29udGFpbmVyLWhlYWRcIik7XG4gICAgICBjb25zdCB0aXRsZSA9IGhlYWRlci5maW5kKFwiLm9wdGlvbi1zZWxlY3QtbGFiZWxcIik7XG4gICAgICBjb25zdCBjaGVja2JveGVzID0gZmlsdGVyQm94LmZpbmQoXCJpbnB1dDpjaGVja2JveFwiKTtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9ICQoXCI8YnV0dG9uIC8+XCIpLmFkZENsYXNzKFwianMtY29udGFpbmVyLWhlYWRcIik7XG4gICAgICBjb25zdCBjaGVja0NvdW50ID0gJChcIjxkaXYgLz5cIilcbiAgICAgICAgLmFkZENsYXNzKFwianMtc2VsZWN0ZWQtY291bnRlclwiKVxuICAgICAgICAudGV4dCgoKSA9PiBjaGVja0NvdW50VGV4dChjaGVja2JveGVzKSk7XG5cbiAgICAgIGJ1dHRvblxuICAgICAgICAub24oXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGFyZ2V0Lm5leHQoKTtcbiAgICAgICAgICBpZiAodGFyZ2V0Lmhhc0NsYXNzKFwiY2xvc2VkXCIpKSB7XG4gICAgICAgICAgICBvcHRpb25zLnNob3coKTtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVDbGFzcyhcImNsb3NlZFwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy5oaWRlKCk7XG4gICAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoXCJjbG9zZWRcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5hcHBlbmQodGl0bGUsIGNoZWNrQ291bnQpO1xuXG4gICAgICBoZWFkZXIucmVwbGFjZVdpdGgoYnV0dG9uKTtcblxuICAgICAgY2hlY2tib3hlcy5vbihcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgIGNoZWNrQ291bnQudGV4dCgoKSA9PiBjaGVja0NvdW50VGV4dChjaGVja2JveGVzKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbn07XG5cbmlmIChmaWx0ZXJCb3hlcy5sZW5ndGggPiAwKSB7XG4gIE5TQS5maWx0ZXJzLmluaXQoKTtcbn1cbiIsImZ1bmN0aW9uIHNvcnRUYWJsZShuKSB7XG4gIHZhciB0YWJsZSxcbiAgICByb3dzLFxuICAgIHN3aXRjaGluZyxcbiAgICBpLFxuICAgIHgsXG4gICAgeSxcbiAgICBzaG91bGRTd2l0Y2gsXG4gICAgZGlyZWN0aW9uLFxuICAgIHN3aXRjaGNvdW50ID0gMDtcbiAgdGFibGUgPSAkKFwidGFibGUuc29ydGFibGVcIik7XG4gIHN3aXRjaGluZyA9IHRydWU7XG4gIGRpcmVjdGlvbiA9IFwiYVwiO1xuXG4gIHdoaWxlIChzd2l0Y2hpbmcpIHtcbiAgICBzd2l0Y2hpbmcgPSBmYWxzZTtcbiAgICByb3dzID0gdGFibGUuZmluZChcInRyXCIpO1xuXG4gICAgZm9yIChpID0gMTsgaSA8IHJvd3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBzaG91bGRTd2l0Y2ggPSBmYWxzZTtcblxuICAgICAgeCA9IHJvd3NbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJURFwiKVtuXTtcbiAgICAgIHkgPSByb3dzW2kgKyAxXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIlREXCIpW25dO1xuXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcImFcIikge1xuICAgICAgICBpZiAoeC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA+IHkuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICBzaG91bGRTd2l0Y2ggPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gXCJkXCIpIHtcbiAgICAgICAgaWYgKHguaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkgPCB5LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzaG91bGRTd2l0Y2gpIHtcbiAgICAgIHJvd3NbaV0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocm93c1tpICsgMV0sIHJvd3NbaV0pO1xuICAgICAgc3dpdGNoaW5nID0gdHJ1ZTtcblxuICAgICAgc3dpdGNoY291bnQrKztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN3aXRjaGNvdW50ID09PSAwICYmIGRpcmVjdGlvbiA9PT0gXCJhXCIpIHtcbiAgICAgICAgZGlyZWN0aW9uID0gXCJkXCI7XG4gICAgICAgIHN3aXRjaGluZyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBkaXJlY3Rpb247XG59XG5cbiQoZnVuY3Rpb24gKCkge1xuICAkKFwidGFibGUuc29ydGFibGUgdGhlYWQgdGhcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhlYWRpbmdDZWxscyA9ICQoXCJ0YWJsZS5zb3J0YWJsZSB0aGVhZCB0ciB0aFwiKTtcblxuICAgIGhlYWRpbmdDZWxsc1xuICAgICAgLnJlbW92ZUNsYXNzKFwic29ydGVkXCIpXG4gICAgICAucmVtb3ZlQ2xhc3MoXCJkaXItYVwiKVxuICAgICAgLnJlbW92ZUNsYXNzKFwiZGlyLWRcIik7XG5cbiAgICB2YXIgaW5kZXggPSBoZWFkaW5nQ2VsbHMuaW5kZXgoJCh0aGlzKSk7XG5cbiAgICB2YXIgZGlyZWN0aW9uID0gc29ydFRhYmxlKGluZGV4KTtcblxuICAgICQodGhpcykuYWRkQ2xhc3MoXCJzb3J0ZWQgZGlyLVwiICsgZGlyZWN0aW9uKTtcbiAgfSk7XG59KTtcbiIsInZhciBOU0EgPSBOU0EgfHwge307XG5cbk5TQS5tb2RhbCA9IHtcbiAgZWxlbXM6IHtcbiAgICBsaW5rczogJChcIi5tb2RhbC1saW5rXCIpLFxuICAgIG1vZGFsczogJChcIi5tb2RhbFwiKSxcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubW9kYWxCZygpO1xuICAgIHRoaXMuc2V0VXBFdmVudHMoKTtcbiAgfSxcbiAgbW9kYWxCZzogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgYmcgPSAkKFwiPGRpdj5cIilcbiAgICAgIC5hZGRDbGFzcyhcIm1vZGFsLWJnXCIpXG4gICAgICAuaGlkZSgpXG4gICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoYXQuaGlkZU1vZGFscygpO1xuICAgICAgfSk7XG4gICAgJChcImJvZHlcIikuYXBwZW5kKGJnKTtcbiAgfSxcbiAgc2V0VXBFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5lbGVtcy5saW5rcy5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICAgIHRoYXQuc2hvd01vZGFsKCQodGFyZ2V0KSk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGF0LmVsZW1zLm1vZGFscy5maW5kKFwiLmNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoYXQuaGlkZU1vZGFscygpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJChcImJvZHlcIikub24oXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoKGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PT0gMjcpIHRoYXQuaGlkZU1vZGFscygpO1xuICAgIH0pO1xuICB9LFxuICBzaG93TW9kYWw6IGZ1bmN0aW9uIChtb2RhbCkge1xuICAgICQoXCJodG1sXCIpLmFkZENsYXNzKFwibW9kYWwtb3BlblwiKTtcbiAgICAkKFwiLm1vZGFsLWJnXCIpLnNob3coKTtcbiAgICBtb2RhbC5zaG93KCk7XG4gIH0sXG4gIGhpZGVNb2RhbHM6IGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiaHRtbFwiKS5yZW1vdmVDbGFzcyhcIm1vZGFsLW9wZW5cIik7XG4gICAgJChcIi5tb2RhbC1iZ1wiKS5oaWRlKCk7XG4gICAgdGhpcy5lbGVtcy5tb2RhbHMuaGlkZSgpO1xuICB9LFxufTtcblxuTlNBLm1vZGFsLmluaXQoKTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gIHZhciAkID0gZ2xvYmFsLmpRdWVyeTtcbiAgdmFyIEdPVlVLID0gZ2xvYmFsLkdPVlVLIHx8IHt9O1xuXG4gIGZ1bmN0aW9uIFNob3dIaWRlQ29udGVudCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBSYWRpbyBhbmQgQ2hlY2tib3ggc2VsZWN0b3JzXG4gICAgdmFyIHNlbGVjdG9ycyA9IHtcbiAgICAgIG5hbWVzcGFjZTogXCJTaG93SGlkZUNvbnRlbnRcIixcbiAgICAgIHJhZGlvOiAnW2RhdGEtdGFyZ2V0XSA+IGlucHV0W3R5cGU9XCJyYWRpb1wiXScsXG4gICAgICBjaGVja2JveDogJ1tkYXRhLXRhcmdldF0gPiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLFxuICAgICAgbGluazogXCJhLmpzLXRvZ2dsZS1jb250ZW50XCIsXG4gICAgfTtcblxuICAgIC8vIEVzY2FwZSBuYW1lIGF0dHJpYnV0ZSBmb3IgdXNlIGluIERPTSBzZWxlY3RvclxuICAgIGZ1bmN0aW9uIGVzY2FwZUVsZW1lbnROYW1lKHN0cikge1xuICAgICAgdmFyIHJlc3VsdCA9IHN0ci5yZXBsYWNlKFwiW1wiLCBcIlxcXFxbXCIpLnJlcGxhY2UoXCJdXCIsIFwiXFxcXF1cIik7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIEFkZHMgQVJJQSBhdHRyaWJ1dGVzIHRvIGNvbnRyb2wgKyBhc3NvY2lhdGVkIGNvbnRlbnRcbiAgICBmdW5jdGlvbiBpbml0VG9nZ2xlZENvbnRlbnQoKSB7XG4gICAgICB2YXIgJGNvbnRyb2wgPSAkKHRoaXMpO1xuICAgICAgdmFyICRjb250ZW50ID0gZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpO1xuXG4gICAgICAvLyBTZXQgYXJpYS1jb250cm9scyBhbmQgZGVmYXVsdHNcbiAgICAgIGlmICgkY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtY29udHJvbHNcIiwgJGNvbnRlbnQuYXR0cihcImlkXCIpKTtcbiAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgJGNvbnRlbnQuYXR0cihcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdG9nZ2xlZCBjb250ZW50IGZvciBjb250cm9sXG4gICAgZnVuY3Rpb24gZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpIHtcbiAgICAgIHZhciBpZCA9ICRjb250cm9sLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpO1xuXG4gICAgICAvLyBBUklBIGF0dHJpYnV0ZXMgYXJlbid0IHNldCBiZWZvcmUgaW5pdFxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBpZCA9ICRjb250cm9sLmNsb3Nlc3QoXCJbZGF0YS10YXJnZXRdXCIpLmRhdGEoXCJ0YXJnZXRcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgc2hvdy9oaWRlIGNvbnRlbnQgYnkgaWRcbiAgICAgIHJldHVybiAkKFwiI1wiICsgaWQpO1xuICAgIH1cblxuICAgIC8vIFNob3cgdG9nZ2xlZCBjb250ZW50IGZvciBjb250cm9sXG4gICAgZnVuY3Rpb24gc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCkge1xuICAgICAgLy8gU2hvdyBjb250ZW50XG4gICAgICBpZiAoJGNvbnRlbnQuaGFzQ2xhc3MoXCJqcy1oaWRkZW5cIikpIHtcbiAgICAgICAgJGNvbnRlbnQucmVtb3ZlQ2xhc3MoXCJqcy1oaWRkZW5cIik7XG4gICAgICAgICRjb250ZW50LmF0dHIoXCJhcmlhLWhpZGRlblwiLCBcImZhbHNlXCIpO1xuXG4gICAgICAgIC8vIElmIHRoZSBjb250cm9sbGluZyBpbnB1dCwgdXBkYXRlIGFyaWEtZXhwYW5kZWRcbiAgICAgICAgaWYgKCRjb250cm9sLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpKSB7XG4gICAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGlkZSB0b2dnbGVkIGNvbnRlbnQgZm9yIGNvbnRyb2xcbiAgICBmdW5jdGlvbiBoaWRlVG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAkY29udGVudCA9ICRjb250ZW50IHx8IGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKTtcblxuICAgICAgLy8gSGlkZSBjb250ZW50XG4gICAgICBpZiAoISRjb250ZW50Lmhhc0NsYXNzKFwianMtaGlkZGVuXCIpKSB7XG4gICAgICAgICRjb250ZW50LmFkZENsYXNzKFwianMtaGlkZGVuXCIpO1xuICAgICAgICAkY29udGVudC5hdHRyKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuXG4gICAgICAgIC8vIElmIHRoZSBjb250cm9sbGluZyBpbnB1dCwgdXBkYXRlIGFyaWEtZXhwYW5kZWRcbiAgICAgICAgaWYgKCRjb250cm9sLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpKSB7XG4gICAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSByYWRpbyBzaG93L2hpZGVcbiAgICBmdW5jdGlvbiBoYW5kbGVSYWRpb0NvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAvLyBBbGwgcmFkaW9zIGluIHRoaXMgZ3JvdXAgd2hpY2ggY29udHJvbCBjb250ZW50XG4gICAgICB2YXIgc2VsZWN0b3IgPVxuICAgICAgICBzZWxlY3RvcnMucmFkaW8gK1xuICAgICAgICBcIltuYW1lPVwiICtcbiAgICAgICAgZXNjYXBlRWxlbWVudE5hbWUoJGNvbnRyb2wuYXR0cihcIm5hbWVcIikpICtcbiAgICAgICAgXCJdW2FyaWEtY29udHJvbHNdXCI7XG4gICAgICB2YXIgJGZvcm0gPSAkY29udHJvbC5jbG9zZXN0KFwiZm9ybVwiKTtcbiAgICAgIHZhciAkcmFkaW9zID0gJGZvcm0ubGVuZ3RoID8gJGZvcm0uZmluZChzZWxlY3RvcikgOiAkKHNlbGVjdG9yKTtcblxuICAgICAgLy8gSGlkZSBjb250ZW50IGZvciByYWRpb3MgaW4gZ3JvdXBcbiAgICAgICRyYWRpb3MuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhpZGVUb2dnbGVkQ29udGVudCgkKHRoaXMpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWxlY3QgY29udGVudCBmb3IgdGhpcyBjb250cm9sXG4gICAgICBpZiAoJGNvbnRyb2wuaXMoXCJbYXJpYS1jb250cm9sc11cIikpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoZWNrYm94IHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZUNoZWNrYm94Q29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgIC8vIFNob3cgY2hlY2tib3ggY29udGVudFxuICAgICAgaWYgKCRjb250cm9sLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIaWRlIGNoZWNrYm94IGNvbnRlbnRcbiAgICAgICAgaGlkZVRvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoZWNrYm94IHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZUxpbmtDb250ZW50KCRjb250cm9sLCAkY29udGVudCwgJGV2ZW50KSB7XG4gICAgICBpZiAoJGNvbnRlbnQuaGFzQ2xhc3MoXCJqcy1oaWRkZW5cIikpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRlVG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KTtcbiAgICAgIH1cbiAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBldGNcbiAgICBmdW5jdGlvbiBpbml0KCRjb250YWluZXIsIGVsZW1lbnRTZWxlY3RvciwgZXZlbnRTZWxlY3RvcnMsIGhhbmRsZXIpIHtcbiAgICAgICRjb250YWluZXIgPSAkY29udGFpbmVyIHx8ICQoZG9jdW1lbnQuYm9keSk7XG5cbiAgICAgIC8vIEhhbmRsZSBjb250cm9sIGNsaWNrc1xuICAgICAgZnVuY3Rpb24gZGVmZXJyZWQoZXZlbnQpIHtcbiAgICAgICAgdmFyICRjb250cm9sID0gJCh0aGlzKTtcbiAgICAgICAgaGFuZGxlcigkY29udHJvbCwgZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpLCBldmVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgQVJJQSBhdHRyaWJ1dGVzXG4gICAgICB2YXIgJGNvbnRyb2xzID0gJChlbGVtZW50U2VsZWN0b3IpO1xuICAgICAgJGNvbnRyb2xzLmVhY2goaW5pdFRvZ2dsZWRDb250ZW50KTtcblxuICAgICAgLy8gSGFuZGxlIGV2ZW50c1xuICAgICAgJC5lYWNoKGV2ZW50U2VsZWN0b3JzLCBmdW5jdGlvbiAoaWR4LCBldmVudFNlbGVjdG9yKSB7XG4gICAgICAgICRjb250YWluZXIub24oXCJjbGljay5cIiArIHNlbGVjdG9ycy5uYW1lc3BhY2UsIGV2ZW50U2VsZWN0b3IsIGRlZmVycmVkKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBbnkgYWxyZWFkeSA6Y2hlY2tlZCBvbiBpbml0P1xuICAgICAgaWYgKCRjb250cm9scy5pcyhcIjpjaGVja2VkXCIpKSB7XG4gICAgICAgICRjb250cm9scy5maWx0ZXIoXCI6Y2hlY2tlZFwiKS5lYWNoKGRlZmVycmVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZXQgZXZlbnQgc2VsZWN0b3JzIGZvciBhbGwgcmFkaW8gZ3JvdXBzXG4gICAgZnVuY3Rpb24gZ2V0RXZlbnRTZWxlY3RvcnNGb3JSYWRpb0dyb3VwcygpIHtcbiAgICAgIHZhciByYWRpb0dyb3VwcyA9IFtdO1xuXG4gICAgICAvLyBCdWlsZCBhbiBhcnJheSBvZiByYWRpbyBncm91cCBzZWxlY3RvcnNcbiAgICAgIHJldHVybiAkKHNlbGVjdG9ycy5yYWRpbykubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdyb3VwTmFtZSA9ICQodGhpcykuYXR0cihcIm5hbWVcIik7XG5cbiAgICAgICAgaWYgKCQuaW5BcnJheShncm91cE5hbWUsIHJhZGlvR3JvdXBzKSA9PT0gLTEpIHtcbiAgICAgICAgICByYWRpb0dyb3Vwcy5wdXNoKGdyb3VwTmFtZSk7XG4gICAgICAgICAgcmV0dXJuICdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cIicgKyAkKHRoaXMpLmF0dHIoXCJuYW1lXCIpICsgJ1wiXSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgcmFkaW8gc2hvdy9oaWRlIGNvbnRlbnQgZm9yIGNvbnRhaW5lclxuICAgIHNlbGYuc2hvd0hpZGVSYWRpb1RvZ2dsZWRDb250ZW50ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIGluaXQoXG4gICAgICAgICRjb250YWluZXIsXG4gICAgICAgIHNlbGVjdG9ycy5yYWRpbyxcbiAgICAgICAgZ2V0RXZlbnRTZWxlY3RvcnNGb3JSYWRpb0dyb3VwcygpLFxuICAgICAgICBoYW5kbGVSYWRpb0NvbnRlbnQsXG4gICAgICApO1xuICAgIH07XG5cbiAgICAvLyBTZXQgdXAgY2hlY2tib3ggc2hvdy9oaWRlIGNvbnRlbnQgZm9yIGNvbnRhaW5lclxuICAgIHNlbGYuc2hvd0hpZGVDaGVja2JveFRvZ2dsZWRDb250ZW50ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIGluaXQoXG4gICAgICAgICRjb250YWluZXIsXG4gICAgICAgIHNlbGVjdG9ycy5jaGVja2JveCxcbiAgICAgICAgW3NlbGVjdG9ycy5jaGVja2JveF0sXG4gICAgICAgIGhhbmRsZUNoZWNrYm94Q29udGVudCxcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8vIFNldCB1cCBsaW5rcyBzaG93L2hpZGUgY29udGVudCBmb3IgY29udGFpbmVyXG4gICAgc2VsZi5zaG93SGlkZUxpbmtUb2dnbGVkQ29udGVudCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBpbml0KCRjb250YWluZXIsIHNlbGVjdG9ycy5saW5rLCBbc2VsZWN0b3JzLmxpbmtdLCBoYW5kbGVMaW5rQ29udGVudCk7XG4gICAgfTtcblxuICAgIC8vIFJlbW92ZSBldmVudCBoYW5kbGVyc1xuICAgIHNlbGYuZGVzdHJveSA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICAkY29udGFpbmVyID0gJGNvbnRhaW5lciB8fCAkKGRvY3VtZW50LmJvZHkpO1xuICAgICAgJGNvbnRhaW5lci5vZmYoXCIuXCIgKyBzZWxlY3RvcnMubmFtZXNwYWNlKTtcbiAgICB9O1xuICB9XG5cbiAgU2hvd0hpZGVDb250ZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICB0aGlzLnNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCgkY29udGFpbmVyKTtcbiAgICB0aGlzLnNob3dIaWRlQ2hlY2tib3hUb2dnbGVkQ29udGVudCgkY29udGFpbmVyKTtcbiAgICB0aGlzLnNob3dIaWRlTGlua1RvZ2dsZWRDb250ZW50KCRjb250YWluZXIpO1xuICB9O1xuXG4gIEdPVlVLLlNob3dIaWRlQ29udGVudCA9IFNob3dIaWRlQ29udGVudDtcbiAgZ2xvYmFsLkdPVlVLID0gR09WVUs7XG59KSh3aW5kb3cpO1xuIiwidmFyIHRvZ2dsZVRpcHMgPSAkKFwiLnRvZ2dsZS1oZWxwXCIpO1xuXG50b2dnbGVUaXBzLmVhY2goZnVuY3Rpb24gKCkge1xuICB2YXIgJHRoYXQsIGxpdmVSZWdpb24sIGNvbnRhaW5lciwgdG9nZ2xlVGlwO1xuXG4gICR0aGF0ID0gJCh0aGlzKTtcblxuICBjb250YWluZXIgPSAkKFwiPHNwYW4gLz5cIikuYXR0cihcImNsYXNzXCIsIFwidG9nZ2xldGlwXCIpO1xuXG4gIHRvZ2dsZVRpcCA9ICQoXCI8YnV0dG9uIC8+XCIpXG4gICAgLmF0dHIoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpXG4gICAgLmF0dHIoXCJhcmlhLWxhYmVsXCIsIFwiSGVscFwiKVxuICAgIC5hdHRyKFwiZGF0YS10b2dnbGV0aXAtY29udGVudFwiLCAkdGhhdC5odG1sKCkpXG4gICAgLnRleHQoXCI/XCIpXG4gICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1lc3NhZ2UgPSAkKHRoaXMpLmRhdGEoXCJ0b2dnbGV0aXAtY29udGVudFwiKTtcbiAgICAgIHZhciBsaXZlUmVnaW9uID0gJCh0aGlzKS5uZXh0KCk7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxpdmVSZWdpb24uaHRtbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICQoXCI8c3BhbiAvPlwiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkdGhhdC5odG1sKCkubGVuZ3RoID4gNTAgPyBcImJ1YmJsZSBsb25nXCIgOiBcImJ1YmJsZVwiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50ZXh0KG1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSlcbiAgICAub24oXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoKGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PT0gMjcpIGxpdmVSZWdpb24uaHRtbChcIlwiKTtcbiAgICB9KTtcblxuICBsaXZlUmVnaW9uID0gJChcIjxzcGFuIC8+XCIpLmF0dHIoXCJyb2xlXCIsIFwic3RhdHVzXCIpO1xuXG4gIGNvbnRhaW5lci5hcHBlbmQodG9nZ2xlVGlwLCBsaXZlUmVnaW9uKTtcblxuICAkdGhhdC5iZWZvcmUoY29udGFpbmVyKS5yZW1vdmUoKTtcblxuICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKCR0aGF0WzBdICE9PSAkKGUudGFyZ2V0KSkge1xuICAgICAgbGl2ZVJlZ2lvbi5odG1sKFwiXCIpO1xuICAgIH1cbiAgfSk7XG59KTtcbiIsInZhciBmb3JtcyA9ICQoXCIjY29udGVudCBmb3JtXCIpO1xuLy92YXIgaW5wdXRzID0gZm9ybXMuZmluZCgnLmZvcm0tZ3JvdXAgaW5wdXQnKTtcblxuZm9ybXMuYXR0cihcIm5vdmFsaWRhdGVcIiwgXCJub3ZhbGlkYXRlXCIpO1xuXG4vKlxuZm9ybXMub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcbiAgaW5wdXRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrVmFsaWRpdHkoKTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgc2hvd1ZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xufSk7XG5cbmlucHV0cy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlc3VsdCA9IHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xuICBpZiAoIXJlc3VsdCkge1xuICAgIHNob3dWYWxpZGF0aW9uTWVzc2FnZSh0aGlzKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gIH1cbn0pO1xuXG52YXIgc2hvd1ZhbGlkYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gKGZpZWxkKSB7XG5cbiAgdmFyIGZpZWxkID0gZmllbGQsXG4gICAgJGZpZWxkID0gJChmaWVsZCksXG4gICAgJHBhcmVudCA9ICRmaWVsZC5wYXJlbnQoKTtcblxuICBpZiAoJHBhcmVudC5oYXNDbGFzcygnc2hvdy1wYXNzd29yZCcpKSB7XG4gICAgJHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XG4gIH1cblxuICBpZiAoISRwYXJlbnQuaGFzQ2xhc3MoJ2Zvcm0tZ3JvdXAtZXJyb3InKSkge1xuXG4gICAgdmFyIGxhYmVsVGV4dCA9ICRmaWVsZC5kYXRhKCdsYWJlbCcpIHx8ICQoXCJsYWJlbFtmb3I9J1wiICsgJGZpZWxkLmF0dHIoJ2lkJykgKyBcIiddXCIpLnRleHQoKSxcbiAgICAgIGVycm9yTWVzc2FnZVRleHQgPSAnRW50ZXIgYSB2YWxpZCAnICsgbGFiZWxUZXh0LnRvTG93ZXJDYXNlKCksXG4gICAgICBlcnJvck1lc3NhZ2UgPSAkKCc8cD4nKVxuICAgICAgICAuaHRtbChlcnJvck1lc3NhZ2VUZXh0KVxuICAgICAgICAucHJvcCgnY2xhc3MnLCAnZXJyb3ItbWVzc2FnZScpXG4gICAgICAgIC5wcm9wKCdpZCcsICd2YWxpZGF0aW9uLScgKyBzbHVnaWZ5KGxhYmVsVGV4dCkpO1xuXG4gICAgJGZpZWxkLmJlZm9yZShlcnJvck1lc3NhZ2UpO1xuICAgICRwYXJlbnQuYWRkQ2xhc3MoJ2Zvcm0tZ3JvdXAtZXJyb3InKTtcbiAgICAkZmllbGQuYXR0cih7XG4gICAgICAnYXJpYS1kZXNjcmliZWRieScgOiAndmFsaWRhdGlvbi0nICsgc2x1Z2lmeShsYWJlbFRleHQpLFxuICAgICAgJ2FyaWEtaW52YWxpZCc6ICd0cnVlJ1xuICAgIH0pO1xuICB9XG59XG5cbnZhciBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgdmFyIGZpZWxkID0gZmllbGQsXG4gICAgJGZpZWxkID0gJChmaWVsZCksXG4gICAgJHBhcmVudCA9ICRmaWVsZC5wYXJlbnQoKTtcblxuICBpZiAoJHBhcmVudC5oYXNDbGFzcygnc2hvdy1wYXNzd29yZCcpKSB7XG4gICAgJHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XG4gIH1cblxuICAkcGFyZW50LnJlbW92ZUNsYXNzKCdmb3JtLWdyb3VwLWVycm9yJyk7XG4gICRwYXJlbnQuZmluZCgncC5lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XG4gICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG4gICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWludmFsaWQnKTtcbn1cblxudmFyIHNsdWdpZnkgPSBmdW5jdGlvbiAodGV4dCkge1xuICByZXR1cm4gdGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKClcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnLScpXG4gICAgLnJlcGxhY2UoL1teXFx3XFwtXSsvZywgJycpXG4gICAgLnJlcGxhY2UoL1xcLVxcLSsvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9eLSsvLCAnJylcbiAgICAucmVwbGFjZSgvLSskLywgJycpO1xufVxuXG4qL1xuIiwidmFyIE5TQSA9IE5TQSB8fCB7fTtcblxuTlNBID0ge1xuICBzaG93UGFzc3dvcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHNob3dQYXNzd29yZCA9ICQoXCIuc2hvdy1wYXNzd29yZFwiKTtcbiAgICAkc2hvd1Bhc3N3b3JkLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICB2YXIgJHB3ZEZsZCA9ICR0aGF0LmZpbmQoXCJpbnB1dDpwYXNzd29yZFwiKTtcbiAgICAgIHZhciAkY2hlY2tMYmwgPSAkKFwiPGxhYmVsIC8+XCIpXG4gICAgICAgIC5wcm9wKHsgZm9yOiBcInNob3ctcGFzc3dvcmQtXCIgKyBpIH0pXG4gICAgICAgIC5odG1sKFwiU2hvd1wiKTtcbiAgICAgIHZhciAkY2hlY2tCb3ggPSAkKFwiPGlucHV0IC8+XCIpXG4gICAgICAgIC5wcm9wKHsgdHlwZTogXCJjaGVja2JveFwiLCBpZDogXCJzaG93LXBhc3N3b3JkLVwiICsgaSB9KVxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgICAgJHB3ZEZsZC5wcm9wKFwidHlwZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJHRoYXQucHJvcChcImNoZWNrZWRcIikgPyBcInRleHRcIiA6IFwicGFzc3dvcmRcIjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkY2hlY2tMYmwuaHRtbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJHRoYXQucHJvcChcImNoZWNrZWRcIikgPyBcIkhpZGVcIiA6IFwiU2hvd1wiO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgICR0aGF0LnBhcmVudCgpLnJlbW92ZUNsYXNzKFwidHlwZS1wYXNzd29yZFwiKTtcbiAgICAgICAgICBpZiAoJHRoYXQucHJvcChcImNoZWNrZWRcIikpIHtcbiAgICAgICAgICAgICR0aGF0LnBhcmVudCgpLmFkZENsYXNzKFwidHlwZS1wYXNzd29yZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgdmFyICRjYldyYXAgPSAkKFwiPGRpdiAvPlwiKVxuICAgICAgICAucHJvcChcImNsYXNzXCIsIFwic2hvdy1wYXNzd29yZC1jb250cm9sXCIpXG4gICAgICAgIC5hcHBlbmQoJGNoZWNrQm94LCAkY2hlY2tMYmwpO1xuICAgICAgJHB3ZEZsZC5hZnRlcigkY2JXcmFwKTtcbiAgICB9KTtcbiAgfSxcbiAgYmFja0xpbms6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFja0xpbmsgPSAkKFwiPGE+XCIpXG4gICAgICAuYXR0cih7IGhyZWY6IFwiI1wiLCBjbGFzczogXCJsaW5rLWJhY2tcIiB9KVxuICAgICAgLnRleHQoXCJCYWNrXCIpXG4gICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0pO1xuICAgICQoXCIuanMtYmFjay1saW5rXCIpLmh0bWwoYmFja0xpbmspO1xuICB9LFxufTtcblxuaWYgKCQoXCJzZWxlY3Quc2VsZWN0MlwiKS5sZW5ndGggPiAwKSB7XG4gICQoXCJzZWxlY3Quc2VsZWN0MlwiKS5zZWxlY3QyKHsgbWF0Y2hlcjogc2VsZWN0Mk1vZGVsTWF0Y2hlciB9KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0Mk1vZGVsTWF0Y2hlcihwYXJhbXMsIGRhdGEpIHtcbiAgZGF0YS5wYXJlbnRUZXh0ID0gZGF0YS5wYXJlbnRUZXh0IHx8IFwiXCI7XG4gIGlmIChcbiAgICB0eXBlb2YgcGFyYW1zLnRlcm0gPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAhcGFyYW1zLnRlcm0gfHxcbiAgICBwYXJhbXMudGVybS50cmltKCkgPT09IFwiXCJcbiAgKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgaWYgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgdmFyIG1hdGNoID0gJC5leHRlbmQodHJ1ZSwge30sIGRhdGEpO1xuICAgIGZvciAodmFyIGMgPSBkYXRhLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSB7XG4gICAgICB2YXIgY2hpbGQgPSBkYXRhLmNoaWxkcmVuW2NdO1xuICAgICAgY2hpbGQucGFyZW50VGV4dCArPSBkYXRhLnBhcmVudFRleHQgKyBcIiBcIiArIGRhdGEudGV4dDtcbiAgICAgIHZhciBtYXRjaGVzID0gc2VsZWN0Mk1vZGVsTWF0Y2hlcihwYXJhbXMsIGNoaWxkKTtcbiAgICAgIGlmIChtYXRjaGVzID09IG51bGwpIHtcbiAgICAgICAgbWF0Y2guY2hpbGRyZW4uc3BsaWNlKGMsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF0Y2guY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0Mk1vZGVsTWF0Y2hlcihwYXJhbXMsIG1hdGNoKTtcbiAgfVxuICB2YXIgb3JpZ2luYWwgPSAoZGF0YS5wYXJlbnRUZXh0ICsgXCIgXCIgKyBkYXRhLnRleHQpLnRvVXBwZXJDYXNlKCk7XG4gIHZhciB0ZXJtID0gcGFyYW1zLnRlcm0udG9VcHBlckNhc2UoKTtcbiAgaWYgKG9yaWdpbmFsLmluZGV4T2YodGVybSkgPiAtMSkge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5pZiAoJChcIi5zaG93LXBhc3N3b3JkXCIpLmxlbmd0aCA+IDApIHtcbiAgTlNBLnNob3dQYXNzd29yZCgpO1xufVxuXG5pZiAoJChcIi5qcy1iYWNrLWxpbmtcIikpIHtcbiAgTlNBLmJhY2tMaW5rKCk7XG59XG5cbiQoXCIudW5kZXItY29uc3RydWN0aW9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgd2luZG93LmFsZXJ0KFwiVGhpcyBmdW5jdGlvbmFsaXR5IGlzIG5vdCBhdmFpbGFibGUgeWV0XCIpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuaWYgKCQoXCIubm90aWZpY2F0aW9uIHNwYW4uaWNvblwiKS5sZW5ndGggPiAwKSB7XG4gICQoXCIubm90aWZpY2F0aW9uIHNwYW4uaWNvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnBhcmVudCgpLmhpZGUoKTtcbiAgfSk7XG59XG5cbmlmICgkKFwiYXJ0aWNsZS5vcmdhbmlzYXRpb24tc2VydmljZXNcIikubGVuZ3RoID4gMCkge1xuICAkKFwiLmluZm9ybWF0aW9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgaW5mbyA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5zZXJ2aWNlLWRlc2NyaXB0aW9uXCIpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpbmZvLnRvZ2dsZSgpO1xuICB9KTtcblxuICAkKFwiLmluZm8tbGlua1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIG1ldGEgPSAkKHRoaXMpLnBhcmVudCgpLm5leHQoKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbWV0YS50b2dnbGUoKTtcbiAgfSk7XG59XG5cbnZhciBzZWFyY2hGaWVsZHMgPSAkKFwiZm9ybSAuc2VhcmNoLWZpZWxkXCIpO1xuXG5pZiAoc2VhcmNoRmllbGRzLmxlbmd0aCA+IDApIHtcbiAgdmFyIGxvYWRlciA9ICQoXCI8c3BhbiAvPlwiKS5hZGRDbGFzcyhcImxvYWRlciBzcGlubmVyLWlubGluZVwiKTtcbiAgdmFyIGIxID0gJChcIjxzcGFuIC8+XCIpLmFkZENsYXNzKFwiYmFsbCBiLTFcIik7XG4gIHZhciBiMiA9ICQoXCI8c3BhbiAvPlwiKS5hZGRDbGFzcyhcImJhbGwgYi0yXCIpO1xuICBsb2FkZXIuYXBwZW5kKGIxKS5hcHBlbmQoYjIpO1xuXG4gIHNlYXJjaEZpZWxkcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZm9ybSA9ICQodGhpcykucGFyZW50KCk7XG4gICAgdmFyIGJ1dHRvbiA9IGZvcm0uZmluZChcImJ1dHRvblwiKTtcbiAgICBmb3JtLm9uKFwic3VibWl0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGJ1dHRvbi5hZnRlcihsb2FkZXIpLmhpZGUoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbnZhciByZWRpcmVjdCA9ICQoXCIjcmVkaXJlY3QtdXJsXCIpO1xuXG4kKFwiI2FkZC1yZWRpcmVjdFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgJChcbiAgICAnPHA+PGxhYmVsIGZvcj1cInJlZGlyZWN0LXVybFwiPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBpbnB1dENvbmZpZ1wiIG5hbWU9XCJyZWRpcmVjdF91cmlzXCI+PC9sYWJlbD48L3A+JyxcbiAgKS5hcHBlbmRUbyhyZWRpcmVjdCk7XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG52YXIgbG9nb3V0ID0gJChcIiNsb2dvdXQtdXJsXCIpO1xuXG4kKFwiI2FkZC1sb2dvdXRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICQoXG4gICAgJzxwPjxsYWJlbCBmb3I9XCJsb2dvdXQtdXJsXCI+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGlucHV0Q29uZmlnXCIgbmFtZT1cInBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaXNcIj48L2xhYmVsPjwvcD4nLFxuICApLmFwcGVuZFRvKGxvZ291dCk7XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG4kKFwiI2dlbmVyYXRlLWNsaWVudC1zZWNyZXRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWNyZXRBcnJheSA9IHdpbmRvdy5uaWNld2FyZS5nZW5lcmF0ZVBhc3NwaHJhc2UoOCk7XG4gIHZhciBzZWNyZXQgPSBzZWNyZXRBcnJheS5qb2luKFwiLVwiKTtcbiAgdmFyIGlzQ29uZmlybSA9IHdpbmRvdy5jb25maXJtKFxuICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlZ2VuZXJhdGUgdGhlIGNsaWVudCBzZWNyZXQ/XCIsXG4gICk7XG4gIGlmIChpc0NvbmZpcm0pIHtcbiAgICAkKFwiaW5wdXQjY2xpZW50U2VjcmV0XCIpLmF0dHIoXCJ2YWx1ZVwiLCBzZWNyZXQpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG4kKFwiI2dlbmVyYXRlLWFwaS1zZWNyZXRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWNyZXRBcnJheSA9IHdpbmRvdy5uaWNld2FyZS5nZW5lcmF0ZVBhc3NwaHJhc2UoOCk7XG4gIHZhciBzZWNyZXQgPSBzZWNyZXRBcnJheS5qb2luKFwiLVwiKTtcbiAgdmFyIGlzQ29uZmlybSA9IHdpbmRvdy5jb25maXJtKFxuICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlZ2VuZXJhdGUgdGhlIGFwaSBzZWNyZXQ/XCIsXG4gICk7XG4gIGlmIChpc0NvbmZpcm0pIHtcbiAgICAkKFwiaW5wdXQjYXBpU2VjcmV0XCIpLmF0dHIoXCJ2YWx1ZVwiLCBzZWNyZXQpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG52YXIgZm9ybVJlZ2lzdGVyID0gJChcIi5wcmV2ZW50LWZvcm0tZG91YmxlLXN1Ym1pc3Npb25cIik7XG5cbmlmIChmb3JtUmVnaXN0ZXIubGVuZ3RoID4gMCkge1xuICBmb3JtUmVnaXN0ZXIuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRzdWJtaXRCdXR0b25zID0gJChmb3JtUmVnaXN0ZXIpLmZpbmQoXCJidXR0b246c3VibWl0XCIpLFxuICAgICAgJHN1Ym1pdEJ1dHRvbiA9ICRzdWJtaXRCdXR0b25zLmVxKDApO1xuICAgIGZvcm1SZWdpc3Rlci5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkc3VibWl0QnV0dG9ucy5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcblxuICAgICAgJHN1Ym1pdEJ1dHRvbi5jc3MoXCJtaW4td2lkdGhcIiwgJHN1Ym1pdEJ1dHRvbi5vdXRlcldpZHRoKCkgKyBcInB4XCIpO1xuXG4gICAgICAkc3VibWl0QnV0dG9uLmFwcGVuZChcbiAgICAgICAgXCI8c3BhbiBjbGFzcz0nbG9hZGVyIHNwaW5uZXItaW5saW5lJz4gPHNwYW4gY2xhc3M9J2JhbGwgYi0xJz48L3NwYW4+IDxzcGFuIGNsYXNzPSdiYWxsIGItMic+PC9zcGFuPiA8c3BhbiBjbGFzcz0nYmFsbCBiLTMnPjwvc3Bhbj4gPC9zcGFuPlwiLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbnZhciBzaG93SGlkZUNvbnRlbnQgPSBuZXcgR09WVUsuU2hvd0hpZGVDb250ZW50KCk7XG5zaG93SGlkZUNvbnRlbnQuaW5pdCgpO1xuXG5HT1ZVSy5kZXRhaWxzLmluaXQoKTtcbiJdfQ==
