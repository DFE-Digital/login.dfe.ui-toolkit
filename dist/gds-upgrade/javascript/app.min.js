var COOKIE_NAMES={PREFERENCES_SET:"cookies_preferences_set",POLICY:"cookies_policy",GA:"_ga",GA_GID:"_gid",GA_GAT:"_gat",USER_BANNER_LAST_SEEN:"user_banner_last_seen"},GOVUK_COOKIE_OPTIONS={expires:365,secure:!0,domain:".education.gov.uk"},GovUKCookie={getRaw:function(e){if(window.Cookies)return window.Cookies.get(e)},get:function(e){if(window.Cookies){var t=window.Cookies.get(e);return t?JSON.parse(t):t}},set:function(e,t){if(window.Cookies)return window.Cookies.set(e,t,GOVUK_COOKIE_OPTIONS)},remove:function(e){if(window.Cookies)return window.Cookies.remove(e,GOVUK_COOKIE_OPTIONS)}};function checkConditionForUsersBanner(){var e=GovUKCookie.getRaw(COOKIE_NAMES.USER_BANNER_LAST_SEEN);return!e||((new Date).getTime()-e)/864e5>90}function showReviewUsersBanner(){$("#review-users-banner").show()}function setReviewUsersBannerLastSeen(){GovUKCookie.set(COOKIE_NAMES.USER_BANNER_LAST_SEEN,(new Date).getTime())}function loadReviewUsersBanner(){checkConditionForUsersBanner()&&showReviewUsersBanner()}function updateCookieReviewUsersBanner(){checkConditionForUsersBanner()&&setReviewUsersBannerLastSeen()}GovUKCookie.remove(COOKIE_NAMES.POLICY),GovUKCookie.remove(COOKIE_NAMES.PREFERENCES_SET),GovUKCookie.remove(COOKIE_NAMES.GA),GovUKCookie.remove(COOKIE_NAMES.GA_GAT),GovUKCookie.remove(COOKIE_NAMES.GA_GID),function(e){var t=e.GOVUK||{};t.details={NATIVE_DETAILS:"boolean"==typeof document.createElement("details").open,KEY_ENTER:13,KEY_SPACE:32,started:!1,addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,(function(e){n(e,e.target)}),!1):e.attachEvent&&e.attachEvent("on"+t,(function(e){n(e,e.srcElement)}))},removeEvent:function(e,t){e.removeEventListener?e.removeEventListener(t,(function(e){}),!1):e.detachEvent&&e.detachEvent("on"+t,(function(e){}))},charCode:function(e){return"number"==typeof e.which?e.which:e.keyCode},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},addClickEvent:function(e,n){t.details.addEvent(e,"keypress",(function(e,o){t.details.charCode(e)!==t.details.KEY_ENTER&&t.details.charCode(e)!==t.details.KEY_SPACE||"summary"===o.nodeName.toLowerCase()&&(t.details.preventDefault(e),o.click?o.click():n(e,o))})),t.details.addEvent(e,"keyup",(function(e,n){t.details.charCode(e)===t.details.KEY_SPACE&&"SUMMARY"===n.nodeName&&t.details.preventDefault(e)})),t.details.addEvent(e,"click",(function(e,t){n(e,t)}))},getAncestor:function(e,t){do{if(!e||e.nodeName.toLowerCase()===t)break;e=e.parentNode}while(e);return e},addDetailsPolyfill:function(e,n){if(n=n||document.body,!t.details.started&&(t.details.started=!0,0!==(e=n.getElementsByTagName("details")).length)){for(var o=e.length,i=0;i<o;i++){var a=e[i];if(a.__summary=a.getElementsByTagName("summary").item(0),a.__content=a.getElementsByTagName("div").item(0),!a.__summary||!a.__content)return;a.__content.id||(a.__content.id="details-content-"+i),a.setAttribute("role","group"),a.__summary.setAttribute("role","button"),a.__summary.setAttribute("aria-controls",a.__content.id),t.details.NATIVE_DETAILS||(a.__summary.tabIndex=0);var s=null!==a.getAttribute("open");if(!0===s?(a.__summary.setAttribute("aria-expanded","true"),a.__content.setAttribute("aria-hidden","false")):(a.__summary.setAttribute("aria-expanded","false"),a.__content.setAttribute("aria-hidden","true"),t.details.NATIVE_DETAILS||(a.__content.style.display="none")),a.__summary.__details=a,!t.details.NATIVE_DETAILS){var r=document.createElement("i");!0===s?(r.className="arrow arrow-open",r.appendChild(document.createTextNode("▼"))):(r.className="arrow arrow-closed",r.appendChild(document.createTextNode("►"))),a.__summary.__twisty=a.__summary.insertBefore(r,a.__summary.firstChild),a.__summary.__twisty.setAttribute("aria-hidden","true")}}t.details.addClickEvent(n,(function(e,n){return!(n=t.details.getAncestor(n,"summary"))||t.details.statechange(n)}))}},statechange:function(e){var n="true"===e.__details.__summary.getAttribute("aria-expanded"),o="true"===e.__details.__content.getAttribute("aria-hidden");(e.__details.__summary.setAttribute("aria-expanded",n?"false":"true"),e.__details.__content.setAttribute("aria-hidden",o?"false":"true"),t.details.NATIVE_DETAILS)||(e.__details.__content.style.display=n?"none":"",null!==e.__details.getAttribute("open")?e.__details.removeAttribute("open"):e.__details.setAttribute("open","open"));return e.__twisty&&(e.__twisty.firstChild.nodeValue=n?"►":"▼",e.__twisty.setAttribute("class",n?"arrow arrow-closed":"arrow arrow-open")),!0},destroy:function(e){t.details.removeEvent(e,"click")},init:function(){t.details.addEvent(document,"DOMContentLoaded",t.details.addDetailsPolyfill),t.details.addEvent(window,"load",t.details.addDetailsPolyfill)}},e.GOVUK=t}(window);var NSA=NSA||{};const filterBoxes=$(".filter-box");function toKebabCase(e){return e.toLowerCase().replace(/\s+/g,"-")}function hideElement(){$(this).hide()}function uncheckCheckbox(){$(this).prop("checked",!1)}function extractStartingNumberFromId(e){const t=$(`#${e}`);return parseInt(t.prop("id").split("-").pop(),10)}function extractFirstPartFromId(e){const t=e.split("-");return t.length>=2?(t.pop(),`${t.join("-")}-`):e}function updateCount(e){const t=toKebabCase(e),n=$(`.${t} .govuk-checkboxes__input:checked`).length;$(`#${t}-count`).text(n)}function updateCategoryHeader(e){const t=toKebabCase(e),n=$(`#${t}-text`),o=$(`input[id^='show-hide-${t}']:checked`).length>0;n.css("display",o?"block":"none")}function updateNoFilterMessage(){const e=$(".govuk-checkboxes__input.dfe-filter-input:checked").length>0;$("#show-hide-selected-filters").css("display",e?"none":"block")}function showMe(e,t,n){const o=$(`#${n}`).prop("checked");$(`#${e}`).css("display",o?"block":"none"),updateCategoryHeader(t),updateNoFilterMessage()}function filterAndPerformAction(e,t,n){$(`[id^="${e}"]`).filter((function(){const e=parseInt(this.id.split("-").pop(),10);return!Number.isNaN(e)&&e>t})).each(n)}function hideMe(e,t,n){if("Last login"===t){const t=extractStartingNumberFromId(e),o=extractFirstPartFromId(e),i=extractFirstPartFromId(n);filterAndPerformAction(o,t,hideElement),filterAndPerformAction(i,t,uncheckCheckbox);$(".last-login-checkboxes-input").prop("disabled",!1)}$(`#${e}`).hide(),$(`#${n}`).prop("checked",!1),updateCount(t),updateCategoryHeader(t),updateNoFilterMessage()}function initializeFilters(){$(".govuk-checkboxes__input.dfe-filter-input").each((function(){if($(this).prop("checked")){const e=$(this).attr("id"),t=e.match(/show-hide-(.+)-(\d+)/);if(t&&3===t.length){const n=t[1],o=t[2],i=`${n}-option-${o}`;if("last-login"===n&&"6"===o){$(".last-login-checkboxes-input").slice(0,o-1).prop("disabled",!0)}showMe(i,n,e),updateCount(n),updateCategoryHeader(n),updateNoFilterMessage()}}}))}function handleLastLoginCheckboxChange(e,t){e.on("change",(function(){const n=e.index(this);let o;if(this.checked)if("never"===this.value)t.css("display","none"),e.slice(0,n).prop("checked",!1),e.slice(0,n).prop("disabled",!0),initializeFilters();else e.slice(0,n).prop("checked",!0),initializeFilters();else o=extractFirstPartFromId(this.id),filterAndPerformAction(o,n+1,uncheckCheckbox),e.slice(0,n).prop("disabled",!1),filterAndPerformAction("last-login-option-",n+1,hideElement),updateCount("last-login"),updateCategoryHeader("last-login")}))}NSA.filters={init(){function e(e){return e.filter(":checked").length>0?`${e.filter(":checked").length} selected`:""}filterBoxes.each(((t,n)=>{const o=$(n),i=o.find(".container-head"),a=i.find(".option-select-label"),s=o.find("input:checkbox"),r=$("<button />").addClass("js-container-head"),c=$("<div />").addClass("js-selected-counter").text((()=>e(s)));r.on("click",(e=>{const t=$(e.currentTarget),n=t.next();t.hasClass("closed")?(n.show(),t.removeClass("closed").attr("aria-expanded",!0)):(n.hide(),t.addClass("closed").attr("aria-expanded",!1)),e.preventDefault()})).append(a,c),i.replaceWith(r),s.on("change",(()=>{c.text((()=>e(s)))}))}))}},filterBoxes.length>0&&NSA.filters.init(),$((()=>{initializeFilters();const e=$(".last-login-checkboxes-input"),t=$(".last-login-option");e.on("click",(()=>{handleLastLoginCheckboxChange(e,t)}))})),(NSA=NSA||{}).modal={elems:{links:$(".modal-link"),modals:$(".modal")},init:function(){this.modalBg(),this.setUpEvents()},modalBg:function(){var e=this,t=$("<div>").addClass("modal-bg").hide().on("click",(function(){e.hideModals()}));$("body").append(t)},setUpEvents:function(){var e=this;this.elems.links.on("click",(function(t){var n=$(this).attr("href");e.showModal($(n)),t.preventDefault()})),e.elems.modals.find(".close").on("click",(function(t){e.hideModals(),t.preventDefault()})),$("body").on("keydown",(function(t){27===(t.keyCode||t.which)&&e.hideModals()}))},showModal:function(e){$("html").addClass("modal-open"),$(".modal-bg").show(),e.show()},hideModals:function(){$("html").removeClass("modal-open"),$(".modal-bg").hide(),this.elems.modals.hide()}},NSA.modal.init();const RESPONSE_TYPE_CODE="code",RESPONSE_TYPE_ID_TOKEN="ID token",RESPONSE_TYPE_TOKEN="token",FLOW_TYPE_IMPLICIT="implicit",FLOW_TYPE_AUTHORIZATION="authorization",FLOW_TYPE_HYBRID="hybrid";function sortTable(e){var t,n,o,i,a,s,r,c,l=0;for(t=$("table.sortable"),o=!0,c="a";o;){for(o=!1,n=t.find("tr"),i=1;i<n.length-1;i++)if(r=!1,a=n[i].getElementsByTagName("TD")[e],s=n[i+1].getElementsByTagName("TD")[e],"a"===c){if(a.innerHTML.toLowerCase()>s.innerHTML.toLowerCase()){r=!0;break}}else if("d"===c&&a.innerHTML.toLowerCase()<s.innerHTML.toLowerCase()){r=!0;break}r?(n[i].parentNode.insertBefore(n[i+1],n[i]),o=!0,l++):0===l&&"a"===c&&(c="d",o=!0)}return c}$((()=>{const e=(e,t,n)=>{const o=$(`#${e}-add`),i=$(`${t}`);o.on("click",(function(){let t=parseInt(i.data(`${e}-counter`),10);const o=`${e}-${t}`;return $(`\n      <div class="govuk-body dfe-flex-container" id="${e}-input-group-${t}">\n        <label for="${o}" class="govuk-label govuk-label--s govuk-visually-hidden">\n          ${n}\n        </label>\n        <input\n          class="form-control dfe-flex-input-grow govuk-input"\n          id="${o}"\n          name="${e}"\n        />\n        <a href="#" class="govuk-link govuk-link--no-visited-state remove-redirect" id="${e}-remove-${t}" data-group-id="${t}">Remove</a>\n      </div>`).appendTo(i),t+=1,i.data(`${e}-counter`,t),$(this).trigger("blur"),!1})),i.on("click",".remove-redirect",(function(t){t.preventDefault();const n=$(this).data("group-id");$(`#${e}-input-group-${n}`).remove(),$(this).trigger("blur");const o=i.find(".dfe-flex-container").length;i.data(`${e}-counter`,o)}))};function t(e,t,n){$(e).on("click",(function(){const e=window.niceware.generatePassphrase(8).join("-");return window.confirm(n)&&$(`input#${t}`).attr("value",e),$(this).trigger("blur"),!1}))}function n(){const e=[];$("#response_types-id_token").is(":checked")&&e.push("ID token"),$("#response_types-token").is(":checked")&&e.push("token"),$("#response_types-code").is(":checked")&&e.push("code");let t="";if(e.length>0){e.sort(((e,t)=>{const n=["code","ID token","token"];return n.indexOf(e)-n.indexOf(t)}));let n="implicit";if(1===e.length&&e.includes("code")?n="authorization":(e.includes("code")&&e.includes("token")||e.includes("code")&&e.includes("ID token"))&&(n="hybrid"),1===e.length&&e.includes("token"))t="";else{let o;if(e.length>1){o=`${e.slice(0,-1).join(", ")} and ${e[e.length-1]}`}else[o]=e;t=`\n            <div class="govuk-warning-text govuk-!-margin-top-5 govuk-!-margin-bottom-0" id="warning-response-types">\n                <span class="govuk-warning-text__icon" aria-hidden="true">!</span>\n                <strong class="govuk-warning-text__text">\n                    <span class="govuk-warning-text__assistive">Warning</span>\n                    You have selected ${o} as your response type. This means ${n} flow is your flow.\n                </strong>\n            </div>\n        `}}$("#warning-response-types").remove(),t&&$("#response_types-fieldset").append(t);if($("#response_types-code").length){const e=$("#response_types-code").offset().top,t=$(window).scrollTop();$("#response_types-code").is(":checked")?($("#refresh_token-wrapper :input, #clientSecret-wrapper :input, #tokenEndpointAuthMethod-wrapper select").prop("disabled",!1),$("#refresh_token-wrapper, #clientSecret-wrapper, #tokenEndpointAuthMethod-wrapper").slideDown(500)):$("#refresh_token-wrapper, #clientSecret-wrapper, #tokenEndpointAuthMethod-wrapper").slideUp(500,(()=>{$("#refresh_token-wrapper :input, #clientSecret-wrapper :input, #tokenEndpointAuthMethod-wrapper select").prop("disabled",!0)}));const n=$("#response_types-code").offset().top-e;$("html, body").animate({scrollTop:t+n},50,"linear")}}e("redirect_uris","#redirect_uris-form-group","Redirect URL"),e("post_logout_redirect_uris","#post_logout_redirect_uris-form-group","Logout redirect URL"),t("#generate-clientSecret","clientSecret","Are you sure you want to regenerate the client secret?"),t("#generate-apiSecret","apiSecret","Are you sure you want to regenerate the API secret?"),n(),$("#response_types-id_token, #response_types-token, #response_types-code").on("change",(()=>{n()}))})),(e=>{const t=e,n=e.jQuery,o=e.GOVUK||{};function i(){const e=this,t="ShowHideContent",o='[data-target] > input[type="radio"]',i='[data-target] > input[type="checkbox"]',a="a.js-toggle-content",s="[data-target] > select";function r(e){let t=e.attr("aria-controls");return t||(t=e.closest("[data-target]").data("target")),n(`#${t}`)}function c(){const e=n(this),t=r(e);t.length&&(e.attr("aria-controls",t.attr("id")),e.attr("aria-expanded","false"))}function l(e,t){t.hasClass("js-hidden")&&(t.removeClass("js-hidden"),e.attr("aria-controls")&&e.attr("aria-expanded","true"))}function d(e,t){const n=t||r(e);n.hasClass("js-hidden")||(n.addClass("js-hidden"),e.attr("aria-controls")&&e.attr("aria-expanded","false"))}function u(e,t){const i=`${o}[name=${a=e.attr("name"),a.replace("[","\\[").replace("]","\\]")}][aria-controls]`;var a;const s=e.closest("form");(s.length?s.find(i):n(i)).each((function(){d(n(this))})),e.is("[aria-controls]")&&l(e,t)}function p(e,t){e.is(":checked")?l(e,t):d(e,t)}function h(e,t,n){t.hasClass("js-hidden")?l(e,t):d(e,t),n.preventDefault()}function f(e,t){e.val()!==e.data("option")?(d(t,t),e.data("clear")&&t.find(":input").each(((e,t)=>{t.value=""}))):l(e,t)}function m(e,o,i,a){const s=e||n(document.body);function l(e){const t=n(this);a(t,r(t),e)}const d=n(o);d.each(c),n.each(i,((e,n)=>{a===f?s.on(`change.${t}`,n,l):s.on(`click.${t}`,n,l)})),a===p&&d.is(":checked")&&d.filter(":checked").each(l),a===f&&d.each(l)}e.showHideRadioToggledContent=function(e){m(e,o,function(){const e=[];return n(o).map((function(){const t=n(this).attr("name");return-1===n.inArray(t,e)?(e.push(t),`input[type="radio"][name="${n(this).attr("name")}"]`):null}))}(),u)},e.showHideCheckboxToggledContent=function(e){m(e,i,[i],p)},e.showHideLinkToggledContent=function(e){m(e,a,[a],h)},e.showHideSelectToggledContent=function(e){m(e,s,[s],f)},e.destroy=function(e){(e||n(document.body)).off(`.${t}`)}}i.prototype.init=function(e){this.showHideRadioToggledContent(e),this.showHideCheckboxToggledContent(e),this.showHideLinkToggledContent(e),this.showHideSelectToggledContent(e)},o.ShowHideContent=i,t.GOVUK=o})(window),$((function(){$("table.sortable thead th").on("click",(function(){var e=$("table.sortable thead tr th");e.removeClass("sorted").removeClass("dir-a").removeClass("dir-d");var t=sortTable(e.index($(this)));$(this).addClass("sorted dir-"+t)}))}));var toggleTips=$(".toggle-help");function validatePassword(){var e=$(this).attr("id"),t=$(this).val();$(`#length-${e}`).removeClass(t.length>=14?"icon-remove":"icon-ok"),$(`#length-${e}`).addClass(t.length>=14?"icon-ok":"icon-remove")}toggleTips.each((function(){var e,t,n,o;e=$(this),n=$("<span />").attr("class","toggletip"),o=$("<button />").attr("type","button").attr("aria-label","Help").attr("data-toggletip-content",e.html()).text("?").on("click",(function(){var t=$(this).data("toggletip-content"),n=$(this).next();window.setTimeout((function(){n.html((function(){return $("<span />").attr("class",(function(){return e.html().length>50?"bubble long":"bubble"})).text(t)}))}),100)})).on("keydown",(function(e){27===(e.keyCode||e.which)&&t.html("")})),t=$("<span />").attr("role","status"),n.append(o,t),e.before(n).remove(),$(document).on("click",(function(n){e[0]!==$(n.target)&&t.html("")}))})),$(".password-input-check").each((function(){var e=$(this),t=e.attr("id"),n=$(`<div id='validation-feedback-${t}'>`).append(`<div id='length-${t}' class='icon-remove'>be at least 14 characters</div>`);e.before(n)})),$(".password-input-check").on("keyup",validatePassword);var forms=$("#content form");forms.attr("novalidate","novalidate");NSA=NSA||{};function select2ModelMatcher(e,t){if(t.parentText=t.parentText||"",void 0===e.term||!e.term||""===e.term.trim())return t;if(t.children&&t.children.length>0){for(var n=$.extend(!0,{},t),o=t.children.length-1;o>=0;o--){var i=t.children[o];i.parentText+=t.parentText+" "+t.text,null==select2ModelMatcher(e,i)&&n.children.splice(o,1)}return n.children.length>0?n:select2ModelMatcher(e,n)}var a=(t.parentText+" "+t.text).toUpperCase(),s=e.term.toUpperCase();return a.indexOf(s)>-1?t:null}NSA={initialiseShowPassword:function(){$(".password-input").each((function(){var e=$(this),t=$("<button />").prop({type:"button",class:"show-password govuk-button govuk-button--secondary govuk-!-margin-bottom-1",ariaLabel:"Show password"});t.html("Show"),t.on("click",(function(){"password"===e.attr("type")?(e.attr("type","text"),t.text("Hide")):(e.attr("type","password"),t.text("Show"))})),e.after(t)}))},backLink:function(){var e=$("<a>").attr({href:"#",class:"govuk-back-link-bold"}).text("Back").on("click",(function(e){window.history.back(),e.preventDefault()}));$(".js-back-link").html(e)}},$("select.select2").length>0&&$("select.select2").select2({matcher:select2ModelMatcher}),$(".password-input").length>0&&NSA.initialiseShowPassword(),$(".js-back-link")&&NSA.backLink(),$(".under-construction").on("click",(function(e){window.alert("This functionality is not available yet"),e.preventDefault()})),$(".notification span.icon").length>0&&$(".notification span.icon").on("click",(function(){$(this).parent().hide()})),$("article.organisation-services").length>0&&($(".information").on("click",(function(e){var t=$(this).parent().parent().find(".service-description");e.preventDefault(),t.toggle()})),$(".info-link").on("click",(function(e){var t=$(this).parent().next();e.preventDefault(),t.toggle()})));var searchFields=$("form .search-field");if(searchFields.length>0){var loader=$("<span />").addClass("loader spinner-inline"),b1=$("<span />").addClass("ball b-1"),b2=$("<span />").addClass("ball b-2");loader.append(b1).append(b2),searchFields.each((function(){var e=$(this).parent(),t=e.find("button");e.on("submit",(function(){t.after(loader).hide()}))}))}var formRegister=$(".prevent-form-double-submission");formRegister.length>0&&formRegister.each((function(){var e=$(formRegister).find("button:submit"),t=e.eq(0);formRegister.on("submit",(function(){e.attr("disabled","disabled"),t.css("min-width",t.outerWidth()+"px"),t.append("<span class='loader spinner-inline'> <span class='ball b-1'></span> <span class='ball b-2'></span> <span class='ball b-3'></span> </span>")}))})),$(".auto-scroll-on-change").on("change",(function(){$(window).scrollTop($(".auto-scroll-dest").position().top)})),$(".close-button").on("click",(function(e){e.target.closest(".govuk-notification-banner").remove()})),$(".toggle-open").on("click",(function(e){var t=$(this).next();e.preventDefault(),t.removeClass("govuk-visually-hidden"),$(this).addClass("govuk-visually-hidden")}));var tabId=(new Date).getTime();const sessionDurationInMinutes=480,notifyUserWhenSessionMinutesRemain=5;function getSessionNotifyUserInSeconds(){return 60*notifyUserWhenSessionMinutesRemain-1}function updateSessionCounterDisplay(e){const t=Math.floor(e/60),n=e%60;$("#minutes").html(t.toString().padStart(1,"0")),$("#seconds").html(n.toString().padStart(2,"0"))}function sessionTimeout(){window.localStorage.removeItem("uri"),window.onfocus=function(){countTimeDiff()},updateSessionCounterDisplay(getSessionNotifyUserInSeconds());const e=1e3*(60*sessionDurationInMinutes-getSessionNotifyUserInSeconds());setTimeout((function(){window.localStorage.setItem("tabs","1"),$(".session-timeout-overlay").show(),$("#modal-signin").focus(),startTimer()}),e)}var timeoutTimer;function startTimer(){var e=getSessionNotifyUserInSeconds();timeoutTimer=setInterval((function(){"0"===window.localStorage.getItem("tabs")&&(clearInterval(timeoutTimer),location.reload()),updateSessionCounterDisplay(--e),e<=0?callTimeout():tabId&&countTimeDiff()}),1e3)}function callTimeout(){clearInterval(timeoutTimer),window.localStorage.setItem("uri",location.pathname),location.href="/signout"}function countTimeDiff(){((new Date).getTime()-Number(tabId))/6e4>sessionDurationInMinutes&&(window.localStorage.setItem("uri",location.pathname),clearInterval(timeoutTimer),location.reload())}$("#modal-signin").on("click",(()=>{clearInterval(timeoutTimer),window.localStorage.setItem("tabs","0"),location.reload()})),$("#modal-signout").on("click",(()=>{clearInterval(timeoutTimer),location.href="/signout"}));var showHideContent=new GOVUK.ShowHideContent;showHideContent.init(),GOVUK.details.init();const dfeIdentifier = '2025-02-28T10:59:16.598Z';
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb29raWVzLmpzIiwiX2RldGFpbHMucG9seWZpbGwuanMiLCJfZmlsdGVyLWJveGVzLmpzIiwiX2ZpbHRlcnMuanMiLCJfbW9kYWwuanMiLCJfc2VydmljZUNvbmZpZ0Zvcm0uanMiLCJfdGFibGVzb3J0LmpzIiwiX3Nob3ctaGlkZS1jb250ZW50LmpzIiwiX3Rvb2x0aXAuanMiLCJfdmFsaWRhdGUtcGFzc3dvcmQuanMiLCJfdmFsaWRhdGlvbi5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJDT09LSUVfTkFNRVMiLCJQUkVGRVJFTkNFU19TRVQiLCJQT0xJQ1kiLCJHQSIsIkdBX0dJRCIsIkdBX0dBVCIsIlVTRVJfQkFOTkVSX0xBU1RfU0VFTiIsIkdPVlVLX0NPT0tJRV9PUFRJT05TIiwiZXhwaXJlcyIsInNlY3VyZSIsImRvbWFpbiIsIkdvdlVLQ29va2llIiwiZ2V0UmF3IiwibmFtZSIsIndpbmRvdyIsIkNvb2tpZXMiLCJnZXQiLCJ2YWx1ZSIsIkpTT04iLCJwYXJzZSIsInNldCIsInJlbW92ZSIsImNoZWNrQ29uZGl0aW9uRm9yVXNlcnNCYW5uZXIiLCJsYXN0U2VlbiIsIkRhdGUiLCJnZXRUaW1lIiwic2hvd1Jldmlld1VzZXJzQmFubmVyIiwiJCIsInNob3ciLCJzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuIiwibG9hZFJldmlld1VzZXJzQmFubmVyIiwidXBkYXRlQ29va2llUmV2aWV3VXNlcnNCYW5uZXIiLCJnbG9iYWwiLCJHT1ZVSyIsImRldGFpbHMiLCJOQVRJVkVfREVUQUlMUyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm9wZW4iLCJLRVlfRU5URVIiLCJLRVlfU1BBQ0UiLCJzdGFydGVkIiwiYWRkRXZlbnQiLCJub2RlIiwidHlwZSIsImNhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJhdHRhY2hFdmVudCIsInNyY0VsZW1lbnQiLCJyZW1vdmVFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsImNoYXJDb2RlIiwid2hpY2giLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImFkZENsaWNrRXZlbnQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwiY2xpY2siLCJnZXRBbmNlc3RvciIsIm1hdGNoIiwicGFyZW50Tm9kZSIsImFkZERldGFpbHNQb2x5ZmlsbCIsImxpc3QiLCJjb250YWluZXIiLCJib2R5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJuIiwiaSIsIl9fc3VtbWFyeSIsIml0ZW0iLCJfX2NvbnRlbnQiLCJpZCIsInNldEF0dHJpYnV0ZSIsInRhYkluZGV4Iiwib3BlbkF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImRpc3BsYXkiLCJfX2RldGFpbHMiLCJ0d2lzdHkiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX190d2lzdHkiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwic3VtbWFyeSIsInN0YXRlY2hhbmdlIiwiZXhwYW5kZWQiLCJoaWRkZW4iLCJyZW1vdmVBdHRyaWJ1dGUiLCJub2RlVmFsdWUiLCJkZXN0cm95IiwiaW5pdCIsIk5TQSIsImZpbHRlckJveGVzIiwidG9LZWJhYkNhc2UiLCJzdHIiLCJyZXBsYWNlIiwiaGlkZUVsZW1lbnQiLCJ0aGlzIiwiaGlkZSIsInVuY2hlY2tDaGVja2JveCIsInByb3AiLCJleHRyYWN0U3RhcnRpbmdOdW1iZXJGcm9tSWQiLCJlbGVtZW50SWQiLCJlbGVtZW50IiwicGFyc2VJbnQiLCJzcGxpdCIsInBvcCIsImV4dHJhY3RGaXJzdFBhcnRGcm9tSWQiLCJwYXJ0cyIsImpvaW4iLCJ1cGRhdGVDb3VudCIsImNhdGVnb3J5TmFtZSIsInNhZmVDYXRlZ29yeU5hbWUiLCJjaGVja2VkQ291bnQiLCJ0ZXh0IiwidXBkYXRlQ2F0ZWdvcnlIZWFkZXIiLCJjYXRlZ29yeUhlYWRlciIsImlzQW55Q2hlY2tlZEluQ2F0ZWdvcnkiLCJjc3MiLCJ1cGRhdGVOb0ZpbHRlck1lc3NhZ2UiLCJpc0FueUNoZWNrZWRHbG9iYWwiLCJzaG93TWUiLCJib3hJZCIsImNoZWNrZWRFbGVtZW50SWQiLCJpc0NoZWNrZWQiLCJmaWx0ZXJBbmRQZXJmb3JtQWN0aW9uIiwiZmlyc3RQYXJ0T2ZMaXN0SWQiLCJsaXN0SWRTdGFydGluZ051bWJlciIsInBlcmZvcm1BY3Rpb24iLCJmaWx0ZXIiLCJOdW1iZXIiLCJpc05hTiIsImVhY2giLCJoaWRlTWUiLCJsaXN0SWQiLCJjaGVja2JveElkIiwiZmlyc3RQYXJ0T2ZDaGVja2JveElkIiwiaW5pdGlhbGl6ZUZpbHRlcnMiLCJhdHRyIiwiaW5kZXgiLCJzbGljZSIsImhhbmRsZUxhc3RMb2dpbkNoZWNrYm94Q2hhbmdlIiwiY2hlY2tib3hlcyIsImxhc3RMb2dpbkxpc3RUYWdzIiwib24iLCJjaGVja2VkIiwiZmlsdGVycyIsImNoZWNrQ291bnRUZXh0IiwiXyIsImZpbHRlckJveCIsImhlYWRlciIsImZpbmQiLCJ0aXRsZSIsImJ1dHRvbiIsImFkZENsYXNzIiwiY2hlY2tDb3VudCIsImN1cnJlbnRUYXJnZXQiLCJvcHRpb25zIiwibmV4dCIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhcHBlbmQiLCJyZXBsYWNlV2l0aCIsImxhc3RMb2dpbkNoZWNrYm94ZXMiLCJtb2RhbCIsImVsZW1zIiwibGlua3MiLCJtb2RhbHMiLCJtb2RhbEJnIiwic2V0VXBFdmVudHMiLCJ0aGF0IiwiYmciLCJoaWRlTW9kYWxzIiwic2hvd01vZGFsIiwiUkVTUE9OU0VfVFlQRV9DT0RFIiwiUkVTUE9OU0VfVFlQRV9JRF9UT0tFTiIsIlJFU1BPTlNFX1RZUEVfVE9LRU4iLCJGTE9XX1RZUEVfSU1QTElDSVQiLCJGTE9XX1RZUEVfQVVUSE9SSVpBVElPTiIsIkZMT1dfVFlQRV9IWUJSSUQiLCJzb3J0VGFibGUiLCJ0YWJsZSIsInJvd3MiLCJzd2l0Y2hpbmciLCJ4IiwieSIsInNob3VsZFN3aXRjaCIsImRpcmVjdGlvbiIsInN3aXRjaGNvdW50IiwiaW5uZXJIVE1MIiwiY3JlYXRlU2VydmljZUNvbmZpZ1VybFNlY3Rpb25zIiwic2VjdGlvbklkIiwiZm9ybUdyb3VwU2VsZWN0b3IiLCJsYWJlbFRleHQiLCJhZGRCdXR0b24iLCJmb3JtR3JvdXAiLCJjb3VudGVyIiwiZGF0YSIsIm5ld0lucHV0SWQiLCJhcHBlbmRUbyIsInRyaWdnZXIiLCJncm91cElkIiwibmV3Q291bnRlciIsImhhbmRsZVNlY3JldEdlbmVyYXRpb24iLCJldmVudElkIiwiaW5wdXRJZCIsImNvbmZpcm1NZXNzYWdlIiwic2VjcmV0IiwibmljZXdhcmUiLCJnZW5lcmF0ZVBhc3NwaHJhc2UiLCJjb25maXJtIiwidXBkYXRlU2VjdGlvbnMiLCJzZWxlY3RlZFR5cGVzIiwiaXMiLCJwdXNoIiwid2FybmluZ01lc3NhZ2UiLCJzb3J0IiwiYSIsImIiLCJvcmRlciIsImluZGV4T2YiLCJmbG93VHlwZSIsImluY2x1ZGVzIiwic2VsZWN0ZWRUeXBlc0Rpc3BsYXkiLCJpbml0aWFsT2Zmc2V0Iiwib2Zmc2V0IiwidG9wIiwiaW5pdGlhbFNjcm9sbFBvc2l0aW9uIiwic2Nyb2xsVG9wIiwic2xpZGVEb3duIiwic2xpZGVVcCIsIm9mZnNldERpZmZlcmVuY2UiLCJhbmltYXRlIiwiZ2xvYmFsT2JqZWN0IiwialF1ZXJ5IiwiU2hvd0hpZGVDb250ZW50Iiwic2VsZiIsInNlbGVjdG9ycyIsImdldFRvZ2dsZWRDb250ZW50IiwiJGNvbnRyb2wiLCJjbG9zZXN0IiwiaW5pdFRvZ2dsZWRDb250ZW50IiwiJGNvbnRlbnQiLCJzaG93VG9nZ2xlZENvbnRlbnQiLCJoaWRlVG9nZ2xlZENvbnRlbnQiLCJjb250ZW50IiwiaGFuZGxlUmFkaW9Db250ZW50Iiwic2VsZWN0b3IiLCIkZm9ybSIsImhhbmRsZUNoZWNrYm94Q29udGVudCIsImhhbmRsZUxpbmtDb250ZW50IiwiJGV2ZW50IiwiaGFuZGxlU2VsZWN0Q29udGVudCIsInZhbCIsIiRjb250YWluZXIiLCJlbGVtZW50U2VsZWN0b3IiLCJldmVudFNlbGVjdG9ycyIsImhhbmRsZXIiLCJkZWZlcnJlZCIsImV2ZW50IiwiJGNvbnRyb2xzIiwiZXZlbnRTZWxlY3RvciIsInNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCIsInJhZGlvR3JvdXBzIiwibWFwIiwiZ3JvdXBOYW1lIiwiaW5BcnJheSIsImdldEV2ZW50U2VsZWN0b3JzRm9yUmFkaW9Hcm91cHMiLCJzaG93SGlkZUNoZWNrYm94VG9nZ2xlZENvbnRlbnQiLCJzaG93SGlkZUxpbmtUb2dnbGVkQ29udGVudCIsInNob3dIaWRlU2VsZWN0VG9nZ2xlZENvbnRlbnQiLCJvZmYiLCJwcm90b3R5cGUiLCJoZWFkaW5nQ2VsbHMiLCJ0b2dnbGVUaXBzIiwidmFsaWRhdGVQYXNzd29yZCIsInBhc3N3b3JkIiwiJHRoYXQiLCJsaXZlUmVnaW9uIiwidG9nZ2xlVGlwIiwiaHRtbCIsIm1lc3NhZ2UiLCJzZXRUaW1lb3V0IiwiYmVmb3JlIiwiJHBhc3N3b3JkSW5wdXQiLCJ2YWxpZGF0ZVBhc3N3b3JkSHRtbCIsImZvcm1zIiwic2VsZWN0Mk1vZGVsTWF0Y2hlciIsInBhcmFtcyIsInBhcmVudFRleHQiLCJ0ZXJtIiwidHJpbSIsImNoaWxkcmVuIiwiZXh0ZW5kIiwiYyIsImNoaWxkIiwic3BsaWNlIiwib3JpZ2luYWwiLCJ0b1VwcGVyQ2FzZSIsImluaXRpYWxpc2VTaG93UGFzc3dvcmQiLCIkc2hvd0J1dHRvbiIsImNsYXNzIiwiYXJpYUxhYmVsIiwiYWZ0ZXIiLCJiYWNrTGluayIsImhyZWYiLCJoaXN0b3J5IiwiYmFjayIsInNlbGVjdDIiLCJtYXRjaGVyIiwiYWxlcnQiLCJwYXJlbnQiLCJpbmZvIiwidG9nZ2xlIiwibWV0YSIsInNlYXJjaEZpZWxkcyIsImxvYWRlciIsImIxIiwiYjIiLCJmb3JtIiwiZm9ybVJlZ2lzdGVyIiwiJHN1Ym1pdEJ1dHRvbnMiLCIkc3VibWl0QnV0dG9uIiwiZXEiLCJvdXRlcldpZHRoIiwicG9zaXRpb24iLCJ0YWJJZCIsInNlc3Npb25EdXJhdGlvbkluTWludXRlcyIsIm5vdGlmeVVzZXJXaGVuU2Vzc2lvbk1pbnV0ZXNSZW1haW4iLCJnZXRTZXNzaW9uTm90aWZ5VXNlckluU2Vjb25kcyIsInVwZGF0ZVNlc3Npb25Db3VudGVyRGlzcGxheSIsInRvdGFsU2Vjb25kc1JlbWFpbmluZyIsIm1pbnV0ZXNSZW1haW5pbmciLCJNYXRoIiwiZmxvb3IiLCJzZWNvbmRzUmVtYWluaW5nIiwidG9TdHJpbmciLCJwYWRTdGFydCIsInNlc3Npb25UaW1lb3V0IiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsIm9uZm9jdXMiLCJjb3VudFRpbWVEaWZmIiwidHJpZ2dlckNhbGxiYWNrSW5NaWxsaXNlY29uZHMiLCJzZXRJdGVtIiwiZm9jdXMiLCJzdGFydFRpbWVyIiwidGltZW91dFRpbWVyIiwic2V0SW50ZXJ2YWwiLCJnZXRJdGVtIiwiY2xlYXJJbnRlcnZhbCIsImxvY2F0aW9uIiwicmVsb2FkIiwiY2FsbFRpbWVvdXQiLCJwYXRobmFtZSIsInNob3dIaWRlQ29udGVudCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQUEsYUFBQSxDQUNBQyxnQkFBQSwwQkFDQUMsT0FBQSxpQkFDQUMsR0FBQSxNQUNBQyxPQUFBLE9BQ0FDLE9BQUEsT0FDQUMsc0JBQUEseUJBR0FDLHFCQUFBLENBQ0FDLFFBQUEsSUFDQUMsUUFBQSxFQUNBQyxPQUFBLHFCQUdBQyxZQUFBLENBQ0FDLE9BQUEsU0FBQUMsR0FDQSxHQUFBQyxPQUFBQyxRQUlBLE9BQUFELE9BQUFDLFFBQUFDLElBQUFILEVBQ0EsRUFDQUcsSUFBQSxTQUFBSCxHQUNBLEdBQUFDLE9BQUFDLFFBQUEsQ0FJQSxJQUFBRSxFQUFBSCxPQUFBQyxRQUFBQyxJQUFBSCxHQUNBLE9BQUFJLEVBQ0FDLEtBQUFDLE1BQUFGLEdBRUFBLENBTkEsQ0FPQSxFQUNBRyxJQUFBLFNBQUFQLEVBQUFJLEdBQ0EsR0FBQUgsT0FBQUMsUUFJQSxPQUFBRCxPQUFBQyxRQUFBSyxJQUFBUCxFQUFBSSxFQUFBVixxQkFDQSxF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QUFDLFdBQUFDLFNBQUEsT0FDQSxDQUdBLFNBQUFDLGlCQUNBN1UsT0FBQThVLGFBQUFDLFdBQUEsT0FFQS9VLE9BQUFnVixRQUFBLFdBQ0FDLGVBQ0EsRUFFQVosNEJBQUFELGlDQUdBLE1BQUFjLEVBQ0EsUUFBQWhCLHlCQUFBRSxpQ0FFQS9DLFlBQUEsV0FHQXJSLE9BQUE4VSxhQUFBSyxRQUFBLFlBRUF0VSxFQUFBLDRCQUFBQyxPQUNBRCxFQUFBLGlCQUFBdVUsUUFFQUMsWUFDQSxHQUFBSCxFQUNBLENBYUEsSUFBQUksYUFFQSxTQUFBRCxhQUNBLElBQUFmLEVBQUFGLGdDQUVBa0IsYUFBQUMsYUFBQSxXQUNBLE1BQUF2VixPQUFBOFUsYUFBQVUsUUFBQSxVQUNBQyxjQUFBSCxjQUNBSSxTQUFBQyxVQUlBdEIsOEJBREFDLEdBR0FBLEdBQUEsRUFDQXNCLGNBQ0EzQixPQUNBZ0IsZUFFQSxPQUNBLENBRUEsU0FBQVcsY0FDQUgsY0FBQUgsY0FDQXRWLE9BQUE4VSxhQUFBSyxRQUFBLE1BQUFPLFNBQUFHLFVBQ0FILFNBQUE5QyxLQUFBLFVBQ0EsQ0FFQSxTQUFBcUMsa0JBQ0EsSUFBQXZVLE1BQUFDLFVBQUFrSCxPQUFBb00sUUFDQSxJQUVBQywyQkFDQWxVLE9BQUE4VSxhQUFBSyxRQUFBLE1BQUFPLFNBQUFHLFVBQ0FKLGNBQUFILGNBQ0FJLFNBQUFDLFNBRUEsQ0FoREE5VSxFQUFBLGlCQUFBOEgsR0FBQSxjQUNBOE0sY0FBQUgsY0FDQXRWLE9BQUE4VSxhQUFBSyxRQUFBLFlBQ0FPLFNBQUFDLFFBQUEsSUFHQTlVLEVBQUEsa0JBQUE4SCxHQUFBLGNBQ0E4TSxjQUFBSCxjQUNBSSxTQUFBOUMsS0FBQSxjQTRDQSxJQUFBa0QsZ0JBQUEsSUFBQTNVLE1BQUFtTixnQkFDQXdILGdCQUFBelEsT0FFQWxFLE1BQUFDLFFBQUFpRSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIENPT0tJRV9OQU1FUyA9IHtcbiAgUFJFRkVSRU5DRVNfU0VUOiBcImNvb2tpZXNfcHJlZmVyZW5jZXNfc2V0XCIsXG4gIFBPTElDWTogXCJjb29raWVzX3BvbGljeVwiLFxuICBHQTogXCJfZ2FcIixcbiAgR0FfR0lEOiBcIl9naWRcIixcbiAgR0FfR0FUOiBcIl9nYXRcIixcbiAgVVNFUl9CQU5ORVJfTEFTVF9TRUVOOiBcInVzZXJfYmFubmVyX2xhc3Rfc2VlblwiLFxufTtcblxudmFyIEdPVlVLX0NPT0tJRV9PUFRJT05TID0ge1xuICBleHBpcmVzOiAzNjUsIC8vIGRheXNcbiAgc2VjdXJlOiB0cnVlLFxuICBkb21haW46IFwiLmVkdWNhdGlvbi5nb3YudWtcIixcbn07XG5cbnZhciBHb3ZVS0Nvb2tpZSA9IHtcbiAgZ2V0UmF3OiBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuZ2V0KG5hbWUpO1xuICB9LFxuICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHdpbmRvdy5Db29raWVzLmdldChuYW1lKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBHT1ZVS19DT09LSUVfT1BUSU9OUyk7XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAoIXdpbmRvdy5Db29raWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHdpbmRvdy5Db29raWVzLnJlbW92ZShuYW1lLCBHT1ZVS19DT09LSUVfT1BUSU9OUyk7XG4gIH0sXG59O1xuXG4vLyBmdW5jdGlvbiB0aGF0IHdpbGwgcmVtb3ZlIGFueSBleGlzdGluZyB0cmFja2luZyBjb29raWVzIG9uIHBhZ2UgbG9hZFxuKGZ1bmN0aW9uICgpIHtcbiAgR292VUtDb29raWUucmVtb3ZlKENPT0tJRV9OQU1FUy5QT0xJQ1kpO1xuICBHb3ZVS0Nvb2tpZS5yZW1vdmUoQ09PS0lFX05BTUVTLlBSRUZFUkVOQ0VTX1NFVCk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuR0EpO1xuICBHb3ZVS0Nvb2tpZS5yZW1vdmUoQ09PS0lFX05BTUVTLkdBX0dBVCk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuR0FfR0lEKTtcbn0pKCk7XG5cbi8qKlxuICogU2VjdGlvbiB0byBoYW5kbGUgcmV2aWV3IHVzZXJzIGJhbm5lclxuICogSXQgdXNlcyBhIGRlZGljYXRlZCBjb29raWUgJ3VzZXJfYmFubmVyX2xhc3Rfc2VlbidcbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyKCkge1xuICB2YXIgbGFzdFNlZW4gPSBHb3ZVS0Nvb2tpZS5nZXRSYXcoQ09PS0lFX05BTUVTLlVTRVJfQkFOTkVSX0xBU1RfU0VFTik7XG4gIGlmIChsYXN0U2Vlbikge1xuICAgIHZhciBudW1iZXJPZkRheXMgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0U2VlbikgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgaWYgKG51bWJlck9mRGF5cyA+IDkwKSB7XG4gICAgICAvLyBpZiB0aGUgcGVyaW9kIGlzIGxvbmdlciB0aGFuIDkwIGRheXMgc2hvdy91cGRhdGUgdGhlIGJhbm5lclxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGlmIHRoZXJlIGlzIG5vIHZhbHVlIHRoZW4gc2hvdy91cGRhdGUgdGhlIGJhbm5lclxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2hvd1Jldmlld1VzZXJzQmFubmVyKCkge1xuICAkKFwiI3Jldmlldy11c2Vycy1iYW5uZXJcIikuc2hvdygpO1xufVxuXG5mdW5jdGlvbiBzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuKCkge1xuICBHb3ZVS0Nvb2tpZS5zZXQoQ09PS0lFX05BTUVTLlVTRVJfQkFOTkVSX0xBU1RfU0VFTiwgbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMgKi9cbmZ1bmN0aW9uIGxvYWRSZXZpZXdVc2Vyc0Jhbm5lcigpIHtcbiAgaWYgKGNoZWNrQ29uZGl0aW9uRm9yVXNlcnNCYW5uZXIoKSkge1xuICAgIHNob3dSZXZpZXdVc2Vyc0Jhbm5lcigpO1xuICB9XG59XG5cbi8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAqL1xuZnVuY3Rpb24gdXBkYXRlQ29va2llUmV2aWV3VXNlcnNCYW5uZXIoKSB7XG4gIGlmIChjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyKCkpIHtcbiAgICBzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuKCk7XG4gIH1cbn1cbiIsIi8vIDxkZXRhaWxzPiBwb2x5ZmlsbFxuLy8gaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWRldGFpbHNcblxuLy8gRkYgU3VwcG9ydCBmb3IgSFRNTDUncyA8ZGV0YWlscz4gYW5kIDxzdW1tYXJ5PlxuLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTkxNzM3XG5cbi8vIGh0dHA6Ly93d3cuc2l0ZXBvaW50LmNvbS9maXhpbmctdGhlLWRldGFpbHMtZWxlbWVudC9cblxuKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgdmFyIEdPVlVLID0gZ2xvYmFsLkdPVlVLIHx8IHt9O1xuXG4gIEdPVlVLLmRldGFpbHMgPSB7XG4gICAgTkFUSVZFX0RFVEFJTFM6IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGV0YWlsc1wiKS5vcGVuID09PSBcImJvb2xlYW5cIixcbiAgICBLRVlfRU5URVI6IDEzLFxuICAgIEtFWV9TUEFDRTogMzIsXG5cbiAgICAvLyBDcmVhdGUgYSBzdGFydGVkIGZsYWcgc28gd2UgY2FuIHByZXZlbnQgdGhlIGluaXRpYWxpc2F0aW9uXG4gICAgLy8gZnVuY3Rpb24gZmlyaW5nIGZyb20gYm90aCBET01Db250ZW50TG9hZGVkIGFuZCB3aW5kb3cub25sb2FkXG4gICAgc3RhcnRlZDogZmFsc2UsXG5cbiAgICAvLyBBZGQgZXZlbnQgY29uc3RydWN0IGZvciBtb2Rlcm4gYnJvd3NlcnMgb3IgSUVcbiAgICAvLyB3aGljaCBmaXJlcyB0aGUgY2FsbGJhY2sgd2l0aCBhIHByZS1jb252ZXJ0ZWQgdGFyZ2V0IHJlZmVyZW5jZVxuICAgIGFkZEV2ZW50OiBmdW5jdGlvbiAobm9kZSwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmIChub2RlLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGUsIGUudGFyZ2V0KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChub2RlLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgIG5vZGUuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhlLCBlLnNyY0VsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlRXZlbnQ6IGZ1bmN0aW9uIChub2RlLCB0eXBlKSB7XG4gICAgICBpZiAobm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAqL1xuICAgICAgICAgIGZ1bmN0aW9uIChlKSB7fSxcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5kZXRhY2hFdmVudCkge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMgKi9cbiAgICAgICAgbm9kZS5kZXRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBmdW5jdGlvbiAoZSkge30pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBDcm9zcy1icm93c2VyIGNoYXJhY3RlciBjb2RlIC8ga2V5IHByZXNzZWRcbiAgICBjaGFyQ29kZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZS53aGljaCA9PT0gXCJudW1iZXJcIiA/IGUud2hpY2ggOiBlLmtleUNvZGU7XG4gICAgfSxcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgcHJldmVudGluZyBkZWZhdWx0IGFjdGlvblxuICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBIYW5kbGUgY3Jvc3MtbW9kYWwgY2xpY2sgZXZlbnRzXG4gICAgYWRkQ2xpY2tFdmVudDogZnVuY3Rpb24gKG5vZGUsIGNhbGxiYWNrKSB7XG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KG5vZGUsIFwia2V5cHJlc3NcIiwgZnVuY3Rpb24gKGUsIHRhcmdldCkge1xuICAgICAgICAvLyBXaGVuIHRoZSBrZXkgZ2V0cyBwcmVzc2VkIC0gY2hlY2sgaWYgaXQgaXMgZW50ZXIgb3Igc3BhY2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX0VOVEVSIHx8XG4gICAgICAgICAgR09WVUsuZGV0YWlscy5jaGFyQ29kZShlKSA9PT0gR09WVUsuZGV0YWlscy5LRVlfU1BBQ0VcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInN1bW1hcnlcIikge1xuICAgICAgICAgICAgLy8gUHJldmVudCBzcGFjZSBmcm9tIHNjcm9sbGluZyB0aGUgcGFnZVxuICAgICAgICAgICAgLy8gYW5kIGVudGVyIGZyb20gc3VibWl0dGluZyBhIGZvcm1cbiAgICAgICAgICAgIEdPVlVLLmRldGFpbHMucHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgICAgICAvLyBDbGljayB0byBsZXQgdGhlIGNsaWNrIGV2ZW50IGRvIGFsbCB0aGUgbmVjZXNzYXJ5IGFjdGlvblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGljaykge1xuICAgICAgICAgICAgICB0YXJnZXQuY2xpY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGV4Y2VwdCBTYWZhcmkgNS4xIGFuZCB1bmRlciBkb24ndCBzdXBwb3J0IC5jbGljaygpIGhlcmVcbiAgICAgICAgICAgICAgY2FsbGJhY2soZSwgdGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcmV2ZW50IGtleXVwIHRvIHByZXZlbnQgY2xpY2tpbmcgdHdpY2UgaW4gRmlyZWZveCB3aGVuIHVzaW5nIHNwYWNlIGtleVxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCBcImtleXVwXCIsIGZ1bmN0aW9uIChlLCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX1NQQUNFKSB7XG4gICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZSA9PT0gXCJTVU1NQVJZXCIpIHtcbiAgICAgICAgICAgIEdPVlVLLmRldGFpbHMucHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChlLCB0YXJnZXQpIHtcbiAgICAgICAgY2FsbGJhY2soZSwgdGFyZ2V0KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIG5lYXJlc3QgYW5jZXN0b3IgZWxlbWVudCBvZiBhIG5vZGUgdGhhdCBtYXRjaGVzIGEgZ2l2ZW4gdGFnIG5hbWVcbiAgICBnZXRBbmNlc3RvcjogZnVuY3Rpb24gKG5vZGUsIG1hdGNoKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGlmICghbm9kZSB8fCBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG1hdGNoKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgIH0gd2hpbGUgKG5vZGUpO1xuXG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9LFxuXG4gICAgLy8gSW5pdGlhbGlzYXRpb24gZnVuY3Rpb25cbiAgICBhZGREZXRhaWxzUG9seWZpbGw6IGZ1bmN0aW9uIChsaXN0LCBjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCBkb2N1bWVudC5ib2R5O1xuICAgICAgLy8gSWYgdGhpcyBoYXMgYWxyZWFkeSBoYXBwZW5lZCwganVzdCByZXR1cm5cbiAgICAgIC8vIGVsc2Ugc2V0IHRoZSBmbGFnIHNvIGl0IGRvZXNuJ3QgaGFwcGVuIGFnYWluXG4gICAgICBpZiAoR09WVUsuZGV0YWlscy5zdGFydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIEdPVlVLLmRldGFpbHMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAvLyBHZXQgdGhlIGNvbGxlY3Rpb24gb2YgZGV0YWlscyBlbGVtZW50cywgYnV0IGlmIHRoYXQncyBlbXB0eVxuICAgICAgLy8gdGhlbiB3ZSBkb24ndCBuZWVkIHRvIGJvdGhlciB3aXRoIHRoZSByZXN0IG9mIHRoZSBzY3JpcHRpbmdcbiAgICAgIGlmICgobGlzdCA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRldGFpbHNcIikpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBlbHNlIGl0ZXJhdGUgdGhyb3VnaCB0aGVtIHRvIGFwcGx5IHRoZWlyIGluaXRpYWwgc3RhdGVcbiAgICAgIHZhciBuID0gbGlzdC5sZW5ndGg7XG4gICAgICB2YXIgaSA9IDA7XG4gICAgICBmb3IgKGk7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgdmFyIGRldGFpbHMgPSBsaXN0W2ldO1xuXG4gICAgICAgIC8vIFNhdmUgc2hvcnRjdXRzIHRvIHRoZSBpbm5lciBzdW1tYXJ5IGFuZCBjb250ZW50IGVsZW1lbnRzXG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5ID0gZGV0YWlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInN1bW1hcnlcIikuaXRlbSgwKTtcbiAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQgPSBkZXRhaWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGl2XCIpLml0ZW0oMCk7XG5cbiAgICAgICAgaWYgKCFkZXRhaWxzLl9fc3VtbWFyeSB8fCAhZGV0YWlscy5fX2NvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIGNvbnRlbnQgZG9lc24ndCBoYXZlIGFuIElELCBhc3NpZ24gaXQgb25lIG5vd1xuICAgICAgICAvLyB3aGljaCB3ZSdsbCBuZWVkIGZvciB0aGUgc3VtbWFyeSdzIGFyaWEtY29udHJvbHMgYXNzaWdubWVudFxuICAgICAgICBpZiAoIWRldGFpbHMuX19jb250ZW50LmlkKSB7XG4gICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuaWQgPSBcImRldGFpbHMtY29udGVudC1cIiArIGk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgQVJJQSByb2xlPVwiZ3JvdXBcIiB0byBkZXRhaWxzXG4gICAgICAgIGRldGFpbHMuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImdyb3VwXCIpO1xuXG4gICAgICAgIC8vIEFkZCByb2xlPWJ1dHRvbiB0byBzdW1tYXJ5XG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJidXR0b25cIik7XG5cbiAgICAgICAgLy8gQWRkIGFyaWEtY29udHJvbHNcbiAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLCBkZXRhaWxzLl9fY29udGVudC5pZCk7XG5cbiAgICAgICAgLy8gU2V0IHRhYkluZGV4IHNvIHRoZSBzdW1tYXJ5IGlzIGtleWJvYXJkIGFjY2Vzc2libGUgZm9yIG5vbi1uYXRpdmUgZWxlbWVudHNcbiAgICAgICAgLy8gaHR0cDovL3d3dy5zYWxpZW5jZXMuY29tL2Jyb3dzZXJCdWdzL3RhYkluZGV4Lmh0bWxcbiAgICAgICAgaWYgKCFHT1ZVSy5kZXRhaWxzLk5BVElWRV9ERVRBSUxTKSB7XG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkudGFiSW5kZXggPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV0ZWN0IGluaXRpYWwgb3BlbiBzdGF0ZVxuICAgICAgICB2YXIgb3BlbkF0dHIgPSBkZXRhaWxzLmdldEF0dHJpYnV0ZShcIm9wZW5cIikgIT09IG51bGw7XG4gICAgICAgIGlmIChvcGVuQXR0ciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgIGRldGFpbHMuX19jb250ZW50LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgIGRldGFpbHMuX19jb250ZW50LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgICAgIGRldGFpbHMuX19jb250ZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYSBjaXJjdWxhciByZWZlcmVuY2UgZnJvbSB0aGUgc3VtbWFyeSBiYWNrIHRvIGl0c1xuICAgICAgICAvLyBwYXJlbnQgZGV0YWlscyBlbGVtZW50LCBmb3IgY29udmVuaWVuY2UgaW4gdGhlIGNsaWNrIGhhbmRsZXJcbiAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuX19kZXRhaWxzID0gZGV0YWlscztcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIG5vdCBhIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgY3JlYXRlIGFuIGFycm93XG4gICAgICAgIC8vIGluc2lkZSB0aGUgc3VtbWFyeVxuICAgICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgICB2YXIgdHdpc3R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XG5cbiAgICAgICAgICBpZiAob3BlbkF0dHIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHR3aXN0eS5jbGFzc05hbWUgPSBcImFycm93IGFycm93LW9wZW5cIjtcbiAgICAgICAgICAgIHR3aXN0eS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlxcdTI1YmNcIikpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0d2lzdHkuY2xhc3NOYW1lID0gXCJhcnJvdyBhcnJvdy1jbG9zZWRcIjtcbiAgICAgICAgICAgIHR3aXN0eS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlxcdTI1YmFcIikpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5Ll9fdHdpc3R5ID0gZGV0YWlscy5fX3N1bW1hcnkuaW5zZXJ0QmVmb3JlKFxuICAgICAgICAgICAgdHdpc3R5LFxuICAgICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuZmlyc3RDaGlsZCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5Ll9fdHdpc3R5LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBCaW5kIGEgY2xpY2sgZXZlbnQgdG8gaGFuZGxlIHN1bW1hcnkgZWxlbWVudHNcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkQ2xpY2tFdmVudChjb250YWluZXIsIGZ1bmN0aW9uIChlLCBzdW1tYXJ5KSB7XG4gICAgICAgIGlmICghKHN1bW1hcnkgPSBHT1ZVSy5kZXRhaWxzLmdldEFuY2VzdG9yKHN1bW1hcnksIFwic3VtbWFyeVwiKSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR09WVUsuZGV0YWlscy5zdGF0ZWNoYW5nZShzdW1tYXJ5KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBEZWZpbmUgYSBzdGF0ZWNoYW5nZSBmdW5jdGlvbiB0aGF0IHVwZGF0ZXMgYXJpYS1leHBhbmRlZCBhbmQgc3R5bGUuZGlzcGxheVxuICAgIC8vIEFsc28gdXBkYXRlIHRoZSBhcnJvdyBwb3NpdGlvblxuICAgIHN0YXRlY2hhbmdlOiBmdW5jdGlvbiAoc3VtbWFyeSkge1xuICAgICAgdmFyIGV4cGFuZGVkID1cbiAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19zdW1tYXJ5LmdldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgdmFyIGhpZGRlbiA9XG4gICAgICAgIHN1bW1hcnkuX19kZXRhaWxzLl9fY29udGVudC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSA9PT0gXCJ0cnVlXCI7XG5cbiAgICAgIHN1bW1hcnkuX19kZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoXG4gICAgICAgIFwiYXJpYS1leHBhbmRlZFwiLFxuICAgICAgICBleHBhbmRlZCA/IFwiZmFsc2VcIiA6IFwidHJ1ZVwiLFxuICAgICAgKTtcbiAgICAgIHN1bW1hcnkuX19kZXRhaWxzLl9fY29udGVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgIFwiYXJpYS1oaWRkZW5cIixcbiAgICAgICAgaGlkZGVuID8gXCJmYWxzZVwiIDogXCJ0cnVlXCIsXG4gICAgICApO1xuXG4gICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LnN0eWxlLmRpc3BsYXkgPSBleHBhbmRlZCA/IFwibm9uZVwiIDogXCJcIjtcblxuICAgICAgICB2YXIgaGFzT3BlbkF0dHIgPSBzdW1tYXJ5Ll9fZGV0YWlscy5nZXRBdHRyaWJ1dGUoXCJvcGVuXCIpICE9PSBudWxsO1xuICAgICAgICBpZiAoIWhhc09wZW5BdHRyKSB7XG4gICAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuc2V0QXR0cmlidXRlKFwib3BlblwiLCBcIm9wZW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3VtbWFyeS5fX3R3aXN0eSkge1xuICAgICAgICBzdW1tYXJ5Ll9fdHdpc3R5LmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gZXhwYW5kZWQgPyBcIlxcdTI1YmFcIiA6IFwiXFx1MjViY1wiO1xuICAgICAgICBzdW1tYXJ5Ll9fdHdpc3R5LnNldEF0dHJpYnV0ZShcbiAgICAgICAgICBcImNsYXNzXCIsXG4gICAgICAgICAgZXhwYW5kZWQgPyBcImFycm93IGFycm93LWNsb3NlZFwiIDogXCJhcnJvdyBhcnJvdy1vcGVuXCIsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBkZXN0cm95OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgR09WVUsuZGV0YWlscy5yZW1vdmVFdmVudChub2RlLCBcImNsaWNrXCIpO1xuICAgIH0sXG5cbiAgICAvLyBCaW5kIHR3byBsb2FkIGV2ZW50cyBmb3IgbW9kZXJuIGFuZCBvbGRlciBicm93c2Vyc1xuICAgIC8vIElmIHRoZSBmaXJzdCBvbmUgZmlyZXMgaXQgd2lsbCBzZXQgYSBmbGFnIHRvIGJsb2NrIHRoZSBzZWNvbmQgb25lXG4gICAgLy8gYnV0IGlmIGl0J3Mgbm90IHN1cHBvcnRlZCB0aGVuIHRoZSBzZWNvbmQgb25lIHdpbGwgZmlyZVxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkRXZlbnQoXG4gICAgICAgIGRvY3VtZW50LFxuICAgICAgICBcIkRPTUNvbnRlbnRMb2FkZWRcIixcbiAgICAgICAgR09WVUsuZGV0YWlscy5hZGREZXRhaWxzUG9seWZpbGwsXG4gICAgICApO1xuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudCh3aW5kb3csIFwibG9hZFwiLCBHT1ZVSy5kZXRhaWxzLmFkZERldGFpbHNQb2x5ZmlsbCk7XG4gICAgfSxcbiAgfTtcbiAgZ2xvYmFsLkdPVlVLID0gR09WVUs7XG59KSh3aW5kb3cpO1xuIiwidmFyIE5TQSA9IE5TQSB8fCB7fTtcbmNvbnN0IGZpbHRlckJveGVzID0gJChcIi5maWx0ZXItYm94XCIpO1xuXG5OU0EuZmlsdGVycyA9IHtcbiAgaW5pdCgpIHtcbiAgICBmdW5jdGlvbiBjaGVja0NvdW50VGV4dChjaGVja2JveGVzKSB7XG4gICAgICByZXR1cm4gY2hlY2tib3hlcy5maWx0ZXIoXCI6Y2hlY2tlZFwiKS5sZW5ndGggPiAwXG4gICAgICAgID8gYCR7Y2hlY2tib3hlcy5maWx0ZXIoXCI6Y2hlY2tlZFwiKS5sZW5ndGh9IHNlbGVjdGVkYFxuICAgICAgICA6IFwiXCI7XG4gICAgfVxuXG4gICAgZmlsdGVyQm94ZXMuZWFjaCgoXywgZWxlbWVudCkgPT4ge1xuICAgICAgY29uc3QgZmlsdGVyQm94ID0gJChlbGVtZW50KTtcbiAgICAgIGNvbnN0IGhlYWRlciA9IGZpbHRlckJveC5maW5kKFwiLmNvbnRhaW5lci1oZWFkXCIpO1xuICAgICAgY29uc3QgdGl0bGUgPSBoZWFkZXIuZmluZChcIi5vcHRpb24tc2VsZWN0LWxhYmVsXCIpO1xuICAgICAgY29uc3QgY2hlY2tib3hlcyA9IGZpbHRlckJveC5maW5kKFwiaW5wdXQ6Y2hlY2tib3hcIik7XG4gICAgICBjb25zdCBidXR0b24gPSAkKFwiPGJ1dHRvbiAvPlwiKS5hZGRDbGFzcyhcImpzLWNvbnRhaW5lci1oZWFkXCIpO1xuICAgICAgY29uc3QgY2hlY2tDb3VudCA9ICQoXCI8ZGl2IC8+XCIpXG4gICAgICAgIC5hZGRDbGFzcyhcImpzLXNlbGVjdGVkLWNvdW50ZXJcIilcbiAgICAgICAgLnRleHQoKCkgPT4gY2hlY2tDb3VudFRleHQoY2hlY2tib3hlcykpO1xuXG4gICAgICBidXR0b25cbiAgICAgICAgLm9uKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRhcmdldC5uZXh0KCk7XG4gICAgICAgICAgaWYgKHRhcmdldC5oYXNDbGFzcyhcImNsb3NlZFwiKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5zaG93KCk7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlQ2xhc3MoXCJjbG9zZWRcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaGlkZSgpO1xuICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKFwiY2xvc2VkXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgICAgICAuYXBwZW5kKHRpdGxlLCBjaGVja0NvdW50KTtcblxuICAgICAgaGVhZGVyLnJlcGxhY2VXaXRoKGJ1dHRvbik7XG5cbiAgICAgIGNoZWNrYm94ZXMub24oXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgICBjaGVja0NvdW50LnRleHQoKCkgPT4gY2hlY2tDb3VudFRleHQoY2hlY2tib3hlcykpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG59O1xuXG5pZiAoZmlsdGVyQm94ZXMubGVuZ3RoID4gMCkge1xuICBOU0EuZmlsdGVycy5pbml0KCk7XG59XG4iLCJmdW5jdGlvbiB0b0tlYmFiQ2FzZShzdHIpIHtcbiAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgXCItXCIpO1xufVxuXG5mdW5jdGlvbiBoaWRlRWxlbWVudCgpIHtcbiAgJCh0aGlzKS5oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIHVuY2hlY2tDaGVja2JveCgpIHtcbiAgJCh0aGlzKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RTdGFydGluZ051bWJlckZyb21JZChlbGVtZW50SWQpIHtcbiAgY29uc3QgZWxlbWVudCA9ICQoYCMke2VsZW1lbnRJZH1gKTtcbiAgY29uc3Qgc3RhcnRpbmdOdW1iZXIgPSBwYXJzZUludChlbGVtZW50LnByb3AoXCJpZFwiKS5zcGxpdChcIi1cIikucG9wKCksIDEwKTtcbiAgcmV0dXJuIHN0YXJ0aW5nTnVtYmVyO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0Rmlyc3RQYXJ0RnJvbUlkKGlkKSB7XG4gIGNvbnN0IHBhcnRzID0gaWQuc3BsaXQoXCItXCIpO1xuICBpZiAocGFydHMubGVuZ3RoID49IDIpIHtcbiAgICBwYXJ0cy5wb3AoKTtcbiAgICByZXR1cm4gYCR7cGFydHMuam9pbihcIi1cIil9LWA7XG4gIH1cbiAgcmV0dXJuIGlkO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDb3VudChjYXRlZ29yeU5hbWUpIHtcbiAgY29uc3Qgc2FmZUNhdGVnb3J5TmFtZSA9IHRvS2ViYWJDYXNlKGNhdGVnb3J5TmFtZSk7XG4gIGNvbnN0IGNoZWNrZWRDb3VudCA9ICQoXG4gICAgYC4ke3NhZmVDYXRlZ29yeU5hbWV9IC5nb3Z1ay1jaGVja2JveGVzX19pbnB1dDpjaGVja2VkYCxcbiAgKS5sZW5ndGg7XG5cbiAgJChgIyR7c2FmZUNhdGVnb3J5TmFtZX0tY291bnRgKS50ZXh0KGNoZWNrZWRDb3VudCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhdGVnb3J5SGVhZGVyKGNhdGVnb3J5TmFtZSkge1xuICBjb25zdCBzYWZlQ2F0ZWdvcnlOYW1lID0gdG9LZWJhYkNhc2UoY2F0ZWdvcnlOYW1lKTtcbiAgY29uc3QgY2F0ZWdvcnlIZWFkZXIgPSAkKGAjJHtzYWZlQ2F0ZWdvcnlOYW1lfS10ZXh0YCk7XG4gIGNvbnN0IGlzQW55Q2hlY2tlZEluQ2F0ZWdvcnkgPVxuICAgICQoYGlucHV0W2lkXj0nc2hvdy1oaWRlLSR7c2FmZUNhdGVnb3J5TmFtZX0nXTpjaGVja2VkYCkubGVuZ3RoID4gMDtcbiAgY2F0ZWdvcnlIZWFkZXIuY3NzKFwiZGlzcGxheVwiLCBpc0FueUNoZWNrZWRJbkNhdGVnb3J5ID8gXCJibG9ja1wiIDogXCJub25lXCIpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVOb0ZpbHRlck1lc3NhZ2UoKSB7XG4gIGNvbnN0IGlzQW55Q2hlY2tlZEdsb2JhbCA9XG4gICAgJChcIi5nb3Z1ay1jaGVja2JveGVzX19pbnB1dC5kZmUtZmlsdGVyLWlucHV0OmNoZWNrZWRcIikubGVuZ3RoID4gMDtcbiAgJChcIiNzaG93LWhpZGUtc2VsZWN0ZWQtZmlsdGVyc1wiKS5jc3MoXG4gICAgXCJkaXNwbGF5XCIsXG4gICAgaXNBbnlDaGVja2VkR2xvYmFsID8gXCJub25lXCIgOiBcImJsb2NrXCIsXG4gICk7XG59XG5cbmZ1bmN0aW9uIHNob3dNZShib3hJZCwgY2F0ZWdvcnlOYW1lLCBjaGVja2VkRWxlbWVudElkKSB7XG4gIGNvbnN0IGlzQ2hlY2tlZCA9ICQoYCMke2NoZWNrZWRFbGVtZW50SWR9YCkucHJvcChcImNoZWNrZWRcIik7XG4gICQoYCMke2JveElkfWApLmNzcyhcImRpc3BsYXlcIiwgaXNDaGVja2VkID8gXCJibG9ja1wiIDogXCJub25lXCIpO1xuXG4gIHVwZGF0ZUNhdGVnb3J5SGVhZGVyKGNhdGVnb3J5TmFtZSk7XG4gIHVwZGF0ZU5vRmlsdGVyTWVzc2FnZSgpO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJBbmRQZXJmb3JtQWN0aW9uKFxuICBmaXJzdFBhcnRPZkxpc3RJZCxcbiAgbGlzdElkU3RhcnRpbmdOdW1iZXIsXG4gIHBlcmZvcm1BY3Rpb24sXG4pIHtcbiAgY29uc3QgZWxlbWVudHNUb1Byb2Nlc3MgPSAkKGBbaWRePVwiJHtmaXJzdFBhcnRPZkxpc3RJZH1cIl1gKS5maWx0ZXIoXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgaWQgPSBwYXJzZUludCh0aGlzLmlkLnNwbGl0KFwiLVwiKS5wb3AoKSwgMTApO1xuICAgICAgcmV0dXJuICFOdW1iZXIuaXNOYU4oaWQpICYmIGlkID4gbGlzdElkU3RhcnRpbmdOdW1iZXI7XG4gICAgfSxcbiAgKTtcblxuICBlbGVtZW50c1RvUHJvY2Vzcy5lYWNoKHBlcmZvcm1BY3Rpb24pO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMgKi9cbmZ1bmN0aW9uIGhpZGVNZShsaXN0SWQsIGNhdGVnb3J5TmFtZSwgY2hlY2tib3hJZCkge1xuICBpZiAoY2F0ZWdvcnlOYW1lID09PSBcIkxhc3QgbG9naW5cIikge1xuICAgIGNvbnN0IGxpc3RJZFN0YXJ0aW5nTnVtYmVyID0gZXh0cmFjdFN0YXJ0aW5nTnVtYmVyRnJvbUlkKGxpc3RJZCk7XG5cbiAgICBjb25zdCBmaXJzdFBhcnRPZkxpc3RJZCA9IGV4dHJhY3RGaXJzdFBhcnRGcm9tSWQobGlzdElkKTtcbiAgICBjb25zdCBmaXJzdFBhcnRPZkNoZWNrYm94SWQgPSBleHRyYWN0Rmlyc3RQYXJ0RnJvbUlkKGNoZWNrYm94SWQpO1xuXG4gICAgZmlsdGVyQW5kUGVyZm9ybUFjdGlvbihcbiAgICAgIGZpcnN0UGFydE9mTGlzdElkLFxuICAgICAgbGlzdElkU3RhcnRpbmdOdW1iZXIsXG4gICAgICBoaWRlRWxlbWVudCxcbiAgICApO1xuICAgIGZpbHRlckFuZFBlcmZvcm1BY3Rpb24oXG4gICAgICBmaXJzdFBhcnRPZkNoZWNrYm94SWQsXG4gICAgICBsaXN0SWRTdGFydGluZ051bWJlcixcbiAgICAgIHVuY2hlY2tDaGVja2JveCxcbiAgICApO1xuXG4gICAgY29uc3QgbGFzdExvZ2luQ2hlY2tib3hlcyA9ICQoXCIubGFzdC1sb2dpbi1jaGVja2JveGVzLWlucHV0XCIpO1xuICAgIGxhc3RMb2dpbkNoZWNrYm94ZXMucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgfVxuICAkKGAjJHtsaXN0SWR9YCkuaGlkZSgpO1xuICAkKGAjJHtjaGVja2JveElkfWApLnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKTtcblxuICB1cGRhdGVDb3VudChjYXRlZ29yeU5hbWUpO1xuICB1cGRhdGVDYXRlZ29yeUhlYWRlcihjYXRlZ29yeU5hbWUpO1xuICB1cGRhdGVOb0ZpbHRlck1lc3NhZ2UoKTtcbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZUZpbHRlcnMoKSB7XG4gICQoXCIuZ292dWstY2hlY2tib3hlc19faW5wdXQuZGZlLWZpbHRlci1pbnB1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBpc0NoZWNrZWQgPSAkKHRoaXMpLnByb3AoXCJjaGVja2VkXCIpO1xuXG4gICAgaWYgKGlzQ2hlY2tlZCkge1xuICAgICAgY29uc3QgY2hlY2tib3hJZCA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuICAgICAgY29uc3QgcGFydHMgPSBjaGVja2JveElkLm1hdGNoKC9zaG93LWhpZGUtKC4rKS0oXFxkKykvKTtcbiAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlOYW1lID0gcGFydHNbMV07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFydHNbMl07XG4gICAgICAgIGNvbnN0IGJveElkID0gYCR7Y2F0ZWdvcnlOYW1lfS1vcHRpb24tJHtpbmRleH1gO1xuXG4gICAgICAgIGlmIChjYXRlZ29yeU5hbWUgPT09IFwibGFzdC1sb2dpblwiICYmIGluZGV4ID09PSBcIjZcIikge1xuICAgICAgICAgIGNvbnN0IGxhc3RMb2dpbkNoZWNrYm94ZXMgPSAkKFwiLmxhc3QtbG9naW4tY2hlY2tib3hlcy1pbnB1dFwiKTtcbiAgICAgICAgICBsYXN0TG9naW5DaGVja2JveGVzLnNsaWNlKDAsIGluZGV4IC0gMSkucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNob3dNZShib3hJZCwgY2F0ZWdvcnlOYW1lLCBjaGVja2JveElkKTtcbiAgICAgICAgdXBkYXRlQ291bnQoY2F0ZWdvcnlOYW1lKTtcbiAgICAgICAgdXBkYXRlQ2F0ZWdvcnlIZWFkZXIoY2F0ZWdvcnlOYW1lKTtcbiAgICAgICAgdXBkYXRlTm9GaWx0ZXJNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGFzdExvZ2luQ2hlY2tib3hDaGFuZ2UoY2hlY2tib3hlcywgbGFzdExvZ2luTGlzdFRhZ3MpIHtcbiAgY2hlY2tib3hlcy5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgaW5kZXggPSBjaGVja2JveGVzLmluZGV4KHRoaXMpO1xuICAgIGxldCBmaXJzdFBhcnRPZkNoZWNrYm94SWQ7XG4gICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgc3dpdGNoICh0aGlzLnZhbHVlKSB7XG4gICAgICAgIGNhc2UgXCJuZXZlclwiOlxuICAgICAgICAgIGxhc3RMb2dpbkxpc3RUYWdzLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgIGNoZWNrYm94ZXMuc2xpY2UoMCwgaW5kZXgpLnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKTtcbiAgICAgICAgICBjaGVja2JveGVzLnNsaWNlKDAsIGluZGV4KS5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgaW5pdGlhbGl6ZUZpbHRlcnMoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNoZWNrYm94ZXMuc2xpY2UoMCwgaW5kZXgpLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgICAgICAgIGluaXRpYWxpemVGaWx0ZXJzKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpcnN0UGFydE9mQ2hlY2tib3hJZCA9IGV4dHJhY3RGaXJzdFBhcnRGcm9tSWQodGhpcy5pZCk7XG4gICAgICBmaWx0ZXJBbmRQZXJmb3JtQWN0aW9uKGZpcnN0UGFydE9mQ2hlY2tib3hJZCwgaW5kZXggKyAxLCB1bmNoZWNrQ2hlY2tib3gpO1xuICAgICAgY2hlY2tib3hlcy5zbGljZSgwLCBpbmRleCkucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgICAgIGZpbHRlckFuZFBlcmZvcm1BY3Rpb24oXCJsYXN0LWxvZ2luLW9wdGlvbi1cIiwgaW5kZXggKyAxLCBoaWRlRWxlbWVudCk7XG4gICAgICB1cGRhdGVDb3VudChcImxhc3QtbG9naW5cIik7XG4gICAgICB1cGRhdGVDYXRlZ29yeUhlYWRlcihcImxhc3QtbG9naW5cIik7XG4gICAgfVxuICB9KTtcbn1cblxuJCgoKSA9PiB7XG4gIGluaXRpYWxpemVGaWx0ZXJzKCk7XG5cbiAgY29uc3QgbGFzdExvZ2luQ2hlY2tib3hlcyA9ICQoXCIubGFzdC1sb2dpbi1jaGVja2JveGVzLWlucHV0XCIpO1xuICBjb25zdCBsYXN0TG9naW5MaXN0VGFncyA9ICQoXCIubGFzdC1sb2dpbi1vcHRpb25cIik7XG5cbiAgbGFzdExvZ2luQ2hlY2tib3hlcy5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICBoYW5kbGVMYXN0TG9naW5DaGVja2JveENoYW5nZShsYXN0TG9naW5DaGVja2JveGVzLCBsYXN0TG9naW5MaXN0VGFncyk7XG4gIH0pO1xufSk7XG4iLCJ2YXIgTlNBID0gTlNBIHx8IHt9O1xuXG5OU0EubW9kYWwgPSB7XG4gIGVsZW1zOiB7XG4gICAgbGlua3M6ICQoXCIubW9kYWwtbGlua1wiKSxcbiAgICBtb2RhbHM6ICQoXCIubW9kYWxcIiksXG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1vZGFsQmcoKTtcbiAgICB0aGlzLnNldFVwRXZlbnRzKCk7XG4gIH0sXG4gIG1vZGFsQmc6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGJnID0gJChcIjxkaXY+XCIpXG4gICAgICAuYWRkQ2xhc3MoXCJtb2RhbC1iZ1wiKVxuICAgICAgLmhpZGUoKVxuICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0LmhpZGVNb2RhbHMoKTtcbiAgICAgIH0pO1xuICAgICQoXCJib2R5XCIpLmFwcGVuZChiZyk7XG4gIH0sXG4gIHNldFVwRXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuZWxlbXMubGlua3Mub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuYXR0cihcImhyZWZcIik7XG4gICAgICB0aGF0LnNob3dNb2RhbCgkKHRhcmdldCkpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhhdC5lbGVtcy5tb2RhbHMuZmluZChcIi5jbG9zZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGF0LmhpZGVNb2RhbHMoKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgICQoXCJib2R5XCIpLm9uKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKChlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IDI3KSB0aGF0LmhpZGVNb2RhbHMoKTtcbiAgICB9KTtcbiAgfSxcbiAgc2hvd01vZGFsOiBmdW5jdGlvbiAobW9kYWwpIHtcbiAgICAkKFwiaHRtbFwiKS5hZGRDbGFzcyhcIm1vZGFsLW9wZW5cIik7XG4gICAgJChcIi5tb2RhbC1iZ1wiKS5zaG93KCk7XG4gICAgbW9kYWwuc2hvdygpO1xuICB9LFxuICBoaWRlTW9kYWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgJChcImh0bWxcIikucmVtb3ZlQ2xhc3MoXCJtb2RhbC1vcGVuXCIpO1xuICAgICQoXCIubW9kYWwtYmdcIikuaGlkZSgpO1xuICAgIHRoaXMuZWxlbXMubW9kYWxzLmhpZGUoKTtcbiAgfSxcbn07XG5cbk5TQS5tb2RhbC5pbml0KCk7XG4iLCJjb25zdCBSRVNQT05TRV9UWVBFX0NPREUgPSBcImNvZGVcIjtcbmNvbnN0IFJFU1BPTlNFX1RZUEVfSURfVE9LRU4gPSBcIklEIHRva2VuXCI7XG5jb25zdCBSRVNQT05TRV9UWVBFX1RPS0VOID0gXCJ0b2tlblwiO1xuXG5jb25zdCBGTE9XX1RZUEVfSU1QTElDSVQgPSBcImltcGxpY2l0XCI7XG5jb25zdCBGTE9XX1RZUEVfQVVUSE9SSVpBVElPTiA9IFwiYXV0aG9yaXphdGlvblwiO1xuY29uc3QgRkxPV19UWVBFX0hZQlJJRCA9IFwiaHlicmlkXCI7XG5cbiQoKCkgPT4ge1xuICBjb25zdCBjcmVhdGVTZXJ2aWNlQ29uZmlnVXJsU2VjdGlvbnMgPSAoXG4gICAgc2VjdGlvbklkLFxuICAgIGZvcm1Hcm91cFNlbGVjdG9yLFxuICAgIGxhYmVsVGV4dCxcbiAgKSA9PiB7XG4gICAgY29uc3QgYWRkQnV0dG9uID0gJChgIyR7c2VjdGlvbklkfS1hZGRgKTtcbiAgICBjb25zdCBmb3JtR3JvdXAgPSAkKGAke2Zvcm1Hcm91cFNlbGVjdG9yfWApO1xuXG4gICAgYWRkQnV0dG9uLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gYWRkSW5wdXRGSWVsZCgpIHtcbiAgICAgIGxldCBjb3VudGVyID0gcGFyc2VJbnQoZm9ybUdyb3VwLmRhdGEoYCR7c2VjdGlvbklkfS1jb3VudGVyYCksIDEwKTtcbiAgICAgIGNvbnN0IG5ld0lucHV0SWQgPSBgJHtzZWN0aW9uSWR9LSR7Y291bnRlcn1gO1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJnb3Z1ay1ib2R5IGRmZS1mbGV4LWNvbnRhaW5lclwiIGlkPVwiJHtzZWN0aW9uSWR9LWlucHV0LWdyb3VwLSR7Y291bnRlcn1cIj5cbiAgICAgICAgPGxhYmVsIGZvcj1cIiR7bmV3SW5wdXRJZH1cIiBjbGFzcz1cImdvdnVrLWxhYmVsIGdvdnVrLWxhYmVsLS1zIGdvdnVrLXZpc3VhbGx5LWhpZGRlblwiPlxuICAgICAgICAgICR7bGFiZWxUZXh0fVxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBkZmUtZmxleC1pbnB1dC1ncm93IGdvdnVrLWlucHV0XCJcbiAgICAgICAgICBpZD1cIiR7bmV3SW5wdXRJZH1cIlxuICAgICAgICAgIG5hbWU9XCIke3NlY3Rpb25JZH1cIlxuICAgICAgICAvPlxuICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwiZ292dWstbGluayBnb3Z1ay1saW5rLS1uby12aXNpdGVkLXN0YXRlIHJlbW92ZS1yZWRpcmVjdFwiIGlkPVwiJHtzZWN0aW9uSWR9LXJlbW92ZS0ke2NvdW50ZXJ9XCIgZGF0YS1ncm91cC1pZD1cIiR7Y291bnRlcn1cIj5SZW1vdmU8L2E+XG4gICAgICA8L2Rpdj5gO1xuXG4gICAgICAkKG5ld0VsZW1lbnQpLmFwcGVuZFRvKGZvcm1Hcm91cCk7XG4gICAgICBjb3VudGVyICs9IDE7XG4gICAgICBmb3JtR3JvdXAuZGF0YShgJHtzZWN0aW9uSWR9LWNvdW50ZXJgLCBjb3VudGVyKTtcbiAgICAgICQodGhpcykudHJpZ2dlcihcImJsdXJcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBmb3JtR3JvdXAub24oXCJjbGlja1wiLCBcIi5yZW1vdmUtcmVkaXJlY3RcIiwgZnVuY3Rpb24gcmVtb3ZlSW5wdXQoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgZ3JvdXBJZCA9ICQodGhpcykuZGF0YShcImdyb3VwLWlkXCIpO1xuICAgICAgJChgIyR7c2VjdGlvbklkfS1pbnB1dC1ncm91cC0ke2dyb3VwSWR9YCkucmVtb3ZlKCk7XG4gICAgICAkKHRoaXMpLnRyaWdnZXIoXCJibHVyXCIpO1xuXG4gICAgICBjb25zdCBuZXdDb3VudGVyID0gZm9ybUdyb3VwLmZpbmQoXCIuZGZlLWZsZXgtY29udGFpbmVyXCIpLmxlbmd0aDtcbiAgICAgIGZvcm1Hcm91cC5kYXRhKGAke3NlY3Rpb25JZH0tY291bnRlcmAsIG5ld0NvdW50ZXIpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNyZWF0ZVNlcnZpY2VDb25maWdVcmxTZWN0aW9ucyhcbiAgICBcInJlZGlyZWN0X3VyaXNcIixcbiAgICBcIiNyZWRpcmVjdF91cmlzLWZvcm0tZ3JvdXBcIixcbiAgICBcIlJlZGlyZWN0IFVSTFwiLFxuICApO1xuICBjcmVhdGVTZXJ2aWNlQ29uZmlnVXJsU2VjdGlvbnMoXG4gICAgXCJwb3N0X2xvZ291dF9yZWRpcmVjdF91cmlzXCIsXG4gICAgXCIjcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpcy1mb3JtLWdyb3VwXCIsXG4gICAgXCJMb2dvdXQgcmVkaXJlY3QgVVJMXCIsXG4gICk7XG5cbiAgZnVuY3Rpb24gaGFuZGxlU2VjcmV0R2VuZXJhdGlvbihldmVudElkLCBpbnB1dElkLCBjb25maXJtTWVzc2FnZSkge1xuICAgICQoZXZlbnRJZCkub24oXCJjbGlja1wiLCBmdW5jdGlvbiBnZW5lcmF0ZVNlY3JldCgpIHtcbiAgICAgIGNvbnN0IHNlY3JldEFycmF5ID0gd2luZG93Lm5pY2V3YXJlLmdlbmVyYXRlUGFzc3BocmFzZSg4KTtcbiAgICAgIGNvbnN0IHNlY3JldCA9IHNlY3JldEFycmF5LmpvaW4oXCItXCIpO1xuXG4gICAgICBjb25zdCBpc0NvbmZpcm0gPSB3aW5kb3cuY29uZmlybShjb25maXJtTWVzc2FnZSk7XG4gICAgICBpZiAoaXNDb25maXJtKSB7XG4gICAgICAgICQoYGlucHV0IyR7aW5wdXRJZH1gKS5hdHRyKFwidmFsdWVcIiwgc2VjcmV0KTtcbiAgICAgIH1cbiAgICAgICQodGhpcykudHJpZ2dlcihcImJsdXJcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVTZWNyZXRHZW5lcmF0aW9uKFxuICAgIFwiI2dlbmVyYXRlLWNsaWVudFNlY3JldFwiLFxuICAgIFwiY2xpZW50U2VjcmV0XCIsXG4gICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVnZW5lcmF0ZSB0aGUgY2xpZW50IHNlY3JldD9cIixcbiAgKTtcbiAgaGFuZGxlU2VjcmV0R2VuZXJhdGlvbihcbiAgICBcIiNnZW5lcmF0ZS1hcGlTZWNyZXRcIixcbiAgICBcImFwaVNlY3JldFwiLFxuICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlZ2VuZXJhdGUgdGhlIEFQSSBzZWNyZXQ/XCIsXG4gICk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2VjdGlvbnMoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRUeXBlcyA9IFtdO1xuXG4gICAgaWYgKCQoXCIjcmVzcG9uc2VfdHlwZXMtaWRfdG9rZW5cIikuaXMoXCI6Y2hlY2tlZFwiKSkge1xuICAgICAgc2VsZWN0ZWRUeXBlcy5wdXNoKFJFU1BPTlNFX1RZUEVfSURfVE9LRU4pO1xuICAgIH1cblxuICAgIGlmICgkKFwiI3Jlc3BvbnNlX3R5cGVzLXRva2VuXCIpLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgIHNlbGVjdGVkVHlwZXMucHVzaChSRVNQT05TRV9UWVBFX1RPS0VOKTtcbiAgICB9XG5cbiAgICBpZiAoJChcIiNyZXNwb25zZV90eXBlcy1jb2RlXCIpLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgIHNlbGVjdGVkVHlwZXMucHVzaChSRVNQT05TRV9UWVBFX0NPREUpO1xuICAgIH1cblxuICAgIGxldCB3YXJuaW5nTWVzc2FnZSA9IFwiXCI7XG5cbiAgICBpZiAoc2VsZWN0ZWRUeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZWxlY3RlZFR5cGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBbXG4gICAgICAgICAgUkVTUE9OU0VfVFlQRV9DT0RFLFxuICAgICAgICAgIFJFU1BPTlNFX1RZUEVfSURfVE9LRU4sXG4gICAgICAgICAgUkVTUE9OU0VfVFlQRV9UT0tFTixcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIG9yZGVyLmluZGV4T2YoYSkgLSBvcmRlci5pbmRleE9mKGIpO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBmbG93VHlwZSA9IEZMT1dfVFlQRV9JTVBMSUNJVDtcblxuICAgICAgaWYgKFxuICAgICAgICBzZWxlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICBzZWxlY3RlZFR5cGVzLmluY2x1ZGVzKFJFU1BPTlNFX1RZUEVfQ09ERSlcbiAgICAgICkge1xuICAgICAgICBmbG93VHlwZSA9IEZMT1dfVFlQRV9BVVRIT1JJWkFUSU9OO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgKHNlbGVjdGVkVHlwZXMuaW5jbHVkZXMoUkVTUE9OU0VfVFlQRV9DT0RFKSAmJlxuICAgICAgICAgIHNlbGVjdGVkVHlwZXMuaW5jbHVkZXMoUkVTUE9OU0VfVFlQRV9UT0tFTikpIHx8XG4gICAgICAgIChzZWxlY3RlZFR5cGVzLmluY2x1ZGVzKFJFU1BPTlNFX1RZUEVfQ09ERSkgJiZcbiAgICAgICAgICBzZWxlY3RlZFR5cGVzLmluY2x1ZGVzKFJFU1BPTlNFX1RZUEVfSURfVE9LRU4pKVxuICAgICAgKSB7XG4gICAgICAgIGZsb3dUeXBlID0gRkxPV19UWVBFX0hZQlJJRDtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBzZWxlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICBzZWxlY3RlZFR5cGVzLmluY2x1ZGVzKFJFU1BPTlNFX1RZUEVfVE9LRU4pXG4gICAgICApIHtcbiAgICAgICAgd2FybmluZ01lc3NhZ2UgPSBcIlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkVHlwZXNEaXNwbGF5O1xuXG4gICAgICAgIGlmIChzZWxlY3RlZFR5cGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBjb25zdCBhbGxCdXRMYXN0ID0gc2VsZWN0ZWRUeXBlcy5zbGljZSgwLCAtMSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgIGNvbnN0IGxhc3QgPSBzZWxlY3RlZFR5cGVzW3NlbGVjdGVkVHlwZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgc2VsZWN0ZWRUeXBlc0Rpc3BsYXkgPSBgJHthbGxCdXRMYXN0fSBhbmQgJHtsYXN0fWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgW3NlbGVjdGVkVHlwZXNEaXNwbGF5XSA9IHNlbGVjdGVkVHlwZXM7XG4gICAgICAgIH1cblxuICAgICAgICB3YXJuaW5nTWVzc2FnZSA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJnb3Z1ay13YXJuaW5nLXRleHQgZ292dWstIS1tYXJnaW4tdG9wLTUgZ292dWstIS1tYXJnaW4tYm90dG9tLTBcIiBpZD1cIndhcm5pbmctcmVzcG9uc2UtdHlwZXNcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdvdnVrLXdhcm5pbmctdGV4dF9faWNvblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiE8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cImdvdnVrLXdhcm5pbmctdGV4dF9fdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdvdnVrLXdhcm5pbmctdGV4dF9fYXNzaXN0aXZlXCI+V2FybmluZzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgWW91IGhhdmUgc2VsZWN0ZWQgJHtzZWxlY3RlZFR5cGVzRGlzcGxheX0gYXMgeW91ciByZXNwb25zZSB0eXBlLiBUaGlzIG1lYW5zICR7Zmxvd1R5cGV9IGZsb3cgaXMgeW91ciBmbG93LlxuICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGV4aXN0aW5nIHdhcm5pbmcsIGlmIGFueVxuICAgICQoXCIjd2FybmluZy1yZXNwb25zZS10eXBlc1wiKS5yZW1vdmUoKTtcblxuICAgIC8vIEFkZCB0aGUgbmV3IHdhcm5pbmdcbiAgICBpZiAod2FybmluZ01lc3NhZ2UpIHtcbiAgICAgICQoXCIjcmVzcG9uc2VfdHlwZXMtZmllbGRzZXRcIikuYXBwZW5kKHdhcm5pbmdNZXNzYWdlKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2VUeXBlc0NvZGVFbGVtZW50ID0gJChcIiNyZXNwb25zZV90eXBlcy1jb2RlXCIpO1xuICAgIGlmIChyZXNwb25zZVR5cGVzQ29kZUVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICBjb25zdCBpbml0aWFsT2Zmc2V0ID0gJChcIiNyZXNwb25zZV90eXBlcy1jb2RlXCIpLm9mZnNldCgpLnRvcDtcblxuICAgICAgY29uc3QgaW5pdGlhbFNjcm9sbFBvc2l0aW9uID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgICBpZiAoJChcIiNyZXNwb25zZV90eXBlcy1jb2RlXCIpLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgJChcbiAgICAgICAgICBcIiNyZWZyZXNoX3Rva2VuLXdyYXBwZXIgOmlucHV0LCAjY2xpZW50U2VjcmV0LXdyYXBwZXIgOmlucHV0LCAjdG9rZW5FbmRwb2ludEF1dGhNZXRob2Qtd3JhcHBlciBzZWxlY3RcIixcbiAgICAgICAgKS5wcm9wKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICAgICAgICAkKFxuICAgICAgICAgIFwiI3JlZnJlc2hfdG9rZW4td3JhcHBlciwgI2NsaWVudFNlY3JldC13cmFwcGVyLCAjdG9rZW5FbmRwb2ludEF1dGhNZXRob2Qtd3JhcHBlclwiLFxuICAgICAgICApLnNsaWRlRG93big1MDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChcbiAgICAgICAgICBcIiNyZWZyZXNoX3Rva2VuLXdyYXBwZXIsICNjbGllbnRTZWNyZXQtd3JhcHBlciwgI3Rva2VuRW5kcG9pbnRBdXRoTWV0aG9kLXdyYXBwZXJcIixcbiAgICAgICAgKS5zbGlkZVVwKDUwMCwgKCkgPT4ge1xuICAgICAgICAgICQoXG4gICAgICAgICAgICBcIiNyZWZyZXNoX3Rva2VuLXdyYXBwZXIgOmlucHV0LCAjY2xpZW50U2VjcmV0LXdyYXBwZXIgOmlucHV0LCAjdG9rZW5FbmRwb2ludEF1dGhNZXRob2Qtd3JhcHBlciBzZWxlY3RcIixcbiAgICAgICAgICApLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld09mZnNldCA9ICQoXCIjcmVzcG9uc2VfdHlwZXMtY29kZVwiKS5vZmZzZXQoKS50b3A7XG4gICAgICBjb25zdCBvZmZzZXREaWZmZXJlbmNlID0gbmV3T2Zmc2V0IC0gaW5pdGlhbE9mZnNldDtcblxuICAgICAgJChcImh0bWwsIGJvZHlcIikuYW5pbWF0ZShcbiAgICAgICAge1xuICAgICAgICAgIHNjcm9sbFRvcDogaW5pdGlhbFNjcm9sbFBvc2l0aW9uICsgb2Zmc2V0RGlmZmVyZW5jZSxcbiAgICAgICAgfSxcbiAgICAgICAgNTAsXG4gICAgICAgIFwibGluZWFyXCIsXG4gICAgICApO1xuICAgIH1cbiAgfVxuICB1cGRhdGVTZWN0aW9ucygpO1xuXG4gIC8vIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgY2hlY2tib3hlc1xuICAkKFwiI3Jlc3BvbnNlX3R5cGVzLWlkX3Rva2VuLCAjcmVzcG9uc2VfdHlwZXMtdG9rZW4sICNyZXNwb25zZV90eXBlcy1jb2RlXCIpLm9uKFxuICAgIFwiY2hhbmdlXCIsXG4gICAgKCkgPT4ge1xuICAgICAgdXBkYXRlU2VjdGlvbnMoKTtcbiAgICB9LFxuICApO1xufSk7XG4iLCJmdW5jdGlvbiBzb3J0VGFibGUobikge1xuICB2YXIgdGFibGUsXG4gICAgcm93cyxcbiAgICBzd2l0Y2hpbmcsXG4gICAgaSxcbiAgICB4LFxuICAgIHksXG4gICAgc2hvdWxkU3dpdGNoLFxuICAgIGRpcmVjdGlvbixcbiAgICBzd2l0Y2hjb3VudCA9IDA7XG4gIHRhYmxlID0gJChcInRhYmxlLnNvcnRhYmxlXCIpO1xuICBzd2l0Y2hpbmcgPSB0cnVlO1xuICBkaXJlY3Rpb24gPSBcImFcIjtcblxuICB3aGlsZSAoc3dpdGNoaW5nKSB7XG4gICAgc3dpdGNoaW5nID0gZmFsc2U7XG4gICAgcm93cyA9IHRhYmxlLmZpbmQoXCJ0clwiKTtcblxuICAgIGZvciAoaSA9IDE7IGkgPCByb3dzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgc2hvdWxkU3dpdGNoID0gZmFsc2U7XG5cbiAgICAgIHggPSByb3dzW2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiVERcIilbbl07XG4gICAgICB5ID0gcm93c1tpICsgMV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJURFwiKVtuXTtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJhXCIpIHtcbiAgICAgICAgaWYgKHguaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkgPiB5LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IFwiZFwiKSB7XG4gICAgICAgIGlmICh4LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpIDwgeS5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHNob3VsZFN3aXRjaCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkU3dpdGNoKSB7XG4gICAgICByb3dzW2ldLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHJvd3NbaSArIDFdLCByb3dzW2ldKTtcbiAgICAgIHN3aXRjaGluZyA9IHRydWU7XG5cbiAgICAgIHN3aXRjaGNvdW50Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzd2l0Y2hjb3VudCA9PT0gMCAmJiBkaXJlY3Rpb24gPT09IFwiYVwiKSB7XG4gICAgICAgIGRpcmVjdGlvbiA9IFwiZFwiO1xuICAgICAgICBzd2l0Y2hpbmcgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZGlyZWN0aW9uO1xufVxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgJChcInRhYmxlLnNvcnRhYmxlIHRoZWFkIHRoXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBoZWFkaW5nQ2VsbHMgPSAkKFwidGFibGUuc29ydGFibGUgdGhlYWQgdHIgdGhcIik7XG5cbiAgICBoZWFkaW5nQ2VsbHNcbiAgICAgIC5yZW1vdmVDbGFzcyhcInNvcnRlZFwiKVxuICAgICAgLnJlbW92ZUNsYXNzKFwiZGlyLWFcIilcbiAgICAgIC5yZW1vdmVDbGFzcyhcImRpci1kXCIpO1xuXG4gICAgdmFyIGluZGV4ID0gaGVhZGluZ0NlbGxzLmluZGV4KCQodGhpcykpO1xuXG4gICAgdmFyIGRpcmVjdGlvbiA9IHNvcnRUYWJsZShpbmRleCk7XG5cbiAgICAkKHRoaXMpLmFkZENsYXNzKFwic29ydGVkIGRpci1cIiArIGRpcmVjdGlvbik7XG4gIH0pO1xufSk7XG4iLCIoKGdsb2JhbCkgPT4ge1xuICBjb25zdCBnbG9iYWxPYmplY3QgPSBnbG9iYWw7XG4gIGNvbnN0ICQgPSBnbG9iYWwualF1ZXJ5O1xuICBjb25zdCBHT1ZVSyA9IGdsb2JhbC5HT1ZVSyB8fCB7fTtcblxuICBmdW5jdGlvbiBTaG93SGlkZUNvbnRlbnQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBSYWRpbyBhbmQgQ2hlY2tib3ggc2VsZWN0b3JzXG4gICAgY29uc3Qgc2VsZWN0b3JzID0ge1xuICAgICAgbmFtZXNwYWNlOiBcIlNob3dIaWRlQ29udGVudFwiLFxuICAgICAgcmFkaW86ICdbZGF0YS10YXJnZXRdID4gaW5wdXRbdHlwZT1cInJhZGlvXCJdJyxcbiAgICAgIGNoZWNrYm94OiAnW2RhdGEtdGFyZ2V0XSA+IGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScsXG4gICAgICBsaW5rOiBcImEuanMtdG9nZ2xlLWNvbnRlbnRcIixcbiAgICAgIHNlbGVjdDogXCJbZGF0YS10YXJnZXRdID4gc2VsZWN0XCIsXG4gICAgfTtcblxuICAgIC8vIEVzY2FwZSBuYW1lIGF0dHJpYnV0ZSBmb3IgdXNlIGluIERPTSBzZWxlY3RvclxuICAgIGZ1bmN0aW9uIGVzY2FwZUVsZW1lbnROYW1lKHN0cikge1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKFwiW1wiLCBcIlxcXFxbXCIpLnJlcGxhY2UoXCJdXCIsIFwiXFxcXF1cIik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRvZ2dsZWQgY29udGVudCBmb3IgY29udHJvbFxuICAgIGZ1bmN0aW9uIGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKSB7XG4gICAgICBsZXQgaWQgPSAkY29udHJvbC5hdHRyKFwiYXJpYS1jb250cm9sc1wiKTtcblxuICAgICAgLy8gQVJJQSBhdHRyaWJ1dGVzIGFyZW4ndCBzZXQgYmVmb3JlIGluaXRcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgaWQgPSAkY29udHJvbC5jbG9zZXN0KFwiW2RhdGEtdGFyZ2V0XVwiKS5kYXRhKFwidGFyZ2V0XCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHNob3cvaGlkZSBjb250ZW50IGJ5IGlkXG4gICAgICByZXR1cm4gJChgIyR7aWR9YCk7XG4gICAgfVxuXG4gICAgLy8gQWRkcyBBUklBIGF0dHJpYnV0ZXMgdG8gY29udHJvbCArIGFzc29jaWF0ZWQgY29udGVudFxuICAgIGZ1bmN0aW9uIGluaXRUb2dnbGVkQ29udGVudCgpIHtcbiAgICAgIGNvbnN0ICRjb250cm9sID0gJCh0aGlzKTtcbiAgICAgIGNvbnN0ICRjb250ZW50ID0gZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpO1xuXG4gICAgICAvLyBTZXQgYXJpYS1jb250cm9scyBhbmQgZGVmYXVsdHNcbiAgICAgIGlmICgkY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtY29udHJvbHNcIiwgJGNvbnRlbnQuYXR0cihcImlkXCIpKTtcbiAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaG93IHRvZ2dsZWQgY29udGVudCBmb3IgY29udHJvbFxuICAgIGZ1bmN0aW9uIHNob3dUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgIC8vIFNob3cgY29udGVudFxuICAgICAgaWYgKCRjb250ZW50Lmhhc0NsYXNzKFwianMtaGlkZGVuXCIpKSB7XG4gICAgICAgICRjb250ZW50LnJlbW92ZUNsYXNzKFwianMtaGlkZGVuXCIpO1xuXG4gICAgICAgIC8vIElmIHRoZSBjb250cm9sbGluZyBpbnB1dCwgdXBkYXRlIGFyaWEtZXhwYW5kZWRcbiAgICAgICAgaWYgKCRjb250cm9sLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpKSB7XG4gICAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGlkZSB0b2dnbGVkIGNvbnRlbnQgZm9yIGNvbnRyb2xcbiAgICBmdW5jdGlvbiBoaWRlVG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gJGNvbnRlbnQgfHwgZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpO1xuXG4gICAgICAvLyBIaWRlIGNvbnRlbnRcbiAgICAgIGlmICghY29udGVudC5oYXNDbGFzcyhcImpzLWhpZGRlblwiKSkge1xuICAgICAgICBjb250ZW50LmFkZENsYXNzKFwianMtaGlkZGVuXCIpO1xuXG4gICAgICAgIC8vIElmIHRoZSBjb250cm9sbGluZyBpbnB1dCwgdXBkYXRlIGFyaWEtZXhwYW5kZWRcbiAgICAgICAgaWYgKCRjb250cm9sLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpKSB7XG4gICAgICAgICAgJGNvbnRyb2wuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSByYWRpbyBzaG93L2hpZGVcbiAgICBmdW5jdGlvbiBoYW5kbGVSYWRpb0NvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAvLyBBbGwgcmFkaW9zIGluIHRoaXMgZ3JvdXAgd2hpY2ggY29udHJvbCBjb250ZW50XG4gICAgICBjb25zdCBzZWxlY3RvciA9IGAke3NlbGVjdG9ycy5yYWRpb31bbmFtZT0ke2VzY2FwZUVsZW1lbnROYW1lKCRjb250cm9sLmF0dHIoXCJuYW1lXCIpKX1dW2FyaWEtY29udHJvbHNdYDtcbiAgICAgIGNvbnN0ICRmb3JtID0gJGNvbnRyb2wuY2xvc2VzdChcImZvcm1cIik7XG4gICAgICBjb25zdCAkcmFkaW9zID0gJGZvcm0ubGVuZ3RoID8gJGZvcm0uZmluZChzZWxlY3RvcikgOiAkKHNlbGVjdG9yKTtcblxuICAgICAgLy8gSGlkZSBjb250ZW50IGZvciByYWRpb3MgaW4gZ3JvdXBcbiAgICAgICRyYWRpb3MuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhpZGVUb2dnbGVkQ29udGVudCgkKHRoaXMpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWxlY3QgY29udGVudCBmb3IgdGhpcyBjb250cm9sXG4gICAgICBpZiAoJGNvbnRyb2wuaXMoXCJbYXJpYS1jb250cm9sc11cIikpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoZWNrYm94IHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZUNoZWNrYm94Q29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgIC8vIFNob3cgY2hlY2tib3ggY29udGVudFxuICAgICAgaWYgKCRjb250cm9sLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIaWRlIGNoZWNrYm94IGNvbnRlbnRcbiAgICAgICAgaGlkZVRvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoZWNrYm94IHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZUxpbmtDb250ZW50KCRjb250cm9sLCAkY29udGVudCwgJGV2ZW50KSB7XG4gICAgICBpZiAoJGNvbnRlbnQuaGFzQ2xhc3MoXCJqcy1oaWRkZW5cIikpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRlVG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KTtcbiAgICAgIH1cbiAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVNlbGVjdENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICBpZiAoJGNvbnRyb2wudmFsKCkgPT09ICRjb250cm9sLmRhdGEoXCJvcHRpb25cIikpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaGlkZVRvZ2dsZWRDb250ZW50KCRjb250ZW50LCAkY29udGVudCk7XG4gICAgICBpZiAoJGNvbnRyb2wuZGF0YShcImNsZWFyXCIpKSB7XG4gICAgICAgICRjb250ZW50LmZpbmQoXCI6aW5wdXRcIikuZWFjaCgoXywgZWxlbWVudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlucHV0ID0gZWxlbWVudDtcbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBldGNcbiAgICBmdW5jdGlvbiBpbml0KCRjb250YWluZXIsIGVsZW1lbnRTZWxlY3RvciwgZXZlbnRTZWxlY3RvcnMsIGhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9ICRjb250YWluZXIgfHwgJChkb2N1bWVudC5ib2R5KTtcblxuICAgICAgLy8gSGFuZGxlIGNvbnRyb2wgY2xpY2tzXG4gICAgICBmdW5jdGlvbiBkZWZlcnJlZChldmVudCkge1xuICAgICAgICBjb25zdCAkY29udHJvbCA9ICQodGhpcyk7XG4gICAgICAgIGhhbmRsZXIoJGNvbnRyb2wsIGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKSwgZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIEFSSUEgYXR0cmlidXRlc1xuICAgICAgY29uc3QgJGNvbnRyb2xzID0gJChlbGVtZW50U2VsZWN0b3IpO1xuICAgICAgJGNvbnRyb2xzLmVhY2goaW5pdFRvZ2dsZWRDb250ZW50KTtcblxuICAgICAgLy8gSGFuZGxlIGV2ZW50c1xuICAgICAgJC5lYWNoKGV2ZW50U2VsZWN0b3JzLCAoXywgZXZlbnRTZWxlY3RvcikgPT4ge1xuICAgICAgICBpZiAoaGFuZGxlciA9PT0gaGFuZGxlU2VsZWN0Q29udGVudCkge1xuICAgICAgICAgIGNvbnRhaW5lci5vbihcbiAgICAgICAgICAgIGBjaGFuZ2UuJHtzZWxlY3RvcnMubmFtZXNwYWNlfWAsXG4gICAgICAgICAgICBldmVudFNlbGVjdG9yLFxuICAgICAgICAgICAgZGVmZXJyZWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250YWluZXIub24oYGNsaWNrLiR7c2VsZWN0b3JzLm5hbWVzcGFjZX1gLCBldmVudFNlbGVjdG9yLCBkZWZlcnJlZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBBbnkgYWxyZWFkeSA6Y2hlY2tlZCBvbiBpbml0P1xuICAgICAgaWYgKGhhbmRsZXIgPT09IGhhbmRsZUNoZWNrYm94Q29udGVudCAmJiAkY29udHJvbHMuaXMoXCI6Y2hlY2tlZFwiKSkge1xuICAgICAgICAkY29udHJvbHMuZmlsdGVyKFwiOmNoZWNrZWRcIikuZWFjaChkZWZlcnJlZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYW5kbGVyID09PSBoYW5kbGVTZWxlY3RDb250ZW50KSB7XG4gICAgICAgICRjb250cm9scy5lYWNoKGRlZmVycmVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZXQgZXZlbnQgc2VsZWN0b3JzIGZvciBhbGwgcmFkaW8gZ3JvdXBzXG4gICAgZnVuY3Rpb24gZ2V0RXZlbnRTZWxlY3RvcnNGb3JSYWRpb0dyb3VwcygpIHtcbiAgICAgIGNvbnN0IHJhZGlvR3JvdXBzID0gW107XG5cbiAgICAgIC8vIEJ1aWxkIGFuIGFycmF5IG9mIHJhZGlvIGdyb3VwIHNlbGVjdG9yc1xuICAgICAgcmV0dXJuICQoc2VsZWN0b3JzLnJhZGlvKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBncm91cE5hbWUgPSAkKHRoaXMpLmF0dHIoXCJuYW1lXCIpO1xuXG4gICAgICAgIGlmICgkLmluQXJyYXkoZ3JvdXBOYW1lLCByYWRpb0dyb3VwcykgPT09IC0xKSB7XG4gICAgICAgICAgcmFkaW9Hcm91cHMucHVzaChncm91cE5hbWUpO1xuICAgICAgICAgIHJldHVybiBgaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCIkeyQodGhpcykuYXR0cihcIm5hbWVcIil9XCJdYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNldCB1cCByYWRpbyBzaG93L2hpZGUgY29udGVudCBmb3IgY29udGFpbmVyXG4gICAgc2VsZi5zaG93SGlkZVJhZGlvVG9nZ2xlZENvbnRlbnQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgaW5pdChcbiAgICAgICAgJGNvbnRhaW5lcixcbiAgICAgICAgc2VsZWN0b3JzLnJhZGlvLFxuICAgICAgICBnZXRFdmVudFNlbGVjdG9yc0ZvclJhZGlvR3JvdXBzKCksXG4gICAgICAgIGhhbmRsZVJhZGlvQ29udGVudCxcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8vIFNldCB1cCBjaGVja2JveCBzaG93L2hpZGUgY29udGVudCBmb3IgY29udGFpbmVyXG4gICAgc2VsZi5zaG93SGlkZUNoZWNrYm94VG9nZ2xlZENvbnRlbnQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgaW5pdChcbiAgICAgICAgJGNvbnRhaW5lcixcbiAgICAgICAgc2VsZWN0b3JzLmNoZWNrYm94LFxuICAgICAgICBbc2VsZWN0b3JzLmNoZWNrYm94XSxcbiAgICAgICAgaGFuZGxlQ2hlY2tib3hDb250ZW50LFxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgLy8gU2V0IHVwIGxpbmtzIHNob3cvaGlkZSBjb250ZW50IGZvciBjb250YWluZXJcbiAgICBzZWxmLnNob3dIaWRlTGlua1RvZ2dsZWRDb250ZW50ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIGluaXQoJGNvbnRhaW5lciwgc2VsZWN0b3JzLmxpbmssIFtzZWxlY3RvcnMubGlua10sIGhhbmRsZUxpbmtDb250ZW50KTtcbiAgICB9O1xuXG4gICAgc2VsZi5zaG93SGlkZVNlbGVjdFRvZ2dsZWRDb250ZW50ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIGluaXQoXG4gICAgICAgICRjb250YWluZXIsXG4gICAgICAgIHNlbGVjdG9ycy5zZWxlY3QsXG4gICAgICAgIFtzZWxlY3RvcnMuc2VsZWN0XSxcbiAgICAgICAgaGFuZGxlU2VsZWN0Q29udGVudCxcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8vIFJlbW92ZSBldmVudCBoYW5kbGVyc1xuICAgIHNlbGYuZGVzdHJveSA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBjb25zdCBjb250YWluZXIgPSAkY29udGFpbmVyIHx8ICQoZG9jdW1lbnQuYm9keSk7XG4gICAgICBjb250YWluZXIub2ZmKGAuJHtzZWxlY3RvcnMubmFtZXNwYWNlfWApO1xuICAgIH07XG4gIH1cblxuICBTaG93SGlkZUNvbnRlbnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgIHRoaXMuc2hvd0hpZGVSYWRpb1RvZ2dsZWRDb250ZW50KCRjb250YWluZXIpO1xuICAgIHRoaXMuc2hvd0hpZGVDaGVja2JveFRvZ2dsZWRDb250ZW50KCRjb250YWluZXIpO1xuICAgIHRoaXMuc2hvd0hpZGVMaW5rVG9nZ2xlZENvbnRlbnQoJGNvbnRhaW5lcik7XG4gICAgdGhpcy5zaG93SGlkZVNlbGVjdFRvZ2dsZWRDb250ZW50KCRjb250YWluZXIpO1xuICB9O1xuXG4gIEdPVlVLLlNob3dIaWRlQ29udGVudCA9IFNob3dIaWRlQ29udGVudDtcbiAgZ2xvYmFsT2JqZWN0LkdPVlVLID0gR09WVUs7XG59KSh3aW5kb3cpO1xuIiwidmFyIHRvZ2dsZVRpcHMgPSAkKFwiLnRvZ2dsZS1oZWxwXCIpO1xuXG50b2dnbGVUaXBzLmVhY2goZnVuY3Rpb24gKCkge1xuICB2YXIgJHRoYXQsIGxpdmVSZWdpb24sIGNvbnRhaW5lciwgdG9nZ2xlVGlwO1xuXG4gICR0aGF0ID0gJCh0aGlzKTtcblxuICBjb250YWluZXIgPSAkKFwiPHNwYW4gLz5cIikuYXR0cihcImNsYXNzXCIsIFwidG9nZ2xldGlwXCIpO1xuXG4gIHRvZ2dsZVRpcCA9ICQoXCI8YnV0dG9uIC8+XCIpXG4gICAgLmF0dHIoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpXG4gICAgLmF0dHIoXCJhcmlhLWxhYmVsXCIsIFwiSGVscFwiKVxuICAgIC5hdHRyKFwiZGF0YS10b2dnbGV0aXAtY29udGVudFwiLCAkdGhhdC5odG1sKCkpXG4gICAgLnRleHQoXCI/XCIpXG4gICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1lc3NhZ2UgPSAkKHRoaXMpLmRhdGEoXCJ0b2dnbGV0aXAtY29udGVudFwiKTtcbiAgICAgIHZhciBsaXZlUmVnaW9uID0gJCh0aGlzKS5uZXh0KCk7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxpdmVSZWdpb24uaHRtbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICQoXCI8c3BhbiAvPlwiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkdGhhdC5odG1sKCkubGVuZ3RoID4gNTAgPyBcImJ1YmJsZSBsb25nXCIgOiBcImJ1YmJsZVwiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50ZXh0KG1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSlcbiAgICAub24oXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoKGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PT0gMjcpIGxpdmVSZWdpb24uaHRtbChcIlwiKTtcbiAgICB9KTtcblxuICBsaXZlUmVnaW9uID0gJChcIjxzcGFuIC8+XCIpLmF0dHIoXCJyb2xlXCIsIFwic3RhdHVzXCIpO1xuXG4gIGNvbnRhaW5lci5hcHBlbmQodG9nZ2xlVGlwLCBsaXZlUmVnaW9uKTtcblxuICAkdGhhdC5iZWZvcmUoY29udGFpbmVyKS5yZW1vdmUoKTtcblxuICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKCR0aGF0WzBdICE9PSAkKGUudGFyZ2V0KSkge1xuICAgICAgbGl2ZVJlZ2lvbi5odG1sKFwiXCIpO1xuICAgIH1cbiAgfSk7XG59KTtcbiIsImZ1bmN0aW9uIHZhbGlkYXRlUGFzc3dvcmQoKSB7XG4gIHZhciBpZCA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuICB2YXIgcGFzc3dvcmQgPSAkKHRoaXMpLnZhbCgpO1xuICAkKGAjbGVuZ3RoLSR7aWR9YCkucmVtb3ZlQ2xhc3MoXG4gICAgcGFzc3dvcmQubGVuZ3RoID49IDE0ID8gXCJpY29uLXJlbW92ZVwiIDogXCJpY29uLW9rXCIsXG4gICk7XG4gICQoYCNsZW5ndGgtJHtpZH1gKS5hZGRDbGFzcyhcbiAgICBwYXNzd29yZC5sZW5ndGggPj0gMTQgPyBcImljb24tb2tcIiA6IFwiaWNvbi1yZW1vdmVcIixcbiAgKTtcbn1cblxuJChcIi5wYXNzd29yZC1pbnB1dC1jaGVja1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgdmFyICRwYXNzd29yZElucHV0ID0gJCh0aGlzKTtcbiAgdmFyIGlkID0gJHBhc3N3b3JkSW5wdXQuYXR0cihcImlkXCIpO1xuICB2YXIgdmFsaWRhdGVQYXNzd29yZEh0bWwgPSAkKGA8ZGl2IGlkPSd2YWxpZGF0aW9uLWZlZWRiYWNrLSR7aWR9Jz5gKS5hcHBlbmQoXG4gICAgYDxkaXYgaWQ9J2xlbmd0aC0ke2lkfScgY2xhc3M9J2ljb24tcmVtb3ZlJz5iZSBhdCBsZWFzdCAxNCBjaGFyYWN0ZXJzPC9kaXY+YCxcbiAgKTtcblxuICAkcGFzc3dvcmRJbnB1dC5iZWZvcmUodmFsaWRhdGVQYXNzd29yZEh0bWwpO1xufSk7XG5cbiQoXCIucGFzc3dvcmQtaW5wdXQtY2hlY2tcIikub24oXCJrZXl1cFwiLCB2YWxpZGF0ZVBhc3N3b3JkKTtcbiIsInZhciBmb3JtcyA9ICQoXCIjY29udGVudCBmb3JtXCIpO1xuLy92YXIgaW5wdXRzID0gZm9ybXMuZmluZCgnLmZvcm0tZ3JvdXAgaW5wdXQnKTtcblxuZm9ybXMuYXR0cihcIm5vdmFsaWRhdGVcIiwgXCJub3ZhbGlkYXRlXCIpO1xuXG4vKlxuZm9ybXMub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcbiAgaW5wdXRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrVmFsaWRpdHkoKTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgc2hvd1ZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xufSk7XG5cbmlucHV0cy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlc3VsdCA9IHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xuICBpZiAoIXJlc3VsdCkge1xuICAgIHNob3dWYWxpZGF0aW9uTWVzc2FnZSh0aGlzKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gIH1cbn0pO1xuXG52YXIgc2hvd1ZhbGlkYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gKGZpZWxkKSB7XG5cbiAgdmFyIGZpZWxkID0gZmllbGQsXG4gICAgJGZpZWxkID0gJChmaWVsZCksXG4gICAgJHBhcmVudCA9ICRmaWVsZC5wYXJlbnQoKTtcblxuICBpZiAoJHBhcmVudC5oYXNDbGFzcygnc2hvdy1wYXNzd29yZCcpKSB7XG4gICAgJHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XG4gIH1cblxuICBpZiAoISRwYXJlbnQuaGFzQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJykpIHtcblxuICAgIHZhciBsYWJlbFRleHQgPSAkZmllbGQuZGF0YSgnbGFiZWwnKSB8fCAkKFwibGFiZWxbZm9yPSdcIiArICRmaWVsZC5hdHRyKCdpZCcpICsgXCInXVwiKS50ZXh0KCksXG4gICAgICBlcnJvck1lc3NhZ2VUZXh0ID0gJ0VudGVyIGEgdmFsaWQgJyArIGxhYmVsVGV4dC50b0xvd2VyQ2FzZSgpLFxuICAgICAgZXJyb3JNZXNzYWdlID0gJCgnPHAgY2xhc3M9XCJnb3Z1ay1ib2R5XCI+JylcbiAgICAgICAgLmh0bWwoZXJyb3JNZXNzYWdlVGV4dClcbiAgICAgICAgLnByb3AoJ2NsYXNzJywgJ2Vycm9yLW1lc3NhZ2UnKVxuICAgICAgICAucHJvcCgnaWQnLCAndmFsaWRhdGlvbi0nICsgc2x1Z2lmeShsYWJlbFRleHQpKTtcblxuICAgICRmaWVsZC5iZWZvcmUoZXJyb3JNZXNzYWdlKTtcbiAgICAkcGFyZW50LmFkZENsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuICAgICRmaWVsZC5hdHRyKHtcbiAgICAgICdhcmlhLWRlc2NyaWJlZGJ5JyA6ICd2YWxpZGF0aW9uLScgKyBzbHVnaWZ5KGxhYmVsVGV4dCksXG4gICAgICAnYXJpYS1pbnZhbGlkJzogJ3RydWUnXG4gICAgfSk7XG4gIH1cbn1cblxudmFyIGhpZGVWYWxpZGF0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICB2YXIgZmllbGQgPSBmaWVsZCxcbiAgICAkZmllbGQgPSAkKGZpZWxkKSxcbiAgICAkcGFyZW50ID0gJGZpZWxkLnBhcmVudCgpO1xuXG4gIGlmICgkcGFyZW50Lmhhc0NsYXNzKCdzaG93LXBhc3N3b3JkJykpIHtcbiAgICAkcGFyZW50ID0gJHBhcmVudC5wYXJlbnQoKTtcbiAgfVxuXG4gICRwYXJlbnQucmVtb3ZlQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJyk7XG4gICRwYXJlbnQuZmluZCgncC5lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XG4gICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG4gICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWludmFsaWQnKTtcbn1cblxudmFyIHNsdWdpZnkgPSBmdW5jdGlvbiAodGV4dCkge1xuICByZXR1cm4gdGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKClcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnLScpXG4gICAgLnJlcGxhY2UoL1teXFx3XFwtXSsvZywgJycpXG4gICAgLnJlcGxhY2UoL1xcLVxcLSsvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9eLSsvLCAnJylcbiAgICAucmVwbGFjZSgvLSskLywgJycpO1xufVxuXG4qL1xuIiwidmFyIE5TQSA9IE5TQSB8fCB7fTtcblxuTlNBID0ge1xuICBpbml0aWFsaXNlU2hvd1Bhc3N3b3JkOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gR2V0IGFsbCB0aGUgcGFzc3dvcmQgaW5wdXRzIGluIHRoZSBwYWdlIGFuZCBsb29wIHRocm91Z2ggdGhlbSB0byBhZGQgdGhlIHNob3cvaGlkZSBidXR0b25cbiAgICB2YXIgJHBhc3N3b3JkSW5wdXRzID0gJChcIi5wYXNzd29yZC1pbnB1dFwiKTtcbiAgICAkcGFzc3dvcmRJbnB1dHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuICAgICAgLy8gQ3JlYXRlIHNob3cvaGlkZSBidXR0b25cbiAgICAgIHZhciAkc2hvd0J1dHRvbiA9ICQoXCI8YnV0dG9uIC8+XCIpLnByb3Aoe1xuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBjbGFzczpcbiAgICAgICAgICBcInNob3ctcGFzc3dvcmQgZ292dWstYnV0dG9uIGdvdnVrLWJ1dHRvbi0tc2Vjb25kYXJ5IGdvdnVrLSEtbWFyZ2luLWJvdHRvbS0xXCIsXG4gICAgICAgIGFyaWFMYWJlbDogXCJTaG93IHBhc3N3b3JkXCIsXG4gICAgICB9KTtcbiAgICAgICRzaG93QnV0dG9uLmh0bWwoXCJTaG93XCIpO1xuICAgICAgLy8gV2hlbiBjbGlja2luZyBvbiB0aGF0IGJ1dHRvbiB3ZSB3aWxsIHNob3cvaGlkZSB0aGUgcGFzc3dvcmQgYWNjb3JkaW5nbHlcbiAgICAgICRzaG93QnV0dG9uLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJHRoYXQuYXR0cihcInR5cGVcIikgPT09IFwicGFzc3dvcmRcIikge1xuICAgICAgICAgICR0aGF0LmF0dHIoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgICAkc2hvd0J1dHRvbi50ZXh0KFwiSGlkZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdGhhdC5hdHRyKFwidHlwZVwiLCBcInBhc3N3b3JkXCIpO1xuICAgICAgICAgICRzaG93QnV0dG9uLnRleHQoXCJTaG93XCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIEFkZCBidXR0b24gdG8gdGhlIGRvY3VtZW50XG4gICAgICAkdGhhdC5hZnRlcigkc2hvd0J1dHRvbik7XG4gICAgfSk7XG4gIH0sXG5cbiAgYmFja0xpbms6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFja0xpbmsgPSAkKFwiPGE+XCIpXG4gICAgICAuYXR0cih7IGhyZWY6IFwiI1wiLCBjbGFzczogXCJnb3Z1ay1iYWNrLWxpbmstYm9sZFwiIH0pXG4gICAgICAudGV4dChcIkJhY2tcIilcbiAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG4gICAgJChcIi5qcy1iYWNrLWxpbmtcIikuaHRtbChiYWNrTGluayk7XG4gIH0sXG59O1xuXG5pZiAoJChcInNlbGVjdC5zZWxlY3QyXCIpLmxlbmd0aCA+IDApIHtcbiAgJChcInNlbGVjdC5zZWxlY3QyXCIpLnNlbGVjdDIoeyBtYXRjaGVyOiBzZWxlY3QyTW9kZWxNYXRjaGVyIH0pO1xufVxuXG5mdW5jdGlvbiBzZWxlY3QyTW9kZWxNYXRjaGVyKHBhcmFtcywgZGF0YSkge1xuICBkYXRhLnBhcmVudFRleHQgPSBkYXRhLnBhcmVudFRleHQgfHwgXCJcIjtcbiAgaWYgKFxuICAgIHR5cGVvZiBwYXJhbXMudGVybSA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICFwYXJhbXMudGVybSB8fFxuICAgIHBhcmFtcy50ZXJtLnRyaW0oKSA9PT0gXCJcIlxuICApIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBpZiAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgbWF0Y2ggPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGF0YSk7XG4gICAgZm9yICh2YXIgYyA9IGRhdGEuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pIHtcbiAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XG4gICAgICBjaGlsZC5wYXJlbnRUZXh0ICs9IGRhdGEucGFyZW50VGV4dCArIFwiIFwiICsgZGF0YS50ZXh0O1xuICAgICAgdmFyIG1hdGNoZXMgPSBzZWxlY3QyTW9kZWxNYXRjaGVyKHBhcmFtcywgY2hpbGQpO1xuICAgICAgaWYgKG1hdGNoZXMgPT0gbnVsbCkge1xuICAgICAgICBtYXRjaC5jaGlsZHJlbi5zcGxpY2UoYywgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYXRjaC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3QyTW9kZWxNYXRjaGVyKHBhcmFtcywgbWF0Y2gpO1xuICB9XG4gIHZhciBvcmlnaW5hbCA9IChkYXRhLnBhcmVudFRleHQgKyBcIiBcIiArIGRhdGEudGV4dCkudG9VcHBlckNhc2UoKTtcbiAgdmFyIHRlcm0gPSBwYXJhbXMudGVybS50b1VwcGVyQ2FzZSgpO1xuICBpZiAob3JpZ2luYWwuaW5kZXhPZih0ZXJtKSA+IC0xKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmlmICgkKFwiLnBhc3N3b3JkLWlucHV0XCIpLmxlbmd0aCA+IDApIHtcbiAgTlNBLmluaXRpYWxpc2VTaG93UGFzc3dvcmQoKTtcbn1cblxuaWYgKCQoXCIuanMtYmFjay1saW5rXCIpKSB7XG4gIE5TQS5iYWNrTGluaygpO1xufVxuXG4kKFwiLnVuZGVyLWNvbnN0cnVjdGlvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gIHdpbmRvdy5hbGVydChcIlRoaXMgZnVuY3Rpb25hbGl0eSBpcyBub3QgYXZhaWxhYmxlIHlldFwiKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbmlmICgkKFwiLm5vdGlmaWNhdGlvbiBzcGFuLmljb25cIikubGVuZ3RoID4gMCkge1xuICAkKFwiLm5vdGlmaWNhdGlvbiBzcGFuLmljb25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5oaWRlKCk7XG4gIH0pO1xufVxuXG5pZiAoJChcImFydGljbGUub3JnYW5pc2F0aW9uLXNlcnZpY2VzXCIpLmxlbmd0aCA+IDApIHtcbiAgJChcIi5pbmZvcm1hdGlvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGluZm8gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2VydmljZS1kZXNjcmlwdGlvblwiKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaW5mby50b2dnbGUoKTtcbiAgfSk7XG5cbiAgJChcIi5pbmZvLWxpbmtcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBtZXRhID0gJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIG1ldGEudG9nZ2xlKCk7XG4gIH0pO1xufVxuXG52YXIgc2VhcmNoRmllbGRzID0gJChcImZvcm0gLnNlYXJjaC1maWVsZFwiKTtcblxuaWYgKHNlYXJjaEZpZWxkcy5sZW5ndGggPiAwKSB7XG4gIHZhciBsb2FkZXIgPSAkKFwiPHNwYW4gLz5cIikuYWRkQ2xhc3MoXCJsb2FkZXIgc3Bpbm5lci1pbmxpbmVcIik7XG4gIHZhciBiMSA9ICQoXCI8c3BhbiAvPlwiKS5hZGRDbGFzcyhcImJhbGwgYi0xXCIpO1xuICB2YXIgYjIgPSAkKFwiPHNwYW4gLz5cIikuYWRkQ2xhc3MoXCJiYWxsIGItMlwiKTtcbiAgbG9hZGVyLmFwcGVuZChiMSkuYXBwZW5kKGIyKTtcblxuICBzZWFyY2hGaWVsZHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZvcm0gPSAkKHRoaXMpLnBhcmVudCgpO1xuICAgIHZhciBidXR0b24gPSBmb3JtLmZpbmQoXCJidXR0b25cIik7XG4gICAgZm9ybS5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBidXR0b24uYWZ0ZXIobG9hZGVyKS5oaWRlKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG52YXIgZm9ybVJlZ2lzdGVyID0gJChcIi5wcmV2ZW50LWZvcm0tZG91YmxlLXN1Ym1pc3Npb25cIik7XG5cbmlmIChmb3JtUmVnaXN0ZXIubGVuZ3RoID4gMCkge1xuICBmb3JtUmVnaXN0ZXIuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRzdWJtaXRCdXR0b25zID0gJChmb3JtUmVnaXN0ZXIpLmZpbmQoXCJidXR0b246c3VibWl0XCIpLFxuICAgICAgJHN1Ym1pdEJ1dHRvbiA9ICRzdWJtaXRCdXR0b25zLmVxKDApO1xuICAgIGZvcm1SZWdpc3Rlci5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkc3VibWl0QnV0dG9ucy5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcblxuICAgICAgJHN1Ym1pdEJ1dHRvbi5jc3MoXCJtaW4td2lkdGhcIiwgJHN1Ym1pdEJ1dHRvbi5vdXRlcldpZHRoKCkgKyBcInB4XCIpO1xuXG4gICAgICAkc3VibWl0QnV0dG9uLmFwcGVuZChcbiAgICAgICAgXCI8c3BhbiBjbGFzcz0nbG9hZGVyIHNwaW5uZXItaW5saW5lJz4gPHNwYW4gY2xhc3M9J2JhbGwgYi0xJz48L3NwYW4+IDxzcGFuIGNsYXNzPSdiYWxsIGItMic+PC9zcGFuPiA8c3BhbiBjbGFzcz0nYmFsbCBiLTMnPjwvc3Bhbj4gPC9zcGFuPlwiLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbiQoXCIuYXV0by1zY3JvbGwtb24tY2hhbmdlXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgJCh3aW5kb3cpLnNjcm9sbFRvcCgkKFwiLmF1dG8tc2Nyb2xsLWRlc3RcIikucG9zaXRpb24oKS50b3ApO1xufSk7XG5cbiQoXCIuY2xvc2UtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgdmFyIG5vdGlmaWNhdGlvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIuZ292dWstbm90aWZpY2F0aW9uLWJhbm5lclwiKTtcbiAgbm90aWZpY2F0aW9uLnJlbW92ZSgpO1xufSk7XG5cbi8vIHNlbGVjdCBuZXh0IGVsZW1lbnQgaW4gdGhlIHRlbXBsYXRlLCBzaG93IGl0IGFuZCBoaWRlIHRoZSB0b2dnbGUgbGlua1xuJChcIi50b2dnbGUtb3BlblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gIHZhciBtZXRhID0gJCh0aGlzKS5uZXh0KCk7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgbWV0YS5yZW1vdmVDbGFzcyhcImdvdnVrLXZpc3VhbGx5LWhpZGRlblwiKTtcbiAgJCh0aGlzKS5hZGRDbGFzcyhcImdvdnVrLXZpc3VhbGx5LWhpZGRlblwiKTtcbn0pO1xuXG4vLyAjcmVnaW9uIFNlc3Npb24gdGltZSBvdXRcblxudmFyIHRhYklkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbi8vIDggaG91ciBzZXNzaW9uID0gOCAqIDYwID0gNDgwXG5jb25zdCBzZXNzaW9uRHVyYXRpb25Jbk1pbnV0ZXMgPSA0ODA7XG5cbi8vIFdoZW4gb25seSBOIG1pbnV0ZXMgb2YgdGhlIHNlc3Npb24gcmVtYWluLCBub3RpZnkgdGhlIHVzZXIgdmlhIHRoZSBtb2RhbFxuY29uc3Qgbm90aWZ5VXNlcldoZW5TZXNzaW9uTWludXRlc1JlbWFpbiA9IDU7XG5cbmZ1bmN0aW9uIGdldFNlc3Npb25Ob3RpZnlVc2VySW5TZWNvbmRzKCkge1xuICByZXR1cm4gbm90aWZ5VXNlcldoZW5TZXNzaW9uTWludXRlc1JlbWFpbiAqIDYwIC0gMTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU2Vzc2lvbkNvdW50ZXJEaXNwbGF5KHRvdGFsU2Vjb25kc1JlbWFpbmluZykge1xuICBjb25zdCBtaW51dGVzUmVtYWluaW5nID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHNSZW1haW5pbmcgLyA2MCk7XG4gIGNvbnN0IHNlY29uZHNSZW1haW5pbmcgPSB0b3RhbFNlY29uZHNSZW1haW5pbmcgJSA2MDtcblxuICAkKFwiI21pbnV0ZXNcIikuaHRtbChtaW51dGVzUmVtYWluaW5nLnRvU3RyaW5nKCkucGFkU3RhcnQoMSwgXCIwXCIpKTtcbiAgJChcIiNzZWNvbmRzXCIpLmh0bWwoc2Vjb25kc1JlbWFpbmluZy50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSk7XG59XG5cbi8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAqL1xuZnVuY3Rpb24gc2Vzc2lvblRpbWVvdXQoKSB7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInVyaVwiKTtcblxuICB3aW5kb3cub25mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb3VudFRpbWVEaWZmKCk7XG4gIH07XG5cbiAgdXBkYXRlU2Vzc2lvbkNvdW50ZXJEaXNwbGF5KGdldFNlc3Npb25Ob3RpZnlVc2VySW5TZWNvbmRzKCkpO1xuXG4gIC8vIENvbnZlcnQgc2Vzc2lvbkR1cmF0aW9uSW5NaW51dGVzIGludG8gc2Vjb25kcyAtIGdldFNlc3Npb25Ob3RpZnlVc2VySW5TZWNvbmRzIGFuZCBjb252ZXJ0IHRoZSBzdW0gaW50byBtaWxsaXNlY29uZHNcbiAgY29uc3QgdHJpZ2dlckNhbGxiYWNrSW5NaWxsaXNlY29uZHMgPVxuICAgIChzZXNzaW9uRHVyYXRpb25Jbk1pbnV0ZXMgKiA2MCAtIGdldFNlc3Npb25Ob3RpZnlVc2VySW5TZWNvbmRzKCkpICogMTAwMDtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUYWJzIGFyZSBzZXQgdG8gY2hlY2sgaWYgb3RoZXIgdGFicyBydW5uaW5nIHRpbWVyIHRoZW4gc2V0IHRvIDFcbiAgICAvLyB3aGVuIHNldCB0byAwIG1lYW5zICdTdGF5IHNpZ25lZCBpbicgaXMgc2VsZWN0ZWRcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0YWJzXCIsIFwiMVwiKTtcblxuICAgICQoXCIuc2Vzc2lvbi10aW1lb3V0LW92ZXJsYXlcIikuc2hvdygpO1xuICAgICQoXCIjbW9kYWwtc2lnbmluXCIpLmZvY3VzKCk7XG5cbiAgICBzdGFydFRpbWVyKCk7XG4gIH0sIHRyaWdnZXJDYWxsYmFja0luTWlsbGlzZWNvbmRzKTtcbn1cblxuJChcIiNtb2RhbC1zaWduaW5cIikub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsZWFySW50ZXJ2YWwodGltZW91dFRpbWVyKTtcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGFic1wiLCBcIjBcIik7XG4gIGxvY2F0aW9uLnJlbG9hZCgpO1xufSk7XG5cbiQoXCIjbW9kYWwtc2lnbm91dFwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xlYXJJbnRlcnZhbCh0aW1lb3V0VGltZXIpO1xuICBsb2NhdGlvbi5ocmVmID0gXCIvc2lnbm91dFwiO1xufSk7XG5cbnZhciB0aW1lb3V0VGltZXI7XG5cbmZ1bmN0aW9uIHN0YXJ0VGltZXIoKSB7XG4gIHZhciB0b3RhbFNlY29uZHNSZW1haW5pbmcgPSBnZXRTZXNzaW9uTm90aWZ5VXNlckluU2Vjb25kcygpO1xuXG4gIHRpbWVvdXRUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGFic1wiKSA9PT0gXCIwXCIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZW91dFRpbWVyKTtcbiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH1cblxuICAgIHRvdGFsU2Vjb25kc1JlbWFpbmluZy0tO1xuICAgIHVwZGF0ZVNlc3Npb25Db3VudGVyRGlzcGxheSh0b3RhbFNlY29uZHNSZW1haW5pbmcpO1xuXG4gICAgaWYgKHRvdGFsU2Vjb25kc1JlbWFpbmluZyA8PSAwKSB7XG4gICAgICBjYWxsVGltZW91dCgpO1xuICAgIH0gZWxzZSBpZiAodGFiSWQpIHtcbiAgICAgIGNvdW50VGltZURpZmYoKTtcbiAgICB9XG4gIH0sIDEwMDApO1xufVxuXG5mdW5jdGlvbiBjYWxsVGltZW91dCgpIHtcbiAgY2xlYXJJbnRlcnZhbCh0aW1lb3V0VGltZXIpO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1cmlcIiwgbG9jYXRpb24ucGF0aG5hbWUpO1xuICBsb2NhdGlvbi5ocmVmID0gXCIvc2lnbm91dFwiO1xufVxuXG5mdW5jdGlvbiBjb3VudFRpbWVEaWZmKCkge1xuICB2YXIgZGlmZiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gTnVtYmVyKHRhYklkKTtcbiAgdmFyIG1pbnV0ZXMgPSBkaWZmIC8gKDYwICogMTAwMCk7XG5cbiAgaWYgKG1pbnV0ZXMgPiBzZXNzaW9uRHVyYXRpb25Jbk1pbnV0ZXMpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1cmlcIiwgbG9jYXRpb24ucGF0aG5hbWUpO1xuICAgIGNsZWFySW50ZXJ2YWwodGltZW91dFRpbWVyKTtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxufVxuXG4vLyAjZW5kcmVnaW9uXG5cbnZhciBzaG93SGlkZUNvbnRlbnQgPSBuZXcgR09WVUsuU2hvd0hpZGVDb250ZW50KCk7XG5zaG93SGlkZUNvbnRlbnQuaW5pdCgpO1xuXG5HT1ZVSy5kZXRhaWxzLmluaXQoKTtcbiJdfQ==
